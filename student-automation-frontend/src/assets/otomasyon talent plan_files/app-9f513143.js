var Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $S(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Pl.exports;(function(n,e){(function(){var t,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",g=1,w=2,C=4,v=1,k=2,M=1,z=2,K=4,j=8,ge=16,ne=32,fe=64,pe=128,Te=256,Z=512,dt=30,Mn="...",Xn=800,ha=16,po=1,da=2,pa=3,En=1/0,hn=9007199254740991,ma=17976931348623157e292,li=0/0,Lt=4294967295,ga=Lt-1,ya=Lt>>>1,ba=[["ary",pe],["bind",M],["bindKey",z],["curry",j],["curryRight",ge],["flip",Z],["partial",ne],["partialRight",fe],["rearg",Te]],ce="[object Arguments]",_r="[object Array]",wa="[object AsyncFunction]",nt="[object Boolean]",Qn="[object Date]",mo="[object DOMException]",Ar="[object Error]",Zn="[object Function]",rs="[object GeneratorFunction]",pt="[object Map]",Mr="[object Number]",va="[object Null]",Zt="[object Object]",go="[object Promise]",Sa="[object Proxy]",Er="[object RegExp]",Ct="[object Set]",Ir="[object String]",ai="[object Symbol]",xa="[object Undefined]",Nr="[object WeakMap]",Ca="[object WeakSet]",dn="[object ArrayBuffer]",pn="[object DataView]",ui="[object Float32Array]",mt="[object Float64Array]",fi="[object Int8Array]",ci="[object Int16Array]",is="[object Int32Array]",hi="[object Uint8Array]",er="[object Uint8ClampedArray]",di="[object Uint16Array]",pi="[object Uint32Array]",Ta=/\b__p \+= '';/g,In=/\b(__p \+=) '' \+/g,yo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bo=/&(?:amp|lt|gt|quot|#39);/g,wo=/[&<>"']/g,ss=RegExp(bo.source),Dr=RegExp(wo.source),ls=/<%-([\s\S]+?)%>/g,as=/<%([\s\S]+?)%>/g,mi=/<%=([\s\S]+?)%>/g,Rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ka=/^\w*$/,Oa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,us=/[\\^$.*+?()[\]{}|]/g,_a=RegExp(us.source),fs=/^\s+/,vo=/\s/,cs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nn=/\{\n\/\* \[wrapped with (.+)\] \*/,Aa=/,? & /,Ma=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ea=/[()=,{}\[\]\/\s]/,Ia=/\\(\\)?/g,Na=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bt=/\w*$/,Da=/^[-+]0x[0-9a-f]+$/i,Ra=/^0b[01]+$/i,La=/^\[object .+?Constructor\]$/,Ba=/^0o[0-7]+$/i,Pa=/^(?:0|[1-9]\d*)$/,Dn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gi=/($^)/,za=/['\n\r\u2028\u2029\\]/g,yi="\\ud800-\\udfff",Fa="\\u0300-\\u036f",Wa="\\ufe20-\\ufe2f",bi="\\u20d0-\\u20ff",So=Fa+Wa+bi,xo="\\u2700-\\u27bf",en="a-z\\xdf-\\xf6\\xf8-\\xff",qa="\\xac\\xb1\\xd7\\xf7",Va="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ha="\\u2000-\\u206f",Ua=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Co="A-Z\\xc0-\\xd6\\xd8-\\xde",To="\\ufe0e\\ufe0f",Lr=qa+Va+Ha+Ua,hs="['’]",Br="["+yi+"]",ds="["+Lr+"]",Pr="["+So+"]",ko="\\d+",$a="["+xo+"]",Oo="["+en+"]",_o="[^"+yi+Lr+ko+xo+en+Co+"]",wi="\\ud83c[\\udffb-\\udfff]",Ga="(?:"+Pr+"|"+wi+")",Ao="[^"+yi+"]",vi="(?:\\ud83c[\\udde6-\\uddff]){2}",tr="[\\ud800-\\udbff][\\udc00-\\udfff]",Tt="["+Co+"]",Mo="\\u200d",Eo="(?:"+Oo+"|"+_o+")",mn="(?:"+Tt+"|"+_o+")",Io="(?:"+hs+"(?:d|ll|m|re|s|t|ve))?",No="(?:"+hs+"(?:D|LL|M|RE|S|T|VE))?",Do=Ga+"?",Ro="["+To+"]?",Ja="(?:"+Mo+"(?:"+[Ao,vi,tr].join("|")+")"+Ro+Do+")*",Rn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bo=Ro+Do+Ja,Si="(?:"+[$a,vi,tr].join("|")+")"+Bo,Ka="(?:"+[Ao+Pr+"?",Pr,vi,tr,Br].join("|")+")",ps=RegExp(hs,"g"),ja=RegExp(Pr,"g"),xi=RegExp(wi+"(?="+wi+")|"+Ka+Bo,"g"),Po=RegExp([Tt+"?"+Oo+"+"+Io+"(?="+[ds,Tt,"$"].join("|")+")",mn+"+"+No+"(?="+[ds,Tt+Eo,"$"].join("|")+")",Tt+"?"+Eo+"+"+Io,Tt+"+"+No,Lo,Rn,ko,Si].join("|"),"g"),zo=RegExp("["+Mo+yi+So+To+"]"),zr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ya=-1,ve={};ve[ui]=ve[mt]=ve[fi]=ve[ci]=ve[is]=ve[hi]=ve[er]=ve[di]=ve[pi]=!0,ve[ce]=ve[_r]=ve[dn]=ve[nt]=ve[pn]=ve[Qn]=ve[Ar]=ve[Zn]=ve[pt]=ve[Mr]=ve[Zt]=ve[Er]=ve[Ct]=ve[Ir]=ve[Nr]=!1;var we={};we[ce]=we[_r]=we[dn]=we[pn]=we[nt]=we[Qn]=we[ui]=we[mt]=we[fi]=we[ci]=we[is]=we[pt]=we[Mr]=we[Zt]=we[Er]=we[Ct]=we[Ir]=we[ai]=we[hi]=we[er]=we[di]=we[pi]=!0,we[Ar]=we[Zn]=we[Nr]=!1;var S={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},L={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},q={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Se=parseFloat,X=parseInt,ke=typeof Re=="object"&&Re&&Re.Object===Object&&Re,Le=typeof self=="object"&&self&&self.Object===Object&&self,oe=ke||Le||Function("return this")(),xe=e&&!e.nodeType&&e,Ie=xe&&!0&&n&&!n.nodeType&&n,gt=Ie&&Ie.exports===xe,Be=gt&&ke.process,Oe=function(){try{var O=Ie&&Ie.require&&Ie.require("util").types;return O||Be&&Be.binding&&Be.binding("util")}catch{}}(),rt=Oe&&Oe.isArrayBuffer,tn=Oe&&Oe.isDate,Pt=Oe&&Oe.isMap,gn=Oe&&Oe.isRegExp,ms=Oe&&Oe.isSet,Fr=Oe&&Oe.isTypedArray;function He(O,I,E){switch(E.length){case 0:return O.call(I);case 1:return O.call(I,E[0]);case 2:return O.call(I,E[0],E[1]);case 3:return O.call(I,E[0],E[1],E[2])}return O.apply(I,E)}function p0(O,I,E,V){for(var Y=-1,he=O==null?0:O.length;++Y<he;){var Fe=O[Y];I(V,Fe,E(Fe),O)}return V}function zt(O,I){for(var E=-1,V=O==null?0:O.length;++E<V&&I(O[E],E,O)!==!1;);return O}function m0(O,I){for(var E=O==null?0:O.length;E--&&I(O[E],E,O)!==!1;);return O}function qc(O,I){for(var E=-1,V=O==null?0:O.length;++E<V;)if(!I(O[E],E,O))return!1;return!0}function nr(O,I){for(var E=-1,V=O==null?0:O.length,Y=0,he=[];++E<V;){var Fe=O[E];I(Fe,E,O)&&(he[Y++]=Fe)}return he}function Wo(O,I){var E=O==null?0:O.length;return!!E&&Ci(O,I,0)>-1}function Xa(O,I,E){for(var V=-1,Y=O==null?0:O.length;++V<Y;)if(E(I,O[V]))return!0;return!1}function _e(O,I){for(var E=-1,V=O==null?0:O.length,Y=Array(V);++E<V;)Y[E]=I(O[E],E,O);return Y}function rr(O,I){for(var E=-1,V=I.length,Y=O.length;++E<V;)O[Y+E]=I[E];return O}function Qa(O,I,E,V){var Y=-1,he=O==null?0:O.length;for(V&&he&&(E=O[++Y]);++Y<he;)E=I(E,O[Y],Y,O);return E}function g0(O,I,E,V){var Y=O==null?0:O.length;for(V&&Y&&(E=O[--Y]);Y--;)E=I(E,O[Y],Y,O);return E}function Za(O,I){for(var E=-1,V=O==null?0:O.length;++E<V;)if(I(O[E],E,O))return!0;return!1}var y0=eu("length");function b0(O){return O.split("")}function w0(O){return O.match(Ma)||[]}function Vc(O,I,E){var V;return E(O,function(Y,he,Fe){if(I(Y,he,Fe))return V=he,!1}),V}function qo(O,I,E,V){for(var Y=O.length,he=E+(V?1:-1);V?he--:++he<Y;)if(I(O[he],he,O))return he;return-1}function Ci(O,I,E){return I===I?I0(O,I,E):qo(O,Hc,E)}function v0(O,I,E,V){for(var Y=E-1,he=O.length;++Y<he;)if(V(O[Y],I))return Y;return-1}function Hc(O){return O!==O}function Uc(O,I){var E=O==null?0:O.length;return E?nu(O,I)/E:li}function eu(O){return function(I){return I==null?t:I[O]}}function tu(O){return function(I){return O==null?t:O[I]}}function $c(O,I,E,V,Y){return Y(O,function(he,Fe,Ce){E=V?(V=!1,he):I(E,he,Fe,Ce)}),E}function S0(O,I){var E=O.length;for(O.sort(I);E--;)O[E]=O[E].value;return O}function nu(O,I){for(var E,V=-1,Y=O.length;++V<Y;){var he=I(O[V]);he!==t&&(E=E===t?he:E+he)}return E}function ru(O,I){for(var E=-1,V=Array(O);++E<O;)V[E]=I(E);return V}function x0(O,I){return _e(I,function(E){return[E,O[E]]})}function Gc(O){return O&&O.slice(0,Yc(O)+1).replace(fs,"")}function kt(O){return function(I){return O(I)}}function iu(O,I){return _e(I,function(E){return O[E]})}function gs(O,I){return O.has(I)}function Jc(O,I){for(var E=-1,V=O.length;++E<V&&Ci(I,O[E],0)>-1;);return E}function Kc(O,I){for(var E=O.length;E--&&Ci(I,O[E],0)>-1;);return E}function C0(O,I){for(var E=O.length,V=0;E--;)O[E]===I&&++V;return V}var T0=tu(S),k0=tu(_);function O0(O){return"\\"+q[O]}function _0(O,I){return O==null?t:O[I]}function Ti(O){return zo.test(O)}function A0(O){return zr.test(O)}function M0(O){for(var I,E=[];!(I=O.next()).done;)E.push(I.value);return E}function su(O){var I=-1,E=Array(O.size);return O.forEach(function(V,Y){E[++I]=[Y,V]}),E}function jc(O,I){return function(E){return O(I(E))}}function ir(O,I){for(var E=-1,V=O.length,Y=0,he=[];++E<V;){var Fe=O[E];(Fe===I||Fe===p)&&(O[E]=p,he[Y++]=E)}return he}function Vo(O){var I=-1,E=Array(O.size);return O.forEach(function(V){E[++I]=V}),E}function E0(O){var I=-1,E=Array(O.size);return O.forEach(function(V){E[++I]=[V,V]}),E}function I0(O,I,E){for(var V=E-1,Y=O.length;++V<Y;)if(O[V]===I)return V;return-1}function N0(O,I,E){for(var V=E+1;V--;)if(O[V]===I)return V;return V}function ki(O){return Ti(O)?R0(O):y0(O)}function nn(O){return Ti(O)?L0(O):b0(O)}function Yc(O){for(var I=O.length;I--&&vo.test(O.charAt(I)););return I}var D0=tu(L);function R0(O){for(var I=xi.lastIndex=0;xi.test(O);)++I;return I}function L0(O){return O.match(xi)||[]}function B0(O){return O.match(Po)||[]}var P0=function O(I){I=I==null?oe:Oi.defaults(oe.Object(),I,Oi.pick(oe,Fo));var E=I.Array,V=I.Date,Y=I.Error,he=I.Function,Fe=I.Math,Ce=I.Object,ou=I.RegExp,z0=I.String,Ft=I.TypeError,Ho=E.prototype,F0=he.prototype,_i=Ce.prototype,Uo=I["__core-js_shared__"],$o=F0.toString,ye=_i.hasOwnProperty,W0=0,Xc=function(){var s=/[^.]+$/.exec(Uo&&Uo.keys&&Uo.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Go=_i.toString,q0=$o.call(Ce),V0=oe._,H0=ou("^"+$o.call(ye).replace(us,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jo=gt?I.Buffer:t,sr=I.Symbol,Ko=I.Uint8Array,Qc=Jo?Jo.allocUnsafe:t,jo=jc(Ce.getPrototypeOf,Ce),Zc=Ce.create,eh=_i.propertyIsEnumerable,Yo=Ho.splice,th=sr?sr.isConcatSpreadable:t,ys=sr?sr.iterator:t,Wr=sr?sr.toStringTag:t,Xo=function(){try{var s=$r(Ce,"defineProperty");return s({},"",{}),s}catch{}}(),U0=I.clearTimeout!==oe.clearTimeout&&I.clearTimeout,$0=V&&V.now!==oe.Date.now&&V.now,G0=I.setTimeout!==oe.setTimeout&&I.setTimeout,Qo=Fe.ceil,Zo=Fe.floor,lu=Ce.getOwnPropertySymbols,J0=Jo?Jo.isBuffer:t,nh=I.isFinite,K0=Ho.join,j0=jc(Ce.keys,Ce),We=Fe.max,Ye=Fe.min,Y0=V.now,X0=I.parseInt,rh=Fe.random,Q0=Ho.reverse,au=$r(I,"DataView"),bs=$r(I,"Map"),uu=$r(I,"Promise"),Ai=$r(I,"Set"),ws=$r(I,"WeakMap"),vs=$r(Ce,"create"),el=ws&&new ws,Mi={},Z0=Gr(au),e1=Gr(bs),t1=Gr(uu),n1=Gr(Ai),r1=Gr(ws),tl=sr?sr.prototype:t,Ss=tl?tl.valueOf:t,ih=tl?tl.toString:t;function y(s){if(Me(s)&&!Q(s)&&!(s instanceof se)){if(s instanceof Wt)return s;if(ye.call(s,"__wrapped__"))return sd(s)}return new Wt(s)}var Ei=function(){function s(){}return function(l){if(!Ae(l))return{};if(Zc)return Zc(l);s.prototype=l;var f=new s;return s.prototype=t,f}}();function nl(){}function Wt(s,l){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=t}y.templateSettings={escape:ls,evaluate:as,interpolate:mi,variable:"",imports:{_:y}},y.prototype=nl.prototype,y.prototype.constructor=y,Wt.prototype=Ei(nl.prototype),Wt.prototype.constructor=Wt;function se(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Lt,this.__views__=[]}function i1(){var s=new se(this.__wrapped__);return s.__actions__=yt(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=yt(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=yt(this.__views__),s}function s1(){if(this.__filtered__){var s=new se(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function o1(){var s=this.__wrapped__.value(),l=this.__dir__,f=Q(s),d=l<0,m=f?s.length:0,b=by(0,m,this.__views__),x=b.start,T=b.end,A=T-x,N=d?T:x-1,D=this.__iteratees__,B=D.length,F=0,H=Ye(A,this.__takeCount__);if(!f||!d&&m==A&&H==A)return Ah(s,this.__actions__);var $=[];e:for(;A--&&F<H;){N+=l;for(var te=-1,G=s[N];++te<B;){var ie=D[te],le=ie.iteratee,At=ie.type,ot=le(G);if(At==da)G=ot;else if(!ot){if(At==po)continue e;break e}}$[F++]=G}return $}se.prototype=Ei(nl.prototype),se.prototype.constructor=se;function qr(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var d=s[l];this.set(d[0],d[1])}}function l1(){this.__data__=vs?vs(null):{},this.size=0}function a1(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l}function u1(s){var l=this.__data__;if(vs){var f=l[s];return f===c?t:f}return ye.call(l,s)?l[s]:t}function f1(s){var l=this.__data__;return vs?l[s]!==t:ye.call(l,s)}function c1(s,l){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=vs&&l===t?c:l,this}qr.prototype.clear=l1,qr.prototype.delete=a1,qr.prototype.get=u1,qr.prototype.has=f1,qr.prototype.set=c1;function Ln(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var d=s[l];this.set(d[0],d[1])}}function h1(){this.__data__=[],this.size=0}function d1(s){var l=this.__data__,f=rl(l,s);if(f<0)return!1;var d=l.length-1;return f==d?l.pop():Yo.call(l,f,1),--this.size,!0}function p1(s){var l=this.__data__,f=rl(l,s);return f<0?t:l[f][1]}function m1(s){return rl(this.__data__,s)>-1}function g1(s,l){var f=this.__data__,d=rl(f,s);return d<0?(++this.size,f.push([s,l])):f[d][1]=l,this}Ln.prototype.clear=h1,Ln.prototype.delete=d1,Ln.prototype.get=p1,Ln.prototype.has=m1,Ln.prototype.set=g1;function Bn(s){var l=-1,f=s==null?0:s.length;for(this.clear();++l<f;){var d=s[l];this.set(d[0],d[1])}}function y1(){this.size=0,this.__data__={hash:new qr,map:new(bs||Ln),string:new qr}}function b1(s){var l=ml(this,s).delete(s);return this.size-=l?1:0,l}function w1(s){return ml(this,s).get(s)}function v1(s){return ml(this,s).has(s)}function S1(s,l){var f=ml(this,s),d=f.size;return f.set(s,l),this.size+=f.size==d?0:1,this}Bn.prototype.clear=y1,Bn.prototype.delete=b1,Bn.prototype.get=w1,Bn.prototype.has=v1,Bn.prototype.set=S1;function Vr(s){var l=-1,f=s==null?0:s.length;for(this.__data__=new Bn;++l<f;)this.add(s[l])}function x1(s){return this.__data__.set(s,c),this}function C1(s){return this.__data__.has(s)}Vr.prototype.add=Vr.prototype.push=x1,Vr.prototype.has=C1;function rn(s){var l=this.__data__=new Ln(s);this.size=l.size}function T1(){this.__data__=new Ln,this.size=0}function k1(s){var l=this.__data__,f=l.delete(s);return this.size=l.size,f}function O1(s){return this.__data__.get(s)}function _1(s){return this.__data__.has(s)}function A1(s,l){var f=this.__data__;if(f instanceof Ln){var d=f.__data__;if(!bs||d.length<i-1)return d.push([s,l]),this.size=++f.size,this;f=this.__data__=new Bn(d)}return f.set(s,l),this.size=f.size,this}rn.prototype.clear=T1,rn.prototype.delete=k1,rn.prototype.get=O1,rn.prototype.has=_1,rn.prototype.set=A1;function sh(s,l){var f=Q(s),d=!f&&Jr(s),m=!f&&!d&&fr(s),b=!f&&!d&&!m&&Ri(s),x=f||d||m||b,T=x?ru(s.length,z0):[],A=T.length;for(var N in s)(l||ye.call(s,N))&&!(x&&(N=="length"||m&&(N=="offset"||N=="parent")||b&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||Wn(N,A)))&&T.push(N);return T}function oh(s){var l=s.length;return l?s[vu(0,l-1)]:t}function M1(s,l){return gl(yt(s),Hr(l,0,s.length))}function E1(s){return gl(yt(s))}function fu(s,l,f){(f!==t&&!sn(s[l],f)||f===t&&!(l in s))&&Pn(s,l,f)}function xs(s,l,f){var d=s[l];(!(ye.call(s,l)&&sn(d,f))||f===t&&!(l in s))&&Pn(s,l,f)}function rl(s,l){for(var f=s.length;f--;)if(sn(s[f][0],l))return f;return-1}function I1(s,l,f,d){return or(s,function(m,b,x){l(d,m,f(m),x)}),d}function lh(s,l){return s&&bn(l,Ue(l),s)}function N1(s,l){return s&&bn(l,wt(l),s)}function Pn(s,l,f){l=="__proto__"&&Xo?Xo(s,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[l]=f}function cu(s,l){for(var f=-1,d=l.length,m=E(d),b=s==null;++f<d;)m[f]=b?t:$u(s,l[f]);return m}function Hr(s,l,f){return s===s&&(f!==t&&(s=s<=f?s:f),l!==t&&(s=s>=l?s:l)),s}function qt(s,l,f,d,m,b){var x,T=l&g,A=l&w,N=l&C;if(f&&(x=m?f(s,d,m,b):f(s)),x!==t)return x;if(!Ae(s))return s;var D=Q(s);if(D){if(x=vy(s),!T)return yt(s,x)}else{var B=Xe(s),F=B==Zn||B==rs;if(fr(s))return Ih(s,T);if(B==Zt||B==ce||F&&!m){if(x=A||F?{}:Yh(s),!T)return A?uy(s,N1(x,s)):ay(s,lh(x,s))}else{if(!we[B])return m?s:{};x=Sy(s,B,T)}}b||(b=new rn);var H=b.get(s);if(H)return H;b.set(s,x),kd(s)?s.forEach(function(G){x.add(qt(G,l,f,G,s,b))}):Cd(s)&&s.forEach(function(G,ie){x.set(ie,qt(G,l,f,ie,s,b))});var $=N?A?Iu:Eu:A?wt:Ue,te=D?t:$(s);return zt(te||s,function(G,ie){te&&(ie=G,G=s[ie]),xs(x,ie,qt(G,l,f,ie,s,b))}),x}function D1(s){var l=Ue(s);return function(f){return ah(f,s,l)}}function ah(s,l,f){var d=f.length;if(s==null)return!d;for(s=Ce(s);d--;){var m=f[d],b=l[m],x=s[m];if(x===t&&!(m in s)||!b(x))return!1}return!0}function uh(s,l,f){if(typeof s!="function")throw new Ft(a);return Ms(function(){s.apply(t,f)},l)}function Cs(s,l,f,d){var m=-1,b=Wo,x=!0,T=s.length,A=[],N=l.length;if(!T)return A;f&&(l=_e(l,kt(f))),d?(b=Xa,x=!1):l.length>=i&&(b=gs,x=!1,l=new Vr(l));e:for(;++m<T;){var D=s[m],B=f==null?D:f(D);if(D=d||D!==0?D:0,x&&B===B){for(var F=N;F--;)if(l[F]===B)continue e;A.push(D)}else b(l,B,d)||A.push(D)}return A}var or=Bh(yn),fh=Bh(du,!0);function R1(s,l){var f=!0;return or(s,function(d,m,b){return f=!!l(d,m,b),f}),f}function il(s,l,f){for(var d=-1,m=s.length;++d<m;){var b=s[d],x=l(b);if(x!=null&&(T===t?x===x&&!_t(x):f(x,T)))var T=x,A=b}return A}function L1(s,l,f,d){var m=s.length;for(f=ee(f),f<0&&(f=-f>m?0:m+f),d=d===t||d>m?m:ee(d),d<0&&(d+=m),d=f>d?0:_d(d);f<d;)s[f++]=l;return s}function ch(s,l){var f=[];return or(s,function(d,m,b){l(d,m,b)&&f.push(d)}),f}function Ge(s,l,f,d,m){var b=-1,x=s.length;for(f||(f=Cy),m||(m=[]);++b<x;){var T=s[b];l>0&&f(T)?l>1?Ge(T,l-1,f,d,m):rr(m,T):d||(m[m.length]=T)}return m}var hu=Ph(),hh=Ph(!0);function yn(s,l){return s&&hu(s,l,Ue)}function du(s,l){return s&&hh(s,l,Ue)}function sl(s,l){return nr(l,function(f){return qn(s[f])})}function Ur(s,l){l=ar(l,s);for(var f=0,d=l.length;s!=null&&f<d;)s=s[wn(l[f++])];return f&&f==d?s:t}function dh(s,l,f){var d=l(s);return Q(s)?d:rr(d,f(s))}function it(s){return s==null?s===t?xa:va:Wr&&Wr in Ce(s)?yy(s):Ey(s)}function pu(s,l){return s>l}function B1(s,l){return s!=null&&ye.call(s,l)}function P1(s,l){return s!=null&&l in Ce(s)}function z1(s,l,f){return s>=Ye(l,f)&&s<We(l,f)}function mu(s,l,f){for(var d=f?Xa:Wo,m=s[0].length,b=s.length,x=b,T=E(b),A=1/0,N=[];x--;){var D=s[x];x&&l&&(D=_e(D,kt(l))),A=Ye(D.length,A),T[x]=!f&&(l||m>=120&&D.length>=120)?new Vr(x&&D):t}D=s[0];var B=-1,F=T[0];e:for(;++B<m&&N.length<A;){var H=D[B],$=l?l(H):H;if(H=f||H!==0?H:0,!(F?gs(F,$):d(N,$,f))){for(x=b;--x;){var te=T[x];if(!(te?gs(te,$):d(s[x],$,f)))continue e}F&&F.push($),N.push(H)}}return N}function F1(s,l,f,d){return yn(s,function(m,b,x){l(d,f(m),b,x)}),d}function Ts(s,l,f){l=ar(l,s),s=ed(s,l);var d=s==null?s:s[wn(Ht(l))];return d==null?t:He(d,s,f)}function ph(s){return Me(s)&&it(s)==ce}function W1(s){return Me(s)&&it(s)==dn}function q1(s){return Me(s)&&it(s)==Qn}function ks(s,l,f,d,m){return s===l?!0:s==null||l==null||!Me(s)&&!Me(l)?s!==s&&l!==l:V1(s,l,f,d,ks,m)}function V1(s,l,f,d,m,b){var x=Q(s),T=Q(l),A=x?_r:Xe(s),N=T?_r:Xe(l);A=A==ce?Zt:A,N=N==ce?Zt:N;var D=A==Zt,B=N==Zt,F=A==N;if(F&&fr(s)){if(!fr(l))return!1;x=!0,D=!1}if(F&&!D)return b||(b=new rn),x||Ri(s)?Jh(s,l,f,d,m,b):my(s,l,A,f,d,m,b);if(!(f&v)){var H=D&&ye.call(s,"__wrapped__"),$=B&&ye.call(l,"__wrapped__");if(H||$){var te=H?s.value():s,G=$?l.value():l;return b||(b=new rn),m(te,G,f,d,b)}}return F?(b||(b=new rn),gy(s,l,f,d,m,b)):!1}function H1(s){return Me(s)&&Xe(s)==pt}function gu(s,l,f,d){var m=f.length,b=m,x=!d;if(s==null)return!b;for(s=Ce(s);m--;){var T=f[m];if(x&&T[2]?T[1]!==s[T[0]]:!(T[0]in s))return!1}for(;++m<b;){T=f[m];var A=T[0],N=s[A],D=T[1];if(x&&T[2]){if(N===t&&!(A in s))return!1}else{var B=new rn;if(d)var F=d(N,D,A,s,l,B);if(!(F===t?ks(D,N,v|k,d,B):F))return!1}}return!0}function mh(s){if(!Ae(s)||ky(s))return!1;var l=qn(s)?H0:La;return l.test(Gr(s))}function U1(s){return Me(s)&&it(s)==Er}function $1(s){return Me(s)&&Xe(s)==Ct}function G1(s){return Me(s)&&xl(s.length)&&!!ve[it(s)]}function gh(s){return typeof s=="function"?s:s==null?vt:typeof s=="object"?Q(s)?wh(s[0],s[1]):bh(s):zd(s)}function yu(s){if(!As(s))return j0(s);var l=[];for(var f in Ce(s))ye.call(s,f)&&f!="constructor"&&l.push(f);return l}function J1(s){if(!Ae(s))return My(s);var l=As(s),f=[];for(var d in s)d=="constructor"&&(l||!ye.call(s,d))||f.push(d);return f}function bu(s,l){return s<l}function yh(s,l){var f=-1,d=bt(s)?E(s.length):[];return or(s,function(m,b,x){d[++f]=l(m,b,x)}),d}function bh(s){var l=Du(s);return l.length==1&&l[0][2]?Qh(l[0][0],l[0][1]):function(f){return f===s||gu(f,s,l)}}function wh(s,l){return Lu(s)&&Xh(l)?Qh(wn(s),l):function(f){var d=$u(f,s);return d===t&&d===l?Gu(f,s):ks(l,d,v|k)}}function ol(s,l,f,d,m){s!==l&&hu(l,function(b,x){if(m||(m=new rn),Ae(b))K1(s,l,x,f,ol,d,m);else{var T=d?d(Pu(s,x),b,x+"",s,l,m):t;T===t&&(T=b),fu(s,x,T)}},wt)}function K1(s,l,f,d,m,b,x){var T=Pu(s,f),A=Pu(l,f),N=x.get(A);if(N){fu(s,f,N);return}var D=b?b(T,A,f+"",s,l,x):t,B=D===t;if(B){var F=Q(A),H=!F&&fr(A),$=!F&&!H&&Ri(A);D=A,F||H||$?Q(T)?D=T:Ne(T)?D=yt(T):H?(B=!1,D=Ih(A,!0)):$?(B=!1,D=Nh(A,!0)):D=[]:Es(A)||Jr(A)?(D=T,Jr(T)?D=Ad(T):(!Ae(T)||qn(T))&&(D=Yh(A))):B=!1}B&&(x.set(A,D),m(D,A,d,b,x),x.delete(A)),fu(s,f,D)}function vh(s,l){var f=s.length;if(f)return l+=l<0?f:0,Wn(l,f)?s[l]:t}function Sh(s,l,f){l.length?l=_e(l,function(b){return Q(b)?function(x){return Ur(x,b.length===1?b[0]:b)}:b}):l=[vt];var d=-1;l=_e(l,kt(U()));var m=yh(s,function(b,x,T){var A=_e(l,function(N){return N(b)});return{criteria:A,index:++d,value:b}});return S0(m,function(b,x){return ly(b,x,f)})}function j1(s,l){return xh(s,l,function(f,d){return Gu(s,d)})}function xh(s,l,f){for(var d=-1,m=l.length,b={};++d<m;){var x=l[d],T=Ur(s,x);f(T,x)&&Os(b,ar(x,s),T)}return b}function Y1(s){return function(l){return Ur(l,s)}}function wu(s,l,f,d){var m=d?v0:Ci,b=-1,x=l.length,T=s;for(s===l&&(l=yt(l)),f&&(T=_e(s,kt(f)));++b<x;)for(var A=0,N=l[b],D=f?f(N):N;(A=m(T,D,A,d))>-1;)T!==s&&Yo.call(T,A,1),Yo.call(s,A,1);return s}function Ch(s,l){for(var f=s?l.length:0,d=f-1;f--;){var m=l[f];if(f==d||m!==b){var b=m;Wn(m)?Yo.call(s,m,1):Cu(s,m)}}return s}function vu(s,l){return s+Zo(rh()*(l-s+1))}function X1(s,l,f,d){for(var m=-1,b=We(Qo((l-s)/(f||1)),0),x=E(b);b--;)x[d?b:++m]=s,s+=f;return x}function Su(s,l){var f="";if(!s||l<1||l>hn)return f;do l%2&&(f+=s),l=Zo(l/2),l&&(s+=s);while(l);return f}function re(s,l){return zu(Zh(s,l,vt),s+"")}function Q1(s){return oh(Li(s))}function Z1(s,l){var f=Li(s);return gl(f,Hr(l,0,f.length))}function Os(s,l,f,d){if(!Ae(s))return s;l=ar(l,s);for(var m=-1,b=l.length,x=b-1,T=s;T!=null&&++m<b;){var A=wn(l[m]),N=f;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(m!=x){var D=T[A];N=d?d(D,A,T):t,N===t&&(N=Ae(D)?D:Wn(l[m+1])?[]:{})}xs(T,A,N),T=T[A]}return s}var Th=el?function(s,l){return el.set(s,l),s}:vt,ey=Xo?function(s,l){return Xo(s,"toString",{configurable:!0,enumerable:!1,value:Ku(l),writable:!0})}:vt;function ty(s){return gl(Li(s))}function Vt(s,l,f){var d=-1,m=s.length;l<0&&(l=-l>m?0:m+l),f=f>m?m:f,f<0&&(f+=m),m=l>f?0:f-l>>>0,l>>>=0;for(var b=E(m);++d<m;)b[d]=s[d+l];return b}function ny(s,l){var f;return or(s,function(d,m,b){return f=l(d,m,b),!f}),!!f}function ll(s,l,f){var d=0,m=s==null?d:s.length;if(typeof l=="number"&&l===l&&m<=ya){for(;d<m;){var b=d+m>>>1,x=s[b];x!==null&&!_t(x)&&(f?x<=l:x<l)?d=b+1:m=b}return m}return xu(s,l,vt,f)}function xu(s,l,f,d){var m=0,b=s==null?0:s.length;if(b===0)return 0;l=f(l);for(var x=l!==l,T=l===null,A=_t(l),N=l===t;m<b;){var D=Zo((m+b)/2),B=f(s[D]),F=B!==t,H=B===null,$=B===B,te=_t(B);if(x)var G=d||$;else N?G=$&&(d||F):T?G=$&&F&&(d||!H):A?G=$&&F&&!H&&(d||!te):H||te?G=!1:G=d?B<=l:B<l;G?m=D+1:b=D}return Ye(b,ga)}function kh(s,l){for(var f=-1,d=s.length,m=0,b=[];++f<d;){var x=s[f],T=l?l(x):x;if(!f||!sn(T,A)){var A=T;b[m++]=x===0?0:x}}return b}function Oh(s){return typeof s=="number"?s:_t(s)?li:+s}function Ot(s){if(typeof s=="string")return s;if(Q(s))return _e(s,Ot)+"";if(_t(s))return ih?ih.call(s):"";var l=s+"";return l=="0"&&1/s==-En?"-0":l}function lr(s,l,f){var d=-1,m=Wo,b=s.length,x=!0,T=[],A=T;if(f)x=!1,m=Xa;else if(b>=i){var N=l?null:dy(s);if(N)return Vo(N);x=!1,m=gs,A=new Vr}else A=l?[]:T;e:for(;++d<b;){var D=s[d],B=l?l(D):D;if(D=f||D!==0?D:0,x&&B===B){for(var F=A.length;F--;)if(A[F]===B)continue e;l&&A.push(B),T.push(D)}else m(A,B,f)||(A!==T&&A.push(B),T.push(D))}return T}function Cu(s,l){return l=ar(l,s),s=ed(s,l),s==null||delete s[wn(Ht(l))]}function _h(s,l,f,d){return Os(s,l,f(Ur(s,l)),d)}function al(s,l,f,d){for(var m=s.length,b=d?m:-1;(d?b--:++b<m)&&l(s[b],b,s););return f?Vt(s,d?0:b,d?b+1:m):Vt(s,d?b+1:0,d?m:b)}function Ah(s,l){var f=s;return f instanceof se&&(f=f.value()),Qa(l,function(d,m){return m.func.apply(m.thisArg,rr([d],m.args))},f)}function Tu(s,l,f){var d=s.length;if(d<2)return d?lr(s[0]):[];for(var m=-1,b=E(d);++m<d;)for(var x=s[m],T=-1;++T<d;)T!=m&&(b[m]=Cs(b[m]||x,s[T],l,f));return lr(Ge(b,1),l,f)}function Mh(s,l,f){for(var d=-1,m=s.length,b=l.length,x={};++d<m;){var T=d<b?l[d]:t;f(x,s[d],T)}return x}function ku(s){return Ne(s)?s:[]}function Ou(s){return typeof s=="function"?s:vt}function ar(s,l){return Q(s)?s:Lu(s,l)?[s]:id(me(s))}var ry=re;function ur(s,l,f){var d=s.length;return f=f===t?d:f,!l&&f>=d?s:Vt(s,l,f)}var Eh=U0||function(s){return oe.clearTimeout(s)};function Ih(s,l){if(l)return s.slice();var f=s.length,d=Qc?Qc(f):new s.constructor(f);return s.copy(d),d}function _u(s){var l=new s.constructor(s.byteLength);return new Ko(l).set(new Ko(s)),l}function iy(s,l){var f=l?_u(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function sy(s){var l=new s.constructor(s.source,Bt.exec(s));return l.lastIndex=s.lastIndex,l}function oy(s){return Ss?Ce(Ss.call(s)):{}}function Nh(s,l){var f=l?_u(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function Dh(s,l){if(s!==l){var f=s!==t,d=s===null,m=s===s,b=_t(s),x=l!==t,T=l===null,A=l===l,N=_t(l);if(!T&&!N&&!b&&s>l||b&&x&&A&&!T&&!N||d&&x&&A||!f&&A||!m)return 1;if(!d&&!b&&!N&&s<l||N&&f&&m&&!d&&!b||T&&f&&m||!x&&m||!A)return-1}return 0}function ly(s,l,f){for(var d=-1,m=s.criteria,b=l.criteria,x=m.length,T=f.length;++d<x;){var A=Dh(m[d],b[d]);if(A){if(d>=T)return A;var N=f[d];return A*(N=="desc"?-1:1)}}return s.index-l.index}function Rh(s,l,f,d){for(var m=-1,b=s.length,x=f.length,T=-1,A=l.length,N=We(b-x,0),D=E(A+N),B=!d;++T<A;)D[T]=l[T];for(;++m<x;)(B||m<b)&&(D[f[m]]=s[m]);for(;N--;)D[T++]=s[m++];return D}function Lh(s,l,f,d){for(var m=-1,b=s.length,x=-1,T=f.length,A=-1,N=l.length,D=We(b-T,0),B=E(D+N),F=!d;++m<D;)B[m]=s[m];for(var H=m;++A<N;)B[H+A]=l[A];for(;++x<T;)(F||m<b)&&(B[H+f[x]]=s[m++]);return B}function yt(s,l){var f=-1,d=s.length;for(l||(l=E(d));++f<d;)l[f]=s[f];return l}function bn(s,l,f,d){var m=!f;f||(f={});for(var b=-1,x=l.length;++b<x;){var T=l[b],A=d?d(f[T],s[T],T,f,s):t;A===t&&(A=s[T]),m?Pn(f,T,A):xs(f,T,A)}return f}function ay(s,l){return bn(s,Ru(s),l)}function uy(s,l){return bn(s,Kh(s),l)}function ul(s,l){return function(f,d){var m=Q(f)?p0:I1,b=l?l():{};return m(f,s,U(d,2),b)}}function Ii(s){return re(function(l,f){var d=-1,m=f.length,b=m>1?f[m-1]:t,x=m>2?f[2]:t;for(b=s.length>3&&typeof b=="function"?(m--,b):t,x&&st(f[0],f[1],x)&&(b=m<3?t:b,m=1),l=Ce(l);++d<m;){var T=f[d];T&&s(l,T,d,b)}return l})}function Bh(s,l){return function(f,d){if(f==null)return f;if(!bt(f))return s(f,d);for(var m=f.length,b=l?m:-1,x=Ce(f);(l?b--:++b<m)&&d(x[b],b,x)!==!1;);return f}}function Ph(s){return function(l,f,d){for(var m=-1,b=Ce(l),x=d(l),T=x.length;T--;){var A=x[s?T:++m];if(f(b[A],A,b)===!1)break}return l}}function fy(s,l,f){var d=l&M,m=_s(s);function b(){var x=this&&this!==oe&&this instanceof b?m:s;return x.apply(d?f:this,arguments)}return b}function zh(s){return function(l){l=me(l);var f=Ti(l)?nn(l):t,d=f?f[0]:l.charAt(0),m=f?ur(f,1).join(""):l.slice(1);return d[s]()+m}}function Ni(s){return function(l){return Qa(Bd(Ld(l).replace(ps,"")),s,"")}}function _s(s){return function(){var l=arguments;switch(l.length){case 0:return new s;case 1:return new s(l[0]);case 2:return new s(l[0],l[1]);case 3:return new s(l[0],l[1],l[2]);case 4:return new s(l[0],l[1],l[2],l[3]);case 5:return new s(l[0],l[1],l[2],l[3],l[4]);case 6:return new s(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new s(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=Ei(s.prototype),d=s.apply(f,l);return Ae(d)?d:f}}function cy(s,l,f){var d=_s(s);function m(){for(var b=arguments.length,x=E(b),T=b,A=Di(m);T--;)x[T]=arguments[T];var N=b<3&&x[0]!==A&&x[b-1]!==A?[]:ir(x,A);if(b-=N.length,b<f)return Hh(s,l,fl,m.placeholder,t,x,N,t,t,f-b);var D=this&&this!==oe&&this instanceof m?d:s;return He(D,this,x)}return m}function Fh(s){return function(l,f,d){var m=Ce(l);if(!bt(l)){var b=U(f,3);l=Ue(l),f=function(T){return b(m[T],T,m)}}var x=s(l,f,d);return x>-1?m[b?l[x]:x]:t}}function Wh(s){return Fn(function(l){var f=l.length,d=f,m=Wt.prototype.thru;for(s&&l.reverse();d--;){var b=l[d];if(typeof b!="function")throw new Ft(a);if(m&&!x&&pl(b)=="wrapper")var x=new Wt([],!0)}for(d=x?d:f;++d<f;){b=l[d];var T=pl(b),A=T=="wrapper"?Nu(b):t;A&&Bu(A[0])&&A[1]==(pe|j|ne|Te)&&!A[4].length&&A[9]==1?x=x[pl(A[0])].apply(x,A[3]):x=b.length==1&&Bu(b)?x[T]():x.thru(b)}return function(){var N=arguments,D=N[0];if(x&&N.length==1&&Q(D))return x.plant(D).value();for(var B=0,F=f?l[B].apply(this,N):D;++B<f;)F=l[B].call(this,F);return F}})}function fl(s,l,f,d,m,b,x,T,A,N){var D=l&pe,B=l&M,F=l&z,H=l&(j|ge),$=l&Z,te=F?t:_s(s);function G(){for(var ie=arguments.length,le=E(ie),At=ie;At--;)le[At]=arguments[At];if(H)var ot=Di(G),Mt=C0(le,ot);if(d&&(le=Rh(le,d,m,H)),b&&(le=Lh(le,b,x,H)),ie-=Mt,H&&ie<N){var De=ir(le,ot);return Hh(s,l,fl,G.placeholder,f,le,De,T,A,N-ie)}var on=B?f:this,Hn=F?on[s]:s;return ie=le.length,T?le=Iy(le,T):$&&ie>1&&le.reverse(),D&&A<ie&&(le.length=A),this&&this!==oe&&this instanceof G&&(Hn=te||_s(Hn)),Hn.apply(on,le)}return G}function qh(s,l){return function(f,d){return F1(f,s,l(d),{})}}function cl(s,l){return function(f,d){var m;if(f===t&&d===t)return l;if(f!==t&&(m=f),d!==t){if(m===t)return d;typeof f=="string"||typeof d=="string"?(f=Ot(f),d=Ot(d)):(f=Oh(f),d=Oh(d)),m=s(f,d)}return m}}function Au(s){return Fn(function(l){return l=_e(l,kt(U())),re(function(f){var d=this;return s(l,function(m){return He(m,d,f)})})})}function hl(s,l){l=l===t?" ":Ot(l);var f=l.length;if(f<2)return f?Su(l,s):l;var d=Su(l,Qo(s/ki(l)));return Ti(l)?ur(nn(d),0,s).join(""):d.slice(0,s)}function hy(s,l,f,d){var m=l&M,b=_s(s);function x(){for(var T=-1,A=arguments.length,N=-1,D=d.length,B=E(D+A),F=this&&this!==oe&&this instanceof x?b:s;++N<D;)B[N]=d[N];for(;A--;)B[N++]=arguments[++T];return He(F,m?f:this,B)}return x}function Vh(s){return function(l,f,d){return d&&typeof d!="number"&&st(l,f,d)&&(f=d=t),l=Vn(l),f===t?(f=l,l=0):f=Vn(f),d=d===t?l<f?1:-1:Vn(d),X1(l,f,d,s)}}function dl(s){return function(l,f){return typeof l=="string"&&typeof f=="string"||(l=Ut(l),f=Ut(f)),s(l,f)}}function Hh(s,l,f,d,m,b,x,T,A,N){var D=l&j,B=D?x:t,F=D?t:x,H=D?b:t,$=D?t:b;l|=D?ne:fe,l&=~(D?fe:ne),l&K||(l&=~(M|z));var te=[s,l,m,H,B,$,F,T,A,N],G=f.apply(t,te);return Bu(s)&&td(G,te),G.placeholder=d,nd(G,s,l)}function Mu(s){var l=Fe[s];return function(f,d){if(f=Ut(f),d=d==null?0:Ye(ee(d),292),d&&nh(f)){var m=(me(f)+"e").split("e"),b=l(m[0]+"e"+(+m[1]+d));return m=(me(b)+"e").split("e"),+(m[0]+"e"+(+m[1]-d))}return l(f)}}var dy=Ai&&1/Vo(new Ai([,-0]))[1]==En?function(s){return new Ai(s)}:Xu;function Uh(s){return function(l){var f=Xe(l);return f==pt?su(l):f==Ct?E0(l):x0(l,s(l))}}function zn(s,l,f,d,m,b,x,T){var A=l&z;if(!A&&typeof s!="function")throw new Ft(a);var N=d?d.length:0;if(N||(l&=~(ne|fe),d=m=t),x=x===t?x:We(ee(x),0),T=T===t?T:ee(T),N-=m?m.length:0,l&fe){var D=d,B=m;d=m=t}var F=A?t:Nu(s),H=[s,l,f,d,m,D,B,b,x,T];if(F&&Ay(H,F),s=H[0],l=H[1],f=H[2],d=H[3],m=H[4],T=H[9]=H[9]===t?A?0:s.length:We(H[9]-N,0),!T&&l&(j|ge)&&(l&=~(j|ge)),!l||l==M)var $=fy(s,l,f);else l==j||l==ge?$=cy(s,l,T):(l==ne||l==(M|ne))&&!m.length?$=hy(s,l,f,d):$=fl.apply(t,H);var te=F?Th:td;return nd(te($,H),s,l)}function $h(s,l,f,d){return s===t||sn(s,_i[f])&&!ye.call(d,f)?l:s}function Gh(s,l,f,d,m,b){return Ae(s)&&Ae(l)&&(b.set(l,s),ol(s,l,t,Gh,b),b.delete(l)),s}function py(s){return Es(s)?t:s}function Jh(s,l,f,d,m,b){var x=f&v,T=s.length,A=l.length;if(T!=A&&!(x&&A>T))return!1;var N=b.get(s),D=b.get(l);if(N&&D)return N==l&&D==s;var B=-1,F=!0,H=f&k?new Vr:t;for(b.set(s,l),b.set(l,s);++B<T;){var $=s[B],te=l[B];if(d)var G=x?d(te,$,B,l,s,b):d($,te,B,s,l,b);if(G!==t){if(G)continue;F=!1;break}if(H){if(!Za(l,function(ie,le){if(!gs(H,le)&&($===ie||m($,ie,f,d,b)))return H.push(le)})){F=!1;break}}else if(!($===te||m($,te,f,d,b))){F=!1;break}}return b.delete(s),b.delete(l),F}function my(s,l,f,d,m,b,x){switch(f){case pn:if(s.byteLength!=l.byteLength||s.byteOffset!=l.byteOffset)return!1;s=s.buffer,l=l.buffer;case dn:return!(s.byteLength!=l.byteLength||!b(new Ko(s),new Ko(l)));case nt:case Qn:case Mr:return sn(+s,+l);case Ar:return s.name==l.name&&s.message==l.message;case Er:case Ir:return s==l+"";case pt:var T=su;case Ct:var A=d&v;if(T||(T=Vo),s.size!=l.size&&!A)return!1;var N=x.get(s);if(N)return N==l;d|=k,x.set(s,l);var D=Jh(T(s),T(l),d,m,b,x);return x.delete(s),D;case ai:if(Ss)return Ss.call(s)==Ss.call(l)}return!1}function gy(s,l,f,d,m,b){var x=f&v,T=Eu(s),A=T.length,N=Eu(l),D=N.length;if(A!=D&&!x)return!1;for(var B=A;B--;){var F=T[B];if(!(x?F in l:ye.call(l,F)))return!1}var H=b.get(s),$=b.get(l);if(H&&$)return H==l&&$==s;var te=!0;b.set(s,l),b.set(l,s);for(var G=x;++B<A;){F=T[B];var ie=s[F],le=l[F];if(d)var At=x?d(le,ie,F,l,s,b):d(ie,le,F,s,l,b);if(!(At===t?ie===le||m(ie,le,f,d,b):At)){te=!1;break}G||(G=F=="constructor")}if(te&&!G){var ot=s.constructor,Mt=l.constructor;ot!=Mt&&"constructor"in s&&"constructor"in l&&!(typeof ot=="function"&&ot instanceof ot&&typeof Mt=="function"&&Mt instanceof Mt)&&(te=!1)}return b.delete(s),b.delete(l),te}function Fn(s){return zu(Zh(s,t,ad),s+"")}function Eu(s){return dh(s,Ue,Ru)}function Iu(s){return dh(s,wt,Kh)}var Nu=el?function(s){return el.get(s)}:Xu;function pl(s){for(var l=s.name+"",f=Mi[l],d=ye.call(Mi,l)?f.length:0;d--;){var m=f[d],b=m.func;if(b==null||b==s)return m.name}return l}function Di(s){var l=ye.call(y,"placeholder")?y:s;return l.placeholder}function U(){var s=y.iteratee||ju;return s=s===ju?gh:s,arguments.length?s(arguments[0],arguments[1]):s}function ml(s,l){var f=s.__data__;return Ty(l)?f[typeof l=="string"?"string":"hash"]:f.map}function Du(s){for(var l=Ue(s),f=l.length;f--;){var d=l[f],m=s[d];l[f]=[d,m,Xh(m)]}return l}function $r(s,l){var f=_0(s,l);return mh(f)?f:t}function yy(s){var l=ye.call(s,Wr),f=s[Wr];try{s[Wr]=t;var d=!0}catch{}var m=Go.call(s);return d&&(l?s[Wr]=f:delete s[Wr]),m}var Ru=lu?function(s){return s==null?[]:(s=Ce(s),nr(lu(s),function(l){return eh.call(s,l)}))}:Qu,Kh=lu?function(s){for(var l=[];s;)rr(l,Ru(s)),s=jo(s);return l}:Qu,Xe=it;(au&&Xe(new au(new ArrayBuffer(1)))!=pn||bs&&Xe(new bs)!=pt||uu&&Xe(uu.resolve())!=go||Ai&&Xe(new Ai)!=Ct||ws&&Xe(new ws)!=Nr)&&(Xe=function(s){var l=it(s),f=l==Zt?s.constructor:t,d=f?Gr(f):"";if(d)switch(d){case Z0:return pn;case e1:return pt;case t1:return go;case n1:return Ct;case r1:return Nr}return l});function by(s,l,f){for(var d=-1,m=f.length;++d<m;){var b=f[d],x=b.size;switch(b.type){case"drop":s+=x;break;case"dropRight":l-=x;break;case"take":l=Ye(l,s+x);break;case"takeRight":s=We(s,l-x);break}}return{start:s,end:l}}function wy(s){var l=s.match(Nn);return l?l[1].split(Aa):[]}function jh(s,l,f){l=ar(l,s);for(var d=-1,m=l.length,b=!1;++d<m;){var x=wn(l[d]);if(!(b=s!=null&&f(s,x)))break;s=s[x]}return b||++d!=m?b:(m=s==null?0:s.length,!!m&&xl(m)&&Wn(x,m)&&(Q(s)||Jr(s)))}function vy(s){var l=s.length,f=new s.constructor(l);return l&&typeof s[0]=="string"&&ye.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function Yh(s){return typeof s.constructor=="function"&&!As(s)?Ei(jo(s)):{}}function Sy(s,l,f){var d=s.constructor;switch(l){case dn:return _u(s);case nt:case Qn:return new d(+s);case pn:return iy(s,f);case ui:case mt:case fi:case ci:case is:case hi:case er:case di:case pi:return Nh(s,f);case pt:return new d;case Mr:case Ir:return new d(s);case Er:return sy(s);case Ct:return new d;case ai:return oy(s)}}function xy(s,l){var f=l.length;if(!f)return s;var d=f-1;return l[d]=(f>1?"& ":"")+l[d],l=l.join(f>2?", ":" "),s.replace(cs,`{
/* [wrapped with `+l+`] */
`)}function Cy(s){return Q(s)||Jr(s)||!!(th&&s&&s[th])}function Wn(s,l){var f=typeof s;return l=l??hn,!!l&&(f=="number"||f!="symbol"&&Pa.test(s))&&s>-1&&s%1==0&&s<l}function st(s,l,f){if(!Ae(f))return!1;var d=typeof l;return(d=="number"?bt(f)&&Wn(l,f.length):d=="string"&&l in f)?sn(f[l],s):!1}function Lu(s,l){if(Q(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||_t(s)?!0:ka.test(s)||!Rr.test(s)||l!=null&&s in Ce(l)}function Ty(s){var l=typeof s;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?s!=="__proto__":s===null}function Bu(s){var l=pl(s),f=y[l];if(typeof f!="function"||!(l in se.prototype))return!1;if(s===f)return!0;var d=Nu(f);return!!d&&s===d[0]}function ky(s){return!!Xc&&Xc in s}var Oy=Uo?qn:Zu;function As(s){var l=s&&s.constructor,f=typeof l=="function"&&l.prototype||_i;return s===f}function Xh(s){return s===s&&!Ae(s)}function Qh(s,l){return function(f){return f==null?!1:f[s]===l&&(l!==t||s in Ce(f))}}function _y(s){var l=vl(s,function(d){return f.size===h&&f.clear(),d}),f=l.cache;return l}function Ay(s,l){var f=s[1],d=l[1],m=f|d,b=m<(M|z|pe),x=d==pe&&f==j||d==pe&&f==Te&&s[7].length<=l[8]||d==(pe|Te)&&l[7].length<=l[8]&&f==j;if(!(b||x))return s;d&M&&(s[2]=l[2],m|=f&M?0:K);var T=l[3];if(T){var A=s[3];s[3]=A?Rh(A,T,l[4]):T,s[4]=A?ir(s[3],p):l[4]}return T=l[5],T&&(A=s[5],s[5]=A?Lh(A,T,l[6]):T,s[6]=A?ir(s[5],p):l[6]),T=l[7],T&&(s[7]=T),d&pe&&(s[8]=s[8]==null?l[8]:Ye(s[8],l[8])),s[9]==null&&(s[9]=l[9]),s[0]=l[0],s[1]=m,s}function My(s){var l=[];if(s!=null)for(var f in Ce(s))l.push(f);return l}function Ey(s){return Go.call(s)}function Zh(s,l,f){return l=We(l===t?s.length-1:l,0),function(){for(var d=arguments,m=-1,b=We(d.length-l,0),x=E(b);++m<b;)x[m]=d[l+m];m=-1;for(var T=E(l+1);++m<l;)T[m]=d[m];return T[l]=f(x),He(s,this,T)}}function ed(s,l){return l.length<2?s:Ur(s,Vt(l,0,-1))}function Iy(s,l){for(var f=s.length,d=Ye(l.length,f),m=yt(s);d--;){var b=l[d];s[d]=Wn(b,f)?m[b]:t}return s}function Pu(s,l){if(!(l==="constructor"&&typeof s[l]=="function")&&l!="__proto__")return s[l]}var td=rd(Th),Ms=G0||function(s,l){return oe.setTimeout(s,l)},zu=rd(ey);function nd(s,l,f){var d=l+"";return zu(s,xy(d,Ny(wy(d),f)))}function rd(s){var l=0,f=0;return function(){var d=Y0(),m=ha-(d-f);if(f=d,m>0){if(++l>=Xn)return arguments[0]}else l=0;return s.apply(t,arguments)}}function gl(s,l){var f=-1,d=s.length,m=d-1;for(l=l===t?d:l;++f<l;){var b=vu(f,m),x=s[b];s[b]=s[f],s[f]=x}return s.length=l,s}var id=_y(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(Oa,function(f,d,m,b){l.push(m?b.replace(Ia,"$1"):d||f)}),l});function wn(s){if(typeof s=="string"||_t(s))return s;var l=s+"";return l=="0"&&1/s==-En?"-0":l}function Gr(s){if(s!=null){try{return $o.call(s)}catch{}try{return s+""}catch{}}return""}function Ny(s,l){return zt(ba,function(f){var d="_."+f[0];l&f[1]&&!Wo(s,d)&&s.push(d)}),s.sort()}function sd(s){if(s instanceof se)return s.clone();var l=new Wt(s.__wrapped__,s.__chain__);return l.__actions__=yt(s.__actions__),l.__index__=s.__index__,l.__values__=s.__values__,l}function Dy(s,l,f){(f?st(s,l,f):l===t)?l=1:l=We(ee(l),0);var d=s==null?0:s.length;if(!d||l<1)return[];for(var m=0,b=0,x=E(Qo(d/l));m<d;)x[b++]=Vt(s,m,m+=l);return x}function Ry(s){for(var l=-1,f=s==null?0:s.length,d=0,m=[];++l<f;){var b=s[l];b&&(m[d++]=b)}return m}function Ly(){var s=arguments.length;if(!s)return[];for(var l=E(s-1),f=arguments[0],d=s;d--;)l[d-1]=arguments[d];return rr(Q(f)?yt(f):[f],Ge(l,1))}var By=re(function(s,l){return Ne(s)?Cs(s,Ge(l,1,Ne,!0)):[]}),Py=re(function(s,l){var f=Ht(l);return Ne(f)&&(f=t),Ne(s)?Cs(s,Ge(l,1,Ne,!0),U(f,2)):[]}),zy=re(function(s,l){var f=Ht(l);return Ne(f)&&(f=t),Ne(s)?Cs(s,Ge(l,1,Ne,!0),t,f):[]});function Fy(s,l,f){var d=s==null?0:s.length;return d?(l=f||l===t?1:ee(l),Vt(s,l<0?0:l,d)):[]}function Wy(s,l,f){var d=s==null?0:s.length;return d?(l=f||l===t?1:ee(l),l=d-l,Vt(s,0,l<0?0:l)):[]}function qy(s,l){return s&&s.length?al(s,U(l,3),!0,!0):[]}function Vy(s,l){return s&&s.length?al(s,U(l,3),!0):[]}function Hy(s,l,f,d){var m=s==null?0:s.length;return m?(f&&typeof f!="number"&&st(s,l,f)&&(f=0,d=m),L1(s,l,f,d)):[]}function od(s,l,f){var d=s==null?0:s.length;if(!d)return-1;var m=f==null?0:ee(f);return m<0&&(m=We(d+m,0)),qo(s,U(l,3),m)}function ld(s,l,f){var d=s==null?0:s.length;if(!d)return-1;var m=d-1;return f!==t&&(m=ee(f),m=f<0?We(d+m,0):Ye(m,d-1)),qo(s,U(l,3),m,!0)}function ad(s){var l=s==null?0:s.length;return l?Ge(s,1):[]}function Uy(s){var l=s==null?0:s.length;return l?Ge(s,En):[]}function $y(s,l){var f=s==null?0:s.length;return f?(l=l===t?1:ee(l),Ge(s,l)):[]}function Gy(s){for(var l=-1,f=s==null?0:s.length,d={};++l<f;){var m=s[l];d[m[0]]=m[1]}return d}function ud(s){return s&&s.length?s[0]:t}function Jy(s,l,f){var d=s==null?0:s.length;if(!d)return-1;var m=f==null?0:ee(f);return m<0&&(m=We(d+m,0)),Ci(s,l,m)}function Ky(s){var l=s==null?0:s.length;return l?Vt(s,0,-1):[]}var jy=re(function(s){var l=_e(s,ku);return l.length&&l[0]===s[0]?mu(l):[]}),Yy=re(function(s){var l=Ht(s),f=_e(s,ku);return l===Ht(f)?l=t:f.pop(),f.length&&f[0]===s[0]?mu(f,U(l,2)):[]}),Xy=re(function(s){var l=Ht(s),f=_e(s,ku);return l=typeof l=="function"?l:t,l&&f.pop(),f.length&&f[0]===s[0]?mu(f,t,l):[]});function Qy(s,l){return s==null?"":K0.call(s,l)}function Ht(s){var l=s==null?0:s.length;return l?s[l-1]:t}function Zy(s,l,f){var d=s==null?0:s.length;if(!d)return-1;var m=d;return f!==t&&(m=ee(f),m=m<0?We(d+m,0):Ye(m,d-1)),l===l?N0(s,l,m):qo(s,Hc,m,!0)}function eb(s,l){return s&&s.length?vh(s,ee(l)):t}var tb=re(fd);function fd(s,l){return s&&s.length&&l&&l.length?wu(s,l):s}function nb(s,l,f){return s&&s.length&&l&&l.length?wu(s,l,U(f,2)):s}function rb(s,l,f){return s&&s.length&&l&&l.length?wu(s,l,t,f):s}var ib=Fn(function(s,l){var f=s==null?0:s.length,d=cu(s,l);return Ch(s,_e(l,function(m){return Wn(m,f)?+m:m}).sort(Dh)),d});function sb(s,l){var f=[];if(!(s&&s.length))return f;var d=-1,m=[],b=s.length;for(l=U(l,3);++d<b;){var x=s[d];l(x,d,s)&&(f.push(x),m.push(d))}return Ch(s,m),f}function Fu(s){return s==null?s:Q0.call(s)}function ob(s,l,f){var d=s==null?0:s.length;return d?(f&&typeof f!="number"&&st(s,l,f)?(l=0,f=d):(l=l==null?0:ee(l),f=f===t?d:ee(f)),Vt(s,l,f)):[]}function lb(s,l){return ll(s,l)}function ab(s,l,f){return xu(s,l,U(f,2))}function ub(s,l){var f=s==null?0:s.length;if(f){var d=ll(s,l);if(d<f&&sn(s[d],l))return d}return-1}function fb(s,l){return ll(s,l,!0)}function cb(s,l,f){return xu(s,l,U(f,2),!0)}function hb(s,l){var f=s==null?0:s.length;if(f){var d=ll(s,l,!0)-1;if(sn(s[d],l))return d}return-1}function db(s){return s&&s.length?kh(s):[]}function pb(s,l){return s&&s.length?kh(s,U(l,2)):[]}function mb(s){var l=s==null?0:s.length;return l?Vt(s,1,l):[]}function gb(s,l,f){return s&&s.length?(l=f||l===t?1:ee(l),Vt(s,0,l<0?0:l)):[]}function yb(s,l,f){var d=s==null?0:s.length;return d?(l=f||l===t?1:ee(l),l=d-l,Vt(s,l<0?0:l,d)):[]}function bb(s,l){return s&&s.length?al(s,U(l,3),!1,!0):[]}function wb(s,l){return s&&s.length?al(s,U(l,3)):[]}var vb=re(function(s){return lr(Ge(s,1,Ne,!0))}),Sb=re(function(s){var l=Ht(s);return Ne(l)&&(l=t),lr(Ge(s,1,Ne,!0),U(l,2))}),xb=re(function(s){var l=Ht(s);return l=typeof l=="function"?l:t,lr(Ge(s,1,Ne,!0),t,l)});function Cb(s){return s&&s.length?lr(s):[]}function Tb(s,l){return s&&s.length?lr(s,U(l,2)):[]}function kb(s,l){return l=typeof l=="function"?l:t,s&&s.length?lr(s,t,l):[]}function Wu(s){if(!(s&&s.length))return[];var l=0;return s=nr(s,function(f){if(Ne(f))return l=We(f.length,l),!0}),ru(l,function(f){return _e(s,eu(f))})}function cd(s,l){if(!(s&&s.length))return[];var f=Wu(s);return l==null?f:_e(f,function(d){return He(l,t,d)})}var Ob=re(function(s,l){return Ne(s)?Cs(s,l):[]}),_b=re(function(s){return Tu(nr(s,Ne))}),Ab=re(function(s){var l=Ht(s);return Ne(l)&&(l=t),Tu(nr(s,Ne),U(l,2))}),Mb=re(function(s){var l=Ht(s);return l=typeof l=="function"?l:t,Tu(nr(s,Ne),t,l)}),Eb=re(Wu);function Ib(s,l){return Mh(s||[],l||[],xs)}function Nb(s,l){return Mh(s||[],l||[],Os)}var Db=re(function(s){var l=s.length,f=l>1?s[l-1]:t;return f=typeof f=="function"?(s.pop(),f):t,cd(s,f)});function hd(s){var l=y(s);return l.__chain__=!0,l}function Rb(s,l){return l(s),s}function yl(s,l){return l(s)}var Lb=Fn(function(s){var l=s.length,f=l?s[0]:0,d=this.__wrapped__,m=function(b){return cu(b,s)};return l>1||this.__actions__.length||!(d instanceof se)||!Wn(f)?this.thru(m):(d=d.slice(f,+f+(l?1:0)),d.__actions__.push({func:yl,args:[m],thisArg:t}),new Wt(d,this.__chain__).thru(function(b){return l&&!b.length&&b.push(t),b}))});function Bb(){return hd(this)}function Pb(){return new Wt(this.value(),this.__chain__)}function zb(){this.__values__===t&&(this.__values__=Od(this.value()));var s=this.__index__>=this.__values__.length,l=s?t:this.__values__[this.__index__++];return{done:s,value:l}}function Fb(){return this}function Wb(s){for(var l,f=this;f instanceof nl;){var d=sd(f);d.__index__=0,d.__values__=t,l?m.__wrapped__=d:l=d;var m=d;f=f.__wrapped__}return m.__wrapped__=s,l}function qb(){var s=this.__wrapped__;if(s instanceof se){var l=s;return this.__actions__.length&&(l=new se(this)),l=l.reverse(),l.__actions__.push({func:yl,args:[Fu],thisArg:t}),new Wt(l,this.__chain__)}return this.thru(Fu)}function Vb(){return Ah(this.__wrapped__,this.__actions__)}var Hb=ul(function(s,l,f){ye.call(s,f)?++s[f]:Pn(s,f,1)});function Ub(s,l,f){var d=Q(s)?qc:R1;return f&&st(s,l,f)&&(l=t),d(s,U(l,3))}function $b(s,l){var f=Q(s)?nr:ch;return f(s,U(l,3))}var Gb=Fh(od),Jb=Fh(ld);function Kb(s,l){return Ge(bl(s,l),1)}function jb(s,l){return Ge(bl(s,l),En)}function Yb(s,l,f){return f=f===t?1:ee(f),Ge(bl(s,l),f)}function dd(s,l){var f=Q(s)?zt:or;return f(s,U(l,3))}function pd(s,l){var f=Q(s)?m0:fh;return f(s,U(l,3))}var Xb=ul(function(s,l,f){ye.call(s,f)?s[f].push(l):Pn(s,f,[l])});function Qb(s,l,f,d){s=bt(s)?s:Li(s),f=f&&!d?ee(f):0;var m=s.length;return f<0&&(f=We(m+f,0)),Cl(s)?f<=m&&s.indexOf(l,f)>-1:!!m&&Ci(s,l,f)>-1}var Zb=re(function(s,l,f){var d=-1,m=typeof l=="function",b=bt(s)?E(s.length):[];return or(s,function(x){b[++d]=m?He(l,x,f):Ts(x,l,f)}),b}),ew=ul(function(s,l,f){Pn(s,f,l)});function bl(s,l){var f=Q(s)?_e:yh;return f(s,U(l,3))}function tw(s,l,f,d){return s==null?[]:(Q(l)||(l=l==null?[]:[l]),f=d?t:f,Q(f)||(f=f==null?[]:[f]),Sh(s,l,f))}var nw=ul(function(s,l,f){s[f?0:1].push(l)},function(){return[[],[]]});function rw(s,l,f){var d=Q(s)?Qa:$c,m=arguments.length<3;return d(s,U(l,4),f,m,or)}function iw(s,l,f){var d=Q(s)?g0:$c,m=arguments.length<3;return d(s,U(l,4),f,m,fh)}function sw(s,l){var f=Q(s)?nr:ch;return f(s,Sl(U(l,3)))}function ow(s){var l=Q(s)?oh:Q1;return l(s)}function lw(s,l,f){(f?st(s,l,f):l===t)?l=1:l=ee(l);var d=Q(s)?M1:Z1;return d(s,l)}function aw(s){var l=Q(s)?E1:ty;return l(s)}function uw(s){if(s==null)return 0;if(bt(s))return Cl(s)?ki(s):s.length;var l=Xe(s);return l==pt||l==Ct?s.size:yu(s).length}function fw(s,l,f){var d=Q(s)?Za:ny;return f&&st(s,l,f)&&(l=t),d(s,U(l,3))}var cw=re(function(s,l){if(s==null)return[];var f=l.length;return f>1&&st(s,l[0],l[1])?l=[]:f>2&&st(l[0],l[1],l[2])&&(l=[l[0]]),Sh(s,Ge(l,1),[])}),wl=$0||function(){return oe.Date.now()};function hw(s,l){if(typeof l!="function")throw new Ft(a);return s=ee(s),function(){if(--s<1)return l.apply(this,arguments)}}function md(s,l,f){return l=f?t:l,l=s&&l==null?s.length:l,zn(s,pe,t,t,t,t,l)}function gd(s,l){var f;if(typeof l!="function")throw new Ft(a);return s=ee(s),function(){return--s>0&&(f=l.apply(this,arguments)),s<=1&&(l=t),f}}var qu=re(function(s,l,f){var d=M;if(f.length){var m=ir(f,Di(qu));d|=ne}return zn(s,d,l,f,m)}),yd=re(function(s,l,f){var d=M|z;if(f.length){var m=ir(f,Di(yd));d|=ne}return zn(l,d,s,f,m)});function bd(s,l,f){l=f?t:l;var d=zn(s,j,t,t,t,t,t,l);return d.placeholder=bd.placeholder,d}function wd(s,l,f){l=f?t:l;var d=zn(s,ge,t,t,t,t,t,l);return d.placeholder=wd.placeholder,d}function vd(s,l,f){var d,m,b,x,T,A,N=0,D=!1,B=!1,F=!0;if(typeof s!="function")throw new Ft(a);l=Ut(l)||0,Ae(f)&&(D=!!f.leading,B="maxWait"in f,b=B?We(Ut(f.maxWait)||0,l):b,F="trailing"in f?!!f.trailing:F);function H(De){var on=d,Hn=m;return d=m=t,N=De,x=s.apply(Hn,on),x}function $(De){return N=De,T=Ms(ie,l),D?H(De):x}function te(De){var on=De-A,Hn=De-N,Fd=l-on;return B?Ye(Fd,b-Hn):Fd}function G(De){var on=De-A,Hn=De-N;return A===t||on>=l||on<0||B&&Hn>=b}function ie(){var De=wl();if(G(De))return le(De);T=Ms(ie,te(De))}function le(De){return T=t,F&&d?H(De):(d=m=t,x)}function At(){T!==t&&Eh(T),N=0,d=A=m=T=t}function ot(){return T===t?x:le(wl())}function Mt(){var De=wl(),on=G(De);if(d=arguments,m=this,A=De,on){if(T===t)return $(A);if(B)return Eh(T),T=Ms(ie,l),H(A)}return T===t&&(T=Ms(ie,l)),x}return Mt.cancel=At,Mt.flush=ot,Mt}var dw=re(function(s,l){return uh(s,1,l)}),pw=re(function(s,l,f){return uh(s,Ut(l)||0,f)});function mw(s){return zn(s,Z)}function vl(s,l){if(typeof s!="function"||l!=null&&typeof l!="function")throw new Ft(a);var f=function(){var d=arguments,m=l?l.apply(this,d):d[0],b=f.cache;if(b.has(m))return b.get(m);var x=s.apply(this,d);return f.cache=b.set(m,x)||b,x};return f.cache=new(vl.Cache||Bn),f}vl.Cache=Bn;function Sl(s){if(typeof s!="function")throw new Ft(a);return function(){var l=arguments;switch(l.length){case 0:return!s.call(this);case 1:return!s.call(this,l[0]);case 2:return!s.call(this,l[0],l[1]);case 3:return!s.call(this,l[0],l[1],l[2])}return!s.apply(this,l)}}function gw(s){return gd(2,s)}var yw=ry(function(s,l){l=l.length==1&&Q(l[0])?_e(l[0],kt(U())):_e(Ge(l,1),kt(U()));var f=l.length;return re(function(d){for(var m=-1,b=Ye(d.length,f);++m<b;)d[m]=l[m].call(this,d[m]);return He(s,this,d)})}),Vu=re(function(s,l){var f=ir(l,Di(Vu));return zn(s,ne,t,l,f)}),Sd=re(function(s,l){var f=ir(l,Di(Sd));return zn(s,fe,t,l,f)}),bw=Fn(function(s,l){return zn(s,Te,t,t,t,l)});function ww(s,l){if(typeof s!="function")throw new Ft(a);return l=l===t?l:ee(l),re(s,l)}function vw(s,l){if(typeof s!="function")throw new Ft(a);return l=l==null?0:We(ee(l),0),re(function(f){var d=f[l],m=ur(f,0,l);return d&&rr(m,d),He(s,this,m)})}function Sw(s,l,f){var d=!0,m=!0;if(typeof s!="function")throw new Ft(a);return Ae(f)&&(d="leading"in f?!!f.leading:d,m="trailing"in f?!!f.trailing:m),vd(s,l,{leading:d,maxWait:l,trailing:m})}function xw(s){return md(s,1)}function Cw(s,l){return Vu(Ou(l),s)}function Tw(){if(!arguments.length)return[];var s=arguments[0];return Q(s)?s:[s]}function kw(s){return qt(s,C)}function Ow(s,l){return l=typeof l=="function"?l:t,qt(s,C,l)}function _w(s){return qt(s,g|C)}function Aw(s,l){return l=typeof l=="function"?l:t,qt(s,g|C,l)}function Mw(s,l){return l==null||ah(s,l,Ue(l))}function sn(s,l){return s===l||s!==s&&l!==l}var Ew=dl(pu),Iw=dl(function(s,l){return s>=l}),Jr=ph(function(){return arguments}())?ph:function(s){return Me(s)&&ye.call(s,"callee")&&!eh.call(s,"callee")},Q=E.isArray,Nw=rt?kt(rt):W1;function bt(s){return s!=null&&xl(s.length)&&!qn(s)}function Ne(s){return Me(s)&&bt(s)}function Dw(s){return s===!0||s===!1||Me(s)&&it(s)==nt}var fr=J0||Zu,Rw=tn?kt(tn):q1;function Lw(s){return Me(s)&&s.nodeType===1&&!Es(s)}function Bw(s){if(s==null)return!0;if(bt(s)&&(Q(s)||typeof s=="string"||typeof s.splice=="function"||fr(s)||Ri(s)||Jr(s)))return!s.length;var l=Xe(s);if(l==pt||l==Ct)return!s.size;if(As(s))return!yu(s).length;for(var f in s)if(ye.call(s,f))return!1;return!0}function Pw(s,l){return ks(s,l)}function zw(s,l,f){f=typeof f=="function"?f:t;var d=f?f(s,l):t;return d===t?ks(s,l,t,f):!!d}function Hu(s){if(!Me(s))return!1;var l=it(s);return l==Ar||l==mo||typeof s.message=="string"&&typeof s.name=="string"&&!Es(s)}function Fw(s){return typeof s=="number"&&nh(s)}function qn(s){if(!Ae(s))return!1;var l=it(s);return l==Zn||l==rs||l==wa||l==Sa}function xd(s){return typeof s=="number"&&s==ee(s)}function xl(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=hn}function Ae(s){var l=typeof s;return s!=null&&(l=="object"||l=="function")}function Me(s){return s!=null&&typeof s=="object"}var Cd=Pt?kt(Pt):H1;function Ww(s,l){return s===l||gu(s,l,Du(l))}function qw(s,l,f){return f=typeof f=="function"?f:t,gu(s,l,Du(l),f)}function Vw(s){return Td(s)&&s!=+s}function Hw(s){if(Oy(s))throw new Y(o);return mh(s)}function Uw(s){return s===null}function $w(s){return s==null}function Td(s){return typeof s=="number"||Me(s)&&it(s)==Mr}function Es(s){if(!Me(s)||it(s)!=Zt)return!1;var l=jo(s);if(l===null)return!0;var f=ye.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&$o.call(f)==q0}var Uu=gn?kt(gn):U1;function Gw(s){return xd(s)&&s>=-hn&&s<=hn}var kd=ms?kt(ms):$1;function Cl(s){return typeof s=="string"||!Q(s)&&Me(s)&&it(s)==Ir}function _t(s){return typeof s=="symbol"||Me(s)&&it(s)==ai}var Ri=Fr?kt(Fr):G1;function Jw(s){return s===t}function Kw(s){return Me(s)&&Xe(s)==Nr}function jw(s){return Me(s)&&it(s)==Ca}var Yw=dl(bu),Xw=dl(function(s,l){return s<=l});function Od(s){if(!s)return[];if(bt(s))return Cl(s)?nn(s):yt(s);if(ys&&s[ys])return M0(s[ys]());var l=Xe(s),f=l==pt?su:l==Ct?Vo:Li;return f(s)}function Vn(s){if(!s)return s===0?s:0;if(s=Ut(s),s===En||s===-En){var l=s<0?-1:1;return l*ma}return s===s?s:0}function ee(s){var l=Vn(s),f=l%1;return l===l?f?l-f:l:0}function _d(s){return s?Hr(ee(s),0,Lt):0}function Ut(s){if(typeof s=="number")return s;if(_t(s))return li;if(Ae(s)){var l=typeof s.valueOf=="function"?s.valueOf():s;s=Ae(l)?l+"":l}if(typeof s!="string")return s===0?s:+s;s=Gc(s);var f=Ra.test(s);return f||Ba.test(s)?X(s.slice(2),f?2:8):Da.test(s)?li:+s}function Ad(s){return bn(s,wt(s))}function Qw(s){return s?Hr(ee(s),-hn,hn):s===0?s:0}function me(s){return s==null?"":Ot(s)}var Zw=Ii(function(s,l){if(As(l)||bt(l)){bn(l,Ue(l),s);return}for(var f in l)ye.call(l,f)&&xs(s,f,l[f])}),Md=Ii(function(s,l){bn(l,wt(l),s)}),Tl=Ii(function(s,l,f,d){bn(l,wt(l),s,d)}),ev=Ii(function(s,l,f,d){bn(l,Ue(l),s,d)}),tv=Fn(cu);function nv(s,l){var f=Ei(s);return l==null?f:lh(f,l)}var rv=re(function(s,l){s=Ce(s);var f=-1,d=l.length,m=d>2?l[2]:t;for(m&&st(l[0],l[1],m)&&(d=1);++f<d;)for(var b=l[f],x=wt(b),T=-1,A=x.length;++T<A;){var N=x[T],D=s[N];(D===t||sn(D,_i[N])&&!ye.call(s,N))&&(s[N]=b[N])}return s}),iv=re(function(s){return s.push(t,Gh),He(Ed,t,s)});function sv(s,l){return Vc(s,U(l,3),yn)}function ov(s,l){return Vc(s,U(l,3),du)}function lv(s,l){return s==null?s:hu(s,U(l,3),wt)}function av(s,l){return s==null?s:hh(s,U(l,3),wt)}function uv(s,l){return s&&yn(s,U(l,3))}function fv(s,l){return s&&du(s,U(l,3))}function cv(s){return s==null?[]:sl(s,Ue(s))}function hv(s){return s==null?[]:sl(s,wt(s))}function $u(s,l,f){var d=s==null?t:Ur(s,l);return d===t?f:d}function dv(s,l){return s!=null&&jh(s,l,B1)}function Gu(s,l){return s!=null&&jh(s,l,P1)}var pv=qh(function(s,l,f){l!=null&&typeof l.toString!="function"&&(l=Go.call(l)),s[l]=f},Ku(vt)),mv=qh(function(s,l,f){l!=null&&typeof l.toString!="function"&&(l=Go.call(l)),ye.call(s,l)?s[l].push(f):s[l]=[f]},U),gv=re(Ts);function Ue(s){return bt(s)?sh(s):yu(s)}function wt(s){return bt(s)?sh(s,!0):J1(s)}function yv(s,l){var f={};return l=U(l,3),yn(s,function(d,m,b){Pn(f,l(d,m,b),d)}),f}function bv(s,l){var f={};return l=U(l,3),yn(s,function(d,m,b){Pn(f,m,l(d,m,b))}),f}var wv=Ii(function(s,l,f){ol(s,l,f)}),Ed=Ii(function(s,l,f,d){ol(s,l,f,d)}),vv=Fn(function(s,l){var f={};if(s==null)return f;var d=!1;l=_e(l,function(b){return b=ar(b,s),d||(d=b.length>1),b}),bn(s,Iu(s),f),d&&(f=qt(f,g|w|C,py));for(var m=l.length;m--;)Cu(f,l[m]);return f});function Sv(s,l){return Id(s,Sl(U(l)))}var xv=Fn(function(s,l){return s==null?{}:j1(s,l)});function Id(s,l){if(s==null)return{};var f=_e(Iu(s),function(d){return[d]});return l=U(l),xh(s,f,function(d,m){return l(d,m[0])})}function Cv(s,l,f){l=ar(l,s);var d=-1,m=l.length;for(m||(m=1,s=t);++d<m;){var b=s==null?t:s[wn(l[d])];b===t&&(d=m,b=f),s=qn(b)?b.call(s):b}return s}function Tv(s,l,f){return s==null?s:Os(s,l,f)}function kv(s,l,f,d){return d=typeof d=="function"?d:t,s==null?s:Os(s,l,f,d)}var Nd=Uh(Ue),Dd=Uh(wt);function Ov(s,l,f){var d=Q(s),m=d||fr(s)||Ri(s);if(l=U(l,4),f==null){var b=s&&s.constructor;m?f=d?new b:[]:Ae(s)?f=qn(b)?Ei(jo(s)):{}:f={}}return(m?zt:yn)(s,function(x,T,A){return l(f,x,T,A)}),f}function _v(s,l){return s==null?!0:Cu(s,l)}function Av(s,l,f){return s==null?s:_h(s,l,Ou(f))}function Mv(s,l,f,d){return d=typeof d=="function"?d:t,s==null?s:_h(s,l,Ou(f),d)}function Li(s){return s==null?[]:iu(s,Ue(s))}function Ev(s){return s==null?[]:iu(s,wt(s))}function Iv(s,l,f){return f===t&&(f=l,l=t),f!==t&&(f=Ut(f),f=f===f?f:0),l!==t&&(l=Ut(l),l=l===l?l:0),Hr(Ut(s),l,f)}function Nv(s,l,f){return l=Vn(l),f===t?(f=l,l=0):f=Vn(f),s=Ut(s),z1(s,l,f)}function Dv(s,l,f){if(f&&typeof f!="boolean"&&st(s,l,f)&&(l=f=t),f===t&&(typeof l=="boolean"?(f=l,l=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&l===t?(s=0,l=1):(s=Vn(s),l===t?(l=s,s=0):l=Vn(l)),s>l){var d=s;s=l,l=d}if(f||s%1||l%1){var m=rh();return Ye(s+m*(l-s+Se("1e-"+((m+"").length-1))),l)}return vu(s,l)}var Rv=Ni(function(s,l,f){return l=l.toLowerCase(),s+(f?Rd(l):l)});function Rd(s){return Ju(me(s).toLowerCase())}function Ld(s){return s=me(s),s&&s.replace(Dn,T0).replace(ja,"")}function Lv(s,l,f){s=me(s),l=Ot(l);var d=s.length;f=f===t?d:Hr(ee(f),0,d);var m=f;return f-=l.length,f>=0&&s.slice(f,m)==l}function Bv(s){return s=me(s),s&&Dr.test(s)?s.replace(wo,k0):s}function Pv(s){return s=me(s),s&&_a.test(s)?s.replace(us,"\\$&"):s}var zv=Ni(function(s,l,f){return s+(f?"-":"")+l.toLowerCase()}),Fv=Ni(function(s,l,f){return s+(f?" ":"")+l.toLowerCase()}),Wv=zh("toLowerCase");function qv(s,l,f){s=me(s),l=ee(l);var d=l?ki(s):0;if(!l||d>=l)return s;var m=(l-d)/2;return hl(Zo(m),f)+s+hl(Qo(m),f)}function Vv(s,l,f){s=me(s),l=ee(l);var d=l?ki(s):0;return l&&d<l?s+hl(l-d,f):s}function Hv(s,l,f){s=me(s),l=ee(l);var d=l?ki(s):0;return l&&d<l?hl(l-d,f)+s:s}function Uv(s,l,f){return f||l==null?l=0:l&&(l=+l),X0(me(s).replace(fs,""),l||0)}function $v(s,l,f){return(f?st(s,l,f):l===t)?l=1:l=ee(l),Su(me(s),l)}function Gv(){var s=arguments,l=me(s[0]);return s.length<3?l:l.replace(s[1],s[2])}var Jv=Ni(function(s,l,f){return s+(f?"_":"")+l.toLowerCase()});function Kv(s,l,f){return f&&typeof f!="number"&&st(s,l,f)&&(l=f=t),f=f===t?Lt:f>>>0,f?(s=me(s),s&&(typeof l=="string"||l!=null&&!Uu(l))&&(l=Ot(l),!l&&Ti(s))?ur(nn(s),0,f):s.split(l,f)):[]}var jv=Ni(function(s,l,f){return s+(f?" ":"")+Ju(l)});function Yv(s,l,f){return s=me(s),f=f==null?0:Hr(ee(f),0,s.length),l=Ot(l),s.slice(f,f+l.length)==l}function Xv(s,l,f){var d=y.templateSettings;f&&st(s,l,f)&&(l=t),s=me(s),l=Tl({},l,d,$h);var m=Tl({},l.imports,d.imports,$h),b=Ue(m),x=iu(m,b),T,A,N=0,D=l.interpolate||gi,B="__p += '",F=ou((l.escape||gi).source+"|"+D.source+"|"+(D===mi?Na:gi).source+"|"+(l.evaluate||gi).source+"|$","g"),H="//# sourceURL="+(ye.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ya+"]")+`
`;s.replace(F,function(G,ie,le,At,ot,Mt){return le||(le=At),B+=s.slice(N,Mt).replace(za,O0),ie&&(T=!0,B+=`' +
__e(`+ie+`) +
'`),ot&&(A=!0,B+=`';
`+ot+`;
__p += '`),le&&(B+=`' +
((__t = (`+le+`)) == null ? '' : __t) +
'`),N=Mt+G.length,G}),B+=`';
`;var $=ye.call(l,"variable")&&l.variable;if(!$)B=`with (obj) {
`+B+`
}
`;else if(Ea.test($))throw new Y(u);B=(A?B.replace(Ta,""):B).replace(In,"$1").replace(yo,"$1;"),B="function("+($||"obj")+`) {
`+($?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(T?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var te=Pd(function(){return he(b,H+"return "+B).apply(t,x)});if(te.source=B,Hu(te))throw te;return te}function Qv(s){return me(s).toLowerCase()}function Zv(s){return me(s).toUpperCase()}function eS(s,l,f){if(s=me(s),s&&(f||l===t))return Gc(s);if(!s||!(l=Ot(l)))return s;var d=nn(s),m=nn(l),b=Jc(d,m),x=Kc(d,m)+1;return ur(d,b,x).join("")}function tS(s,l,f){if(s=me(s),s&&(f||l===t))return s.slice(0,Yc(s)+1);if(!s||!(l=Ot(l)))return s;var d=nn(s),m=Kc(d,nn(l))+1;return ur(d,0,m).join("")}function nS(s,l,f){if(s=me(s),s&&(f||l===t))return s.replace(fs,"");if(!s||!(l=Ot(l)))return s;var d=nn(s),m=Jc(d,nn(l));return ur(d,m).join("")}function rS(s,l){var f=dt,d=Mn;if(Ae(l)){var m="separator"in l?l.separator:m;f="length"in l?ee(l.length):f,d="omission"in l?Ot(l.omission):d}s=me(s);var b=s.length;if(Ti(s)){var x=nn(s);b=x.length}if(f>=b)return s;var T=f-ki(d);if(T<1)return d;var A=x?ur(x,0,T).join(""):s.slice(0,T);if(m===t)return A+d;if(x&&(T+=A.length-T),Uu(m)){if(s.slice(T).search(m)){var N,D=A;for(m.global||(m=ou(m.source,me(Bt.exec(m))+"g")),m.lastIndex=0;N=m.exec(D);)var B=N.index;A=A.slice(0,B===t?T:B)}}else if(s.indexOf(Ot(m),T)!=T){var F=A.lastIndexOf(m);F>-1&&(A=A.slice(0,F))}return A+d}function iS(s){return s=me(s),s&&ss.test(s)?s.replace(bo,D0):s}var sS=Ni(function(s,l,f){return s+(f?" ":"")+l.toUpperCase()}),Ju=zh("toUpperCase");function Bd(s,l,f){return s=me(s),l=f?t:l,l===t?A0(s)?B0(s):w0(s):s.match(l)||[]}var Pd=re(function(s,l){try{return He(s,t,l)}catch(f){return Hu(f)?f:new Y(f)}}),oS=Fn(function(s,l){return zt(l,function(f){f=wn(f),Pn(s,f,qu(s[f],s))}),s});function lS(s){var l=s==null?0:s.length,f=U();return s=l?_e(s,function(d){if(typeof d[1]!="function")throw new Ft(a);return[f(d[0]),d[1]]}):[],re(function(d){for(var m=-1;++m<l;){var b=s[m];if(He(b[0],this,d))return He(b[1],this,d)}})}function aS(s){return D1(qt(s,g))}function Ku(s){return function(){return s}}function uS(s,l){return s==null||s!==s?l:s}var fS=Wh(),cS=Wh(!0);function vt(s){return s}function ju(s){return gh(typeof s=="function"?s:qt(s,g))}function hS(s){return bh(qt(s,g))}function dS(s,l){return wh(s,qt(l,g))}var pS=re(function(s,l){return function(f){return Ts(f,s,l)}}),mS=re(function(s,l){return function(f){return Ts(s,f,l)}});function Yu(s,l,f){var d=Ue(l),m=sl(l,d);f==null&&!(Ae(l)&&(m.length||!d.length))&&(f=l,l=s,s=this,m=sl(l,Ue(l)));var b=!(Ae(f)&&"chain"in f)||!!f.chain,x=qn(s);return zt(m,function(T){var A=l[T];s[T]=A,x&&(s.prototype[T]=function(){var N=this.__chain__;if(b||N){var D=s(this.__wrapped__),B=D.__actions__=yt(this.__actions__);return B.push({func:A,args:arguments,thisArg:s}),D.__chain__=N,D}return A.apply(s,rr([this.value()],arguments))})}),s}function gS(){return oe._===this&&(oe._=V0),this}function Xu(){}function yS(s){return s=ee(s),re(function(l){return vh(l,s)})}var bS=Au(_e),wS=Au(qc),vS=Au(Za);function zd(s){return Lu(s)?eu(wn(s)):Y1(s)}function SS(s){return function(l){return s==null?t:Ur(s,l)}}var xS=Vh(),CS=Vh(!0);function Qu(){return[]}function Zu(){return!1}function TS(){return{}}function kS(){return""}function OS(){return!0}function _S(s,l){if(s=ee(s),s<1||s>hn)return[];var f=Lt,d=Ye(s,Lt);l=U(l),s-=Lt;for(var m=ru(d,l);++f<s;)l(f);return m}function AS(s){return Q(s)?_e(s,wn):_t(s)?[s]:yt(id(me(s)))}function MS(s){var l=++W0;return me(s)+l}var ES=cl(function(s,l){return s+l},0),IS=Mu("ceil"),NS=cl(function(s,l){return s/l},1),DS=Mu("floor");function RS(s){return s&&s.length?il(s,vt,pu):t}function LS(s,l){return s&&s.length?il(s,U(l,2),pu):t}function BS(s){return Uc(s,vt)}function PS(s,l){return Uc(s,U(l,2))}function zS(s){return s&&s.length?il(s,vt,bu):t}function FS(s,l){return s&&s.length?il(s,U(l,2),bu):t}var WS=cl(function(s,l){return s*l},1),qS=Mu("round"),VS=cl(function(s,l){return s-l},0);function HS(s){return s&&s.length?nu(s,vt):0}function US(s,l){return s&&s.length?nu(s,U(l,2)):0}return y.after=hw,y.ary=md,y.assign=Zw,y.assignIn=Md,y.assignInWith=Tl,y.assignWith=ev,y.at=tv,y.before=gd,y.bind=qu,y.bindAll=oS,y.bindKey=yd,y.castArray=Tw,y.chain=hd,y.chunk=Dy,y.compact=Ry,y.concat=Ly,y.cond=lS,y.conforms=aS,y.constant=Ku,y.countBy=Hb,y.create=nv,y.curry=bd,y.curryRight=wd,y.debounce=vd,y.defaults=rv,y.defaultsDeep=iv,y.defer=dw,y.delay=pw,y.difference=By,y.differenceBy=Py,y.differenceWith=zy,y.drop=Fy,y.dropRight=Wy,y.dropRightWhile=qy,y.dropWhile=Vy,y.fill=Hy,y.filter=$b,y.flatMap=Kb,y.flatMapDeep=jb,y.flatMapDepth=Yb,y.flatten=ad,y.flattenDeep=Uy,y.flattenDepth=$y,y.flip=mw,y.flow=fS,y.flowRight=cS,y.fromPairs=Gy,y.functions=cv,y.functionsIn=hv,y.groupBy=Xb,y.initial=Ky,y.intersection=jy,y.intersectionBy=Yy,y.intersectionWith=Xy,y.invert=pv,y.invertBy=mv,y.invokeMap=Zb,y.iteratee=ju,y.keyBy=ew,y.keys=Ue,y.keysIn=wt,y.map=bl,y.mapKeys=yv,y.mapValues=bv,y.matches=hS,y.matchesProperty=dS,y.memoize=vl,y.merge=wv,y.mergeWith=Ed,y.method=pS,y.methodOf=mS,y.mixin=Yu,y.negate=Sl,y.nthArg=yS,y.omit=vv,y.omitBy=Sv,y.once=gw,y.orderBy=tw,y.over=bS,y.overArgs=yw,y.overEvery=wS,y.overSome=vS,y.partial=Vu,y.partialRight=Sd,y.partition=nw,y.pick=xv,y.pickBy=Id,y.property=zd,y.propertyOf=SS,y.pull=tb,y.pullAll=fd,y.pullAllBy=nb,y.pullAllWith=rb,y.pullAt=ib,y.range=xS,y.rangeRight=CS,y.rearg=bw,y.reject=sw,y.remove=sb,y.rest=ww,y.reverse=Fu,y.sampleSize=lw,y.set=Tv,y.setWith=kv,y.shuffle=aw,y.slice=ob,y.sortBy=cw,y.sortedUniq=db,y.sortedUniqBy=pb,y.split=Kv,y.spread=vw,y.tail=mb,y.take=gb,y.takeRight=yb,y.takeRightWhile=bb,y.takeWhile=wb,y.tap=Rb,y.throttle=Sw,y.thru=yl,y.toArray=Od,y.toPairs=Nd,y.toPairsIn=Dd,y.toPath=AS,y.toPlainObject=Ad,y.transform=Ov,y.unary=xw,y.union=vb,y.unionBy=Sb,y.unionWith=xb,y.uniq=Cb,y.uniqBy=Tb,y.uniqWith=kb,y.unset=_v,y.unzip=Wu,y.unzipWith=cd,y.update=Av,y.updateWith=Mv,y.values=Li,y.valuesIn=Ev,y.without=Ob,y.words=Bd,y.wrap=Cw,y.xor=_b,y.xorBy=Ab,y.xorWith=Mb,y.zip=Eb,y.zipObject=Ib,y.zipObjectDeep=Nb,y.zipWith=Db,y.entries=Nd,y.entriesIn=Dd,y.extend=Md,y.extendWith=Tl,Yu(y,y),y.add=ES,y.attempt=Pd,y.camelCase=Rv,y.capitalize=Rd,y.ceil=IS,y.clamp=Iv,y.clone=kw,y.cloneDeep=_w,y.cloneDeepWith=Aw,y.cloneWith=Ow,y.conformsTo=Mw,y.deburr=Ld,y.defaultTo=uS,y.divide=NS,y.endsWith=Lv,y.eq=sn,y.escape=Bv,y.escapeRegExp=Pv,y.every=Ub,y.find=Gb,y.findIndex=od,y.findKey=sv,y.findLast=Jb,y.findLastIndex=ld,y.findLastKey=ov,y.floor=DS,y.forEach=dd,y.forEachRight=pd,y.forIn=lv,y.forInRight=av,y.forOwn=uv,y.forOwnRight=fv,y.get=$u,y.gt=Ew,y.gte=Iw,y.has=dv,y.hasIn=Gu,y.head=ud,y.identity=vt,y.includes=Qb,y.indexOf=Jy,y.inRange=Nv,y.invoke=gv,y.isArguments=Jr,y.isArray=Q,y.isArrayBuffer=Nw,y.isArrayLike=bt,y.isArrayLikeObject=Ne,y.isBoolean=Dw,y.isBuffer=fr,y.isDate=Rw,y.isElement=Lw,y.isEmpty=Bw,y.isEqual=Pw,y.isEqualWith=zw,y.isError=Hu,y.isFinite=Fw,y.isFunction=qn,y.isInteger=xd,y.isLength=xl,y.isMap=Cd,y.isMatch=Ww,y.isMatchWith=qw,y.isNaN=Vw,y.isNative=Hw,y.isNil=$w,y.isNull=Uw,y.isNumber=Td,y.isObject=Ae,y.isObjectLike=Me,y.isPlainObject=Es,y.isRegExp=Uu,y.isSafeInteger=Gw,y.isSet=kd,y.isString=Cl,y.isSymbol=_t,y.isTypedArray=Ri,y.isUndefined=Jw,y.isWeakMap=Kw,y.isWeakSet=jw,y.join=Qy,y.kebabCase=zv,y.last=Ht,y.lastIndexOf=Zy,y.lowerCase=Fv,y.lowerFirst=Wv,y.lt=Yw,y.lte=Xw,y.max=RS,y.maxBy=LS,y.mean=BS,y.meanBy=PS,y.min=zS,y.minBy=FS,y.stubArray=Qu,y.stubFalse=Zu,y.stubObject=TS,y.stubString=kS,y.stubTrue=OS,y.multiply=WS,y.nth=eb,y.noConflict=gS,y.noop=Xu,y.now=wl,y.pad=qv,y.padEnd=Vv,y.padStart=Hv,y.parseInt=Uv,y.random=Dv,y.reduce=rw,y.reduceRight=iw,y.repeat=$v,y.replace=Gv,y.result=Cv,y.round=qS,y.runInContext=O,y.sample=ow,y.size=uw,y.snakeCase=Jv,y.some=fw,y.sortedIndex=lb,y.sortedIndexBy=ab,y.sortedIndexOf=ub,y.sortedLastIndex=fb,y.sortedLastIndexBy=cb,y.sortedLastIndexOf=hb,y.startCase=jv,y.startsWith=Yv,y.subtract=VS,y.sum=HS,y.sumBy=US,y.template=Xv,y.times=_S,y.toFinite=Vn,y.toInteger=ee,y.toLength=_d,y.toLower=Qv,y.toNumber=Ut,y.toSafeInteger=Qw,y.toString=me,y.toUpper=Zv,y.trim=eS,y.trimEnd=tS,y.trimStart=nS,y.truncate=rS,y.unescape=iS,y.uniqueId=MS,y.upperCase=sS,y.upperFirst=Ju,y.each=dd,y.eachRight=pd,y.first=ud,Yu(y,function(){var s={};return yn(y,function(l,f){ye.call(y.prototype,f)||(s[f]=l)}),s}(),{chain:!1}),y.VERSION=r,zt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){y[s].placeholder=y}),zt(["drop","take"],function(s,l){se.prototype[s]=function(f){f=f===t?1:We(ee(f),0);var d=this.__filtered__&&!l?new se(this):this.clone();return d.__filtered__?d.__takeCount__=Ye(f,d.__takeCount__):d.__views__.push({size:Ye(f,Lt),type:s+(d.__dir__<0?"Right":"")}),d},se.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),zt(["filter","map","takeWhile"],function(s,l){var f=l+1,d=f==po||f==pa;se.prototype[s]=function(m){var b=this.clone();return b.__iteratees__.push({iteratee:U(m,3),type:f}),b.__filtered__=b.__filtered__||d,b}}),zt(["head","last"],function(s,l){var f="take"+(l?"Right":"");se.prototype[s]=function(){return this[f](1).value()[0]}}),zt(["initial","tail"],function(s,l){var f="drop"+(l?"":"Right");se.prototype[s]=function(){return this.__filtered__?new se(this):this[f](1)}}),se.prototype.compact=function(){return this.filter(vt)},se.prototype.find=function(s){return this.filter(s).head()},se.prototype.findLast=function(s){return this.reverse().find(s)},se.prototype.invokeMap=re(function(s,l){return typeof s=="function"?new se(this):this.map(function(f){return Ts(f,s,l)})}),se.prototype.reject=function(s){return this.filter(Sl(U(s)))},se.prototype.slice=function(s,l){s=ee(s);var f=this;return f.__filtered__&&(s>0||l<0)?new se(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),l!==t&&(l=ee(l),f=l<0?f.dropRight(-l):f.take(l-s)),f)},se.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},se.prototype.toArray=function(){return this.take(Lt)},yn(se.prototype,function(s,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),d=/^(?:head|last)$/.test(l),m=y[d?"take"+(l=="last"?"Right":""):l],b=d||/^find/.test(l);m&&(y.prototype[l]=function(){var x=this.__wrapped__,T=d?[1]:arguments,A=x instanceof se,N=T[0],D=A||Q(x),B=function(ie){var le=m.apply(y,rr([ie],T));return d&&F?le[0]:le};D&&f&&typeof N=="function"&&N.length!=1&&(A=D=!1);var F=this.__chain__,H=!!this.__actions__.length,$=b&&!F,te=A&&!H;if(!b&&D){x=te?x:new se(this);var G=s.apply(x,T);return G.__actions__.push({func:yl,args:[B],thisArg:t}),new Wt(G,F)}return $&&te?s.apply(this,T):(G=this.thru(B),$?d?G.value()[0]:G.value():G)})}),zt(["pop","push","shift","sort","splice","unshift"],function(s){var l=Ho[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",d=/^(?:pop|shift)$/.test(s);y.prototype[s]=function(){var m=arguments;if(d&&!this.__chain__){var b=this.value();return l.apply(Q(b)?b:[],m)}return this[f](function(x){return l.apply(Q(x)?x:[],m)})}}),yn(se.prototype,function(s,l){var f=y[l];if(f){var d=f.name+"";ye.call(Mi,d)||(Mi[d]=[]),Mi[d].push({name:l,func:f})}}),Mi[fl(t,z).name]=[{name:"wrapper",func:t}],se.prototype.clone=i1,se.prototype.reverse=s1,se.prototype.value=o1,y.prototype.at=Lb,y.prototype.chain=Bb,y.prototype.commit=Pb,y.prototype.next=zb,y.prototype.plant=Wb,y.prototype.reverse=qb,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=Vb,y.prototype.first=y.prototype.head,ys&&(y.prototype[ys]=Fb),y},Oi=P0();Ie?((Ie.exports=Oi)._=Oi,xe._=Oi):oe._=Oi}).call(Re)})(Pl,Pl.exports);var GS=Pl.exports;const JS=$S(GS);function im(n,e){return function(){return n.apply(e,arguments)}}const{toString:KS}=Object.prototype,{getPrototypeOf:ac}=Object,ea=(n=>e=>{const t=KS.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),An=n=>(n=n.toLowerCase(),e=>ea(e)===n),ta=n=>e=>typeof e===n,{isArray:Zi}=Array,Ys=ta("undefined");function jS(n){return n!==null&&!Ys(n)&&n.constructor!==null&&!Ys(n.constructor)&&Yt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const sm=An("ArrayBuffer");function YS(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&sm(n.buffer),e}const XS=ta("string"),Yt=ta("function"),om=ta("number"),na=n=>n!==null&&typeof n=="object",QS=n=>n===!0||n===!1,Nl=n=>{if(ea(n)!=="object")return!1;const e=ac(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ZS=An("Date"),ex=An("File"),tx=An("Blob"),nx=An("FileList"),rx=n=>na(n)&&Yt(n.pipe),ix=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Yt(n.append)&&((e=ea(n))==="formdata"||e==="object"&&Yt(n.toString)&&n.toString()==="[object FormData]"))},sx=An("URLSearchParams"),ox=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function so(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Zi(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const o=t?Object.getOwnPropertyNames(n):Object.keys(n),a=o.length;let u;for(r=0;r<a;r++)u=o[r],e.call(null,n[u],u,n)}}function lm(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const am=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),um=n=>!Ys(n)&&n!==am;function Mf(){const{caseless:n}=um(this)&&this||{},e={},t=(r,i)=>{const o=n&&lm(e,i)||i;Nl(e[o])&&Nl(r)?e[o]=Mf(e[o],r):Nl(r)?e[o]=Mf({},r):Zi(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&so(arguments[r],t);return e}const lx=(n,e,t,{allOwnKeys:r}={})=>(so(e,(i,o)=>{t&&Yt(i)?n[o]=im(i,t):n[o]=i},{allOwnKeys:r}),n),ax=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),ux=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},fx=(n,e,t,r)=>{let i,o,a;const u={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),o=i.length;o-- >0;)a=i[o],(!r||r(a,n,e))&&!u[a]&&(e[a]=n[a],u[a]=!0);n=t!==!1&&ac(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},cx=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},hx=n=>{if(!n)return null;if(Zi(n))return n;let e=n.length;if(!om(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},dx=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&ac(Uint8Array)),px=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(n,o[0],o[1])}},mx=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},gx=An("HTMLFormElement"),yx=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),Wd=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),bx=An("RegExp"),fm=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};so(t,(i,o)=>{let a;(a=e(i,o,n))!==!1&&(r[o]=a||i)}),Object.defineProperties(n,r)},wx=n=>{fm(n,(e,t)=>{if(Yt(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Yt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},vx=(n,e)=>{const t={},r=i=>{i.forEach(o=>{t[o]=!0})};return Zi(n)?r(n):r(String(n).split(e)),t},Sx=()=>{},xx=(n,e)=>(n=+n,Number.isFinite(n)?n:e),ef="abcdefghijklmnopqrstuvwxyz",qd="0123456789",cm={DIGIT:qd,ALPHA:ef,ALPHA_DIGIT:ef+ef.toUpperCase()+qd},Cx=(n=16,e=cm.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function Tx(n){return!!(n&&Yt(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const kx=n=>{const e=new Array(10),t=(r,i)=>{if(na(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const o=Zi(r)?[]:{};return so(r,(a,u)=>{const c=t(a,i+1);!Ys(c)&&(o[u]=c)}),e[i]=void 0,o}}return r};return t(n,0)},Ox=An("AsyncFunction"),_x=n=>n&&(na(n)||Yt(n))&&Yt(n.then)&&Yt(n.catch),R={isArray:Zi,isArrayBuffer:sm,isBuffer:jS,isFormData:ix,isArrayBufferView:YS,isString:XS,isNumber:om,isBoolean:QS,isObject:na,isPlainObject:Nl,isUndefined:Ys,isDate:ZS,isFile:ex,isBlob:tx,isRegExp:bx,isFunction:Yt,isStream:rx,isURLSearchParams:sx,isTypedArray:dx,isFileList:nx,forEach:so,merge:Mf,extend:lx,trim:ox,stripBOM:ax,inherits:ux,toFlatObject:fx,kindOf:ea,kindOfTest:An,endsWith:cx,toArray:hx,forEachEntry:px,matchAll:mx,isHTMLForm:gx,hasOwnProperty:Wd,hasOwnProp:Wd,reduceDescriptors:fm,freezeMethods:wx,toObjectSet:vx,toCamelCase:yx,noop:Sx,toFiniteNumber:xx,findKey:lm,global:am,isContextDefined:um,ALPHABET:cm,generateString:Cx,isSpecCompliantForm:Tx,toJSONObject:kx,isAsyncFn:Ox,isThenable:_x};function ue(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}R.inherits(ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const hm=ue.prototype,dm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{dm[n]={value:n}});Object.defineProperties(ue,dm);Object.defineProperty(hm,"isAxiosError",{value:!0});ue.from=(n,e,t,r,i,o)=>{const a=Object.create(hm);return R.toFlatObject(n,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),ue.call(a,n.message,e,t,r,i),a.cause=n,a.name=n.name,o&&Object.assign(a,o),a};const Ax=null;function Ef(n){return R.isPlainObject(n)||R.isArray(n)}function pm(n){return R.endsWith(n,"[]")?n.slice(0,-2):n}function Vd(n,e,t){return n?n.concat(e).map(function(i,o){return i=pm(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function Mx(n){return R.isArray(n)&&!n.some(Ef)}const Ex=R.toFlatObject(R,{},null,function(e){return/^is[A-Z]/.test(e)});function ra(n,e,t){if(!R.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=R.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,M){return!R.isUndefined(M[k])});const r=t.metaTokens,i=t.visitor||p,o=t.dots,a=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(e);if(!R.isFunction(i))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(R.isDate(v))return v.toISOString();if(!c&&R.isBlob(v))throw new ue("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(v)||R.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,k,M){let z=v;if(v&&!M&&typeof v=="object"){if(R.endsWith(k,"{}"))k=r?k:k.slice(0,-2),v=JSON.stringify(v);else if(R.isArray(v)&&Mx(v)||(R.isFileList(v)||R.endsWith(k,"[]"))&&(z=R.toArray(v)))return k=pm(k),z.forEach(function(j,ge){!(R.isUndefined(j)||j===null)&&e.append(a===!0?Vd([k],ge,o):a===null?k:k+"[]",h(j))}),!1}return Ef(v)?!0:(e.append(Vd(M,k,o),h(v)),!1)}const g=[],w=Object.assign(Ex,{defaultVisitor:p,convertValue:h,isVisitable:Ef});function C(v,k){if(!R.isUndefined(v)){if(g.indexOf(v)!==-1)throw Error("Circular reference detected in "+k.join("."));g.push(v),R.forEach(v,function(z,K){(!(R.isUndefined(z)||z===null)&&i.call(e,z,R.isString(K)?K.trim():K,k,w))===!0&&C(z,k?k.concat(K):[K])}),g.pop()}}if(!R.isObject(n))throw new TypeError("data must be an object");return C(n),e}function Hd(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function uc(n,e){this._pairs=[],n&&ra(n,this,e)}const mm=uc.prototype;mm.append=function(e,t){this._pairs.push([e,t])};mm.toString=function(e){const t=e?function(r){return e.call(this,r,Hd)}:Hd;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Ix(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gm(n,e,t){if(!e)return n;const r=t&&t.encode||Ix,i=t&&t.serialize;let o;if(i?o=i(e,t):o=R.isURLSearchParams(e)?e.toString():new uc(e,t).toString(r),o){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class Nx{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Ud=Nx,ym={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dx=typeof URLSearchParams<"u"?URLSearchParams:uc,Rx=typeof FormData<"u"?FormData:null,Lx=typeof Blob<"u"?Blob:null,Bx={isBrowser:!0,classes:{URLSearchParams:Dx,FormData:Rx,Blob:Lx},protocols:["http","https","file","blob","url","data"]},bm=typeof window<"u"&&typeof document<"u",Px=(n=>bm&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),zx=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Fx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bm,hasStandardBrowserEnv:Px,hasStandardBrowserWebWorkerEnv:zx},Symbol.toStringTag,{value:"Module"})),Cn={...Fx,...Bx};function Wx(n,e){return ra(n,new Cn.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,o){return Cn.isNode&&R.isBuffer(t)?(this.append(r,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function qx(n){return R.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Vx(n){const e={},t=Object.keys(n);let r;const i=t.length;let o;for(r=0;r<i;r++)o=t[r],e[o]=n[o];return e}function wm(n){function e(t,r,i,o){let a=t[o++];const u=Number.isFinite(+a),c=o>=t.length;return a=!a&&R.isArray(i)?i.length:a,c?(R.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!u):((!i[a]||!R.isObject(i[a]))&&(i[a]=[]),e(t,r,i[a],o)&&R.isArray(i[a])&&(i[a]=Vx(i[a])),!u)}if(R.isFormData(n)&&R.isFunction(n.entries)){const t={};return R.forEachEntry(n,(r,i)=>{e(qx(r),i,t,0)}),t}return null}function Hx(n,e,t){if(R.isString(n))try{return(e||JSON.parse)(n),R.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const fc={transitional:ym,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=R.isObject(e);if(o&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return i&&i?JSON.stringify(wm(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Wx(e,this.formSerializer).toString();if((u=R.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ra(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),Hx(e)):e}],transformResponse:[function(e){const t=this.transitional||fc.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(e&&R.isString(e)&&(r&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?ue.from(u,ue.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Cn.classes.FormData,Blob:Cn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],n=>{fc.headers[n]={}});const cc=fc,Ux=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$x=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!t||e[t]&&Ux[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},$d=Symbol("internals");function Is(n){return n&&String(n).trim().toLowerCase()}function Dl(n){return n===!1||n==null?n:R.isArray(n)?n.map(Dl):String(n)}function Gx(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const Jx=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function tf(n,e,t,r,i){if(R.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!R.isString(e)){if(R.isString(r))return e.indexOf(r)!==-1;if(R.isRegExp(r))return r.test(e)}}function Kx(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function jx(n,e){const t=R.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,o,a){return this[r].call(this,e,i,o,a)},configurable:!0})})}class ia{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function o(u,c,h){const p=Is(c);if(!p)throw new Error("header name must be a non-empty string");const g=R.findKey(i,p);(!g||i[g]===void 0||h===!0||h===void 0&&i[g]!==!1)&&(i[g||c]=Dl(u))}const a=(u,c)=>R.forEach(u,(h,p)=>o(h,p,c));return R.isPlainObject(e)||e instanceof this.constructor?a(e,t):R.isString(e)&&(e=e.trim())&&!Jx(e)?a($x(e),t):e!=null&&o(t,e,r),this}get(e,t){if(e=Is(e),e){const r=R.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return Gx(i);if(R.isFunction(t))return t.call(this,i,r);if(R.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Is(e),e){const r=R.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||tf(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function o(a){if(a=Is(a),a){const u=R.findKey(r,a);u&&(!t||tf(r,r[u],u,t))&&(delete r[u],i=!0)}}return R.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const o=t[r];(!e||tf(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,r={};return R.forEach(this,(i,o)=>{const a=R.findKey(r,o);if(a){t[a]=Dl(i),delete t[o];return}const u=e?Kx(o):String(o).trim();u!==o&&delete t[o],t[u]=Dl(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return R.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&R.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[$d]=this[$d]={accessors:{}}).accessors,i=this.prototype;function o(a){const u=Is(a);r[u]||(jx(i,a),r[u]=!0)}return R.isArray(e)?e.forEach(o):o(e),this}}ia.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(ia.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});R.freezeMethods(ia);const Kn=ia;function nf(n,e){const t=this||cc,r=e||t,i=Kn.from(r.headers);let o=r.data;return R.forEach(n,function(u){o=u.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function vm(n){return!!(n&&n.__CANCEL__)}function oo(n,e,t){ue.call(this,n??"canceled",ue.ERR_CANCELED,e,t),this.name="CanceledError"}R.inherits(oo,ue,{__CANCEL__:!0});function Yx(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new ue("Request failed with status code "+t.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const Xx=Cn.hasStandardBrowserEnv?{write(n,e,t,r,i,o){const a=[n+"="+encodeURIComponent(e)];R.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),R.isString(r)&&a.push("path="+r),R.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qx(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Zx(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function Sm(n,e){return n&&!Qx(e)?Zx(n,e):e}const eC=Cn.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function i(o){let a=o;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(a){const u=R.isString(a)?i(a):a;return u.protocol===r.protocol&&u.host===r.host}}():function(){return function(){return!0}}();function tC(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function nC(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),p=r[o];a||(a=h),t[i]=c,r[i]=h;let g=o,w=0;for(;g!==i;)w+=t[g++],g=g%n;if(i=(i+1)%n,i===o&&(o=(o+1)%n),h-a<e)return;const C=p&&h-p;return C?Math.round(w*1e3/C):void 0}}function Gd(n,e){let t=0;const r=nC(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,u=o-t,c=r(u),h=o<=a;t=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:i};p[e?"download":"upload"]=!0,n(p)}}const rC=typeof XMLHttpRequest<"u",iC=rC&&function(n){return new Promise(function(t,r){let i=n.data;const o=Kn.from(n.headers).normalize();let{responseType:a,withXSRFToken:u}=n,c;function h(){n.cancelToken&&n.cancelToken.unsubscribe(c),n.signal&&n.signal.removeEventListener("abort",c)}let p;if(R.isFormData(i)){if(Cn.hasStandardBrowserEnv||Cn.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((p=o.getContentType())!==!1){const[k,...M]=p?p.split(";").map(z=>z.trim()).filter(Boolean):[];o.setContentType([k||"multipart/form-data",...M].join("; "))}}let g=new XMLHttpRequest;if(n.auth){const k=n.auth.username||"",M=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";o.set("Authorization","Basic "+btoa(k+":"+M))}const w=Sm(n.baseURL,n.url);g.open(n.method.toUpperCase(),gm(w,n.params,n.paramsSerializer),!0),g.timeout=n.timeout;function C(){if(!g)return;const k=Kn.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),z={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:k,config:n,request:g};Yx(function(j){t(j),h()},function(j){r(j),h()},z),g=null}if("onloadend"in g?g.onloadend=C:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(C)},g.onabort=function(){g&&(r(new ue("Request aborted",ue.ECONNABORTED,n,g)),g=null)},g.onerror=function(){r(new ue("Network Error",ue.ERR_NETWORK,n,g)),g=null},g.ontimeout=function(){let M=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const z=n.transitional||ym;n.timeoutErrorMessage&&(M=n.timeoutErrorMessage),r(new ue(M,z.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,n,g)),g=null},Cn.hasStandardBrowserEnv&&(u&&R.isFunction(u)&&(u=u(n)),u||u!==!1&&eC(w))){const k=n.xsrfHeaderName&&n.xsrfCookieName&&Xx.read(n.xsrfCookieName);k&&o.set(n.xsrfHeaderName,k)}i===void 0&&o.setContentType(null),"setRequestHeader"in g&&R.forEach(o.toJSON(),function(M,z){g.setRequestHeader(z,M)}),R.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),a&&a!=="json"&&(g.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&g.addEventListener("progress",Gd(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&g.upload&&g.upload.addEventListener("progress",Gd(n.onUploadProgress)),(n.cancelToken||n.signal)&&(c=k=>{g&&(r(!k||k.type?new oo(null,n,g):k),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(c),n.signal&&(n.signal.aborted?c():n.signal.addEventListener("abort",c)));const v=tC(w);if(v&&Cn.protocols.indexOf(v)===-1){r(new ue("Unsupported protocol "+v+":",ue.ERR_BAD_REQUEST,n));return}g.send(i||null)})},If={http:Ax,xhr:iC};R.forEach(If,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Jd=n=>`- ${n}`,sC=n=>R.isFunction(n)||n===null||n===!1,xm={getAdapter:n=>{n=R.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let o=0;o<e;o++){t=n[o];let a;if(r=t,!sC(t)&&(r=If[(a=String(t)).toLowerCase()],r===void 0))throw new ue(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+o]=r}if(!r){const o=Object.entries(i).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Jd).join(`
`):" "+Jd(o[0]):"as no adapter specified";throw new ue("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:If};function rf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new oo(null,n)}function Kd(n){return rf(n),n.headers=Kn.from(n.headers),n.data=nf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),xm.getAdapter(n.adapter||cc.adapter)(n).then(function(r){return rf(n),r.data=nf.call(n,n.transformResponse,r),r.headers=Kn.from(r.headers),r},function(r){return vm(r)||(rf(n),r&&r.response&&(r.response.data=nf.call(n,n.transformResponse,r.response),r.response.headers=Kn.from(r.response.headers))),Promise.reject(r)})}const jd=n=>n instanceof Kn?n.toJSON():n;function $i(n,e){e=e||{};const t={};function r(h,p,g){return R.isPlainObject(h)&&R.isPlainObject(p)?R.merge.call({caseless:g},h,p):R.isPlainObject(p)?R.merge({},p):R.isArray(p)?p.slice():p}function i(h,p,g){if(R.isUndefined(p)){if(!R.isUndefined(h))return r(void 0,h,g)}else return r(h,p,g)}function o(h,p){if(!R.isUndefined(p))return r(void 0,p)}function a(h,p){if(R.isUndefined(p)){if(!R.isUndefined(h))return r(void 0,h)}else return r(void 0,p)}function u(h,p,g){if(g in e)return r(h,p);if(g in n)return r(void 0,h)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(h,p)=>i(jd(h),jd(p),!0)};return R.forEach(Object.keys(Object.assign({},n,e)),function(p){const g=c[p]||i,w=g(n[p],e[p],p);R.isUndefined(w)&&g!==u||(t[p]=w)}),t}const Cm="1.6.2",hc={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{hc[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Yd={};hc.transitional=function(e,t,r){function i(o,a){return"[Axios v"+Cm+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,u)=>{if(e===!1)throw new ue(i(a," has been removed"+(t?" in "+t:"")),ue.ERR_DEPRECATED);return t&&!Yd[a]&&(Yd[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,u):!0}};function oC(n,e,t){if(typeof n!="object")throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const u=n[o],c=u===void 0||a(u,o,n);if(c!==!0)throw new ue("option "+o+" must be "+c,ue.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ue("Unknown option "+o,ue.ERR_BAD_OPTION)}}const Nf={assertOptions:oC,validators:hc},cr=Nf.validators;class zl{constructor(e){this.defaults=e,this.interceptors={request:new Ud,response:new Ud}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=$i(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:o}=t;r!==void 0&&Nf.assertOptions(r,{silentJSONParsing:cr.transitional(cr.boolean),forcedJSONParsing:cr.transitional(cr.boolean),clarifyTimeoutError:cr.transitional(cr.boolean)},!1),i!=null&&(R.isFunction(i)?t.paramsSerializer={serialize:i}:Nf.assertOptions(i,{encode:cr.function,serialize:cr.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&R.merge(o.common,o[t.method]);o&&R.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),t.headers=Kn.concat(a,o);const u=[];let c=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(c=c&&k.synchronous,u.unshift(k.fulfilled,k.rejected))});const h=[];this.interceptors.response.forEach(function(k){h.push(k.fulfilled,k.rejected)});let p,g=0,w;if(!c){const v=[Kd.bind(this),void 0];for(v.unshift.apply(v,u),v.push.apply(v,h),w=v.length,p=Promise.resolve(t);g<w;)p=p.then(v[g++],v[g++]);return p}w=u.length;let C=t;for(g=0;g<w;){const v=u[g++],k=u[g++];try{C=v(C)}catch(M){k.call(this,M);break}}try{p=Kd.call(this,C)}catch(v){return Promise.reject(v)}for(g=0,w=h.length;g<w;)p=p.then(h[g++],h[g++]);return p}getUri(e){e=$i(this.defaults,e);const t=Sm(e.baseURL,e.url);return gm(t,e.params,e.paramsSerializer)}}R.forEach(["delete","get","head","options"],function(e){zl.prototype[e]=function(t,r){return this.request($i(r||{},{method:e,url:t,data:(r||{}).data}))}});R.forEach(["post","put","patch"],function(e){function t(r){return function(o,a,u){return this.request($i(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}zl.prototype[e]=t(),zl.prototype[e+"Form"]=t(!0)});const Rl=zl;class dc{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(u=>{r.subscribe(u),o=u}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,u){r.reason||(r.reason=new oo(o,a,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new dc(function(i){e=i}),cancel:e}}}const lC=dc;function aC(n){return function(t){return n.apply(null,t)}}function uC(n){return R.isObject(n)&&n.isAxiosError===!0}const Df={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Df).forEach(([n,e])=>{Df[e]=n});const fC=Df;function Tm(n){const e=new Rl(n),t=im(Rl.prototype.request,e);return R.extend(t,Rl.prototype,e,{allOwnKeys:!0}),R.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Tm($i(n,i))},t}const ze=Tm(cc);ze.Axios=Rl;ze.CanceledError=oo;ze.CancelToken=lC;ze.isCancel=vm;ze.VERSION=Cm;ze.toFormData=ra;ze.AxiosError=ue;ze.Cancel=ze.CanceledError;ze.all=function(e){return Promise.all(e)};ze.spread=aC;ze.isAxiosError=uC;ze.mergeConfig=$i;ze.AxiosHeaders=Kn;ze.formToJSON=n=>wm(R.isHTMLForm(n)?new FormData(n):n);ze.getAdapter=xm.getAdapter;ze.HttpStatusCode=fC;ze.default=ze;const cC=ze;window._=JS;window.axios=cC;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function Je(n){this.content=n}Je.prototype={constructor:Je,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new Je(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Je(t)},addToStart:function(n,e){return new Je([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Je(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new Je(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Je.from(n),n.size?new Je(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Je.from(n),n.size?new Je(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Je.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Je.from=function(n){if(n instanceof Je)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Je(e)};function km(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)t++;return t}if(i.content.size||o.content.size){let a=km(i.content,o.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function Om(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let a=n.child(--i),u=e.child(--o),c=a.nodeSize;if(a==u){t-=c,r-=c;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let h=0,p=Math.min(a.text.length,u.text.length);for(;h<p&&a.text[a.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let h=Om(a.content,u.content,t-1,r-1);if(h)return h}t-=c,r-=c}}class P{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let a=0,u=0;u<t;a++){let c=this.content[a],h=u+c.nodeSize;if(h>e&&r(c,i+u,o||null,a)!==!1&&c.content.size){let p=u+1;c.nodesBetween(Math.max(0,e-p),Math.min(c.content.size,t-p),r,i+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",a=!0;return this.nodesBetween(e,t,(u,c)=>{u.isText?(o+=u.text.slice(Math.max(e,c)-c,t-c),a=!r):u.isLeaf?(i?o+=typeof i=="function"?i(u):i:u.type.spec.leafText&&(o+=u.type.spec.leafText(u)),a=!r):!a&&u.isBlock&&(o+=r,a=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new P(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,a=0;a<t;o++){let u=this.content[o],c=a+u.nodeSize;c>e&&((a<e||c>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=c}return new P(r,i)}cutByIndex(e,t){return e==t?P.empty:e==0&&t==this.content.length?this:new P(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new P(i,o)}addToStart(e){return new P([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new P(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return km(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Om(this,e,t,r)}findIndex(e,t=-1){if(e==0)return kl(0,e);if(e==this.size)return kl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),a=i+o.nodeSize;if(a>=e)return a==e||t>0?kl(r+1,a):kl(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return P.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new P(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return P.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new P(t||e,r)}static from(e){if(!e)return P.empty;if(e instanceof P)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new P([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}P.empty=new P([],0);const sf={index:0,offset:0};function kl(n,e){return sf.index=n,sf.offset=e,sf}function Fl(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Fl(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Fl(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class de{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Fl(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return de.none;if(e instanceof de)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}de.none=[];class Wl extends Error{}class W{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Am(this.content,e+this.openStart,t);return r&&new W(r,this.openStart,this.openEnd)}removeBetween(e,t){return new W(_m(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return W.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new W(P.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new W(e,r,i)}}W.empty=new W(P.empty,0,0);function _m(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||o.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(_m(o.content,e-i-1,t-i-1)))}function Am(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),a=n.maybeChild(i);if(o==e||a.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=Am(a.content,e-o-1,t);return u&&n.replaceChild(i,a.copy(u))}function hC(n,e,t){if(t.openStart>n.depth)throw new Wl("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Wl("Inconsistent open depths");return Mm(n,e,t,0)}function Mm(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=Mm(n,e,t,r+1);return o.copy(o.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return Zr(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=dC(t,n);return Zr(o,Im(n,a,u,e,r))}else return Zr(o,ql(n,e,r))}function Em(n,e){if(!e.type.compatibleContent(n.type))throw new Wl("Cannot join "+e.type.name+" onto "+n.type.name)}function Rf(n,e,t){let r=n.node(t);return Em(r,e.node(t)),r}function Qr(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Vs(n,e,t,r){let i=(e||n).node(t),o=0,a=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Qr(n.nodeAfter,r),o++));for(let u=o;u<a;u++)Qr(i.child(u),r);e&&e.depth==t&&e.textOffset&&Qr(e.nodeBefore,r)}function Zr(n,e){return n.type.checkContent(e),n.copy(e)}function Im(n,e,t,r,i){let o=n.depth>i&&Rf(n,e,i+1),a=r.depth>i&&Rf(t,r,i+1),u=[];return Vs(null,n,i,u),o&&a&&e.index(i)==t.index(i)?(Em(o,a),Qr(Zr(o,Im(n,e,t,r,i+1)),u)):(o&&Qr(Zr(o,ql(n,e,i+1)),u),Vs(e,t,i,u),a&&Qr(Zr(a,ql(t,r,i+1)),u)),Vs(r,null,i,u),new P(u)}function ql(n,e,t){let r=[];if(Vs(null,n,t,r),n.depth>t){let i=Rf(n,e,t+1);Qr(Zr(i,ql(n,e,t+1)),r)}return Vs(e,null,t,r),new P(r)}function dC(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(P.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Xs{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return de.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Vl(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let a=e;;){let{index:u,offset:c}=a.content.findIndex(o),h=o-c;if(r.push(a,u,i+c),!h||(a=a.child(u),a.isText))break;o=h-1,i+=c+1}return new Xs(t,r,o)}static resolveCached(e,t){for(let i=0;i<of.length;i++){let o=of[i];if(o.pos==t&&o.doc==e)return o}let r=of[lf]=Xs.resolve(e,t);return lf=(lf+1)%pC,r}}let of=[],lf=0,pC=12;class Vl{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const mC=Object.create(null);let ei=class Lf{constructor(e,t,r,i=de.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||P.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Fl(this.attrs,t||e.defaultAttrs||mC)&&de.sameSet(this.marks,r||de.none)}copy(e=null){return e==this.content?this:new Lf(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Lf(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return W.empty;let i=this.resolve(e),o=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),h=i.node(a).content.cut(i.pos-u,o.pos-u);return new W(h,i.depth-a,o.depth-a)}replace(e,t,r){return hC(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Xs.resolveCached(this,e)}resolveNoCache(e){return Xs.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Nm(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=P.empty,i=0,o=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,o),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let c=i;c<o;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),a=o&&o.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=de.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!de.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=P.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}};ei.prototype.text=void 0;class Hl extends ei{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Nm(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Hl(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Hl(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Nm(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class ri{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new gC(e,t);if(r.next==null)return ri.empty;let i=Dm(r);r.next&&r.err("Unexpected trailing text");let o=CC(xC(i));return TC(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(a,u){let c=a.matchFragment(e,r);if(c&&(!t||c.validEnd))return P.from(u.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:p,next:g}=a.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let w=o(g,u.concat(p));if(w)return w}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:u,next:c}=o.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||c.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return o}).join(`
`)}}ri.empty=new ri(!0);class gC{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Dm(n){let e=[];do e.push(yC(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function yC(n){let e=[];do e.push(bC(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function bC(n){let e=SC(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=wC(n,e);else break;return e}function Xd(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function wC(n,e){let t=Xd(n),r=t;return n.eat(",")&&(n.next!="}"?r=Xd(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function vC(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let a=t[o];a.groups.indexOf(e)>-1&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function SC(n){if(n.eat("(")){let e=Dm(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=vC(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function xC(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,c){let h={term:c,to:u};return e[a].push(h),h}function i(a,u){a.forEach(c=>c.to=u)}function o(a,u){if(a.type=="choice")return a.exprs.reduce((c,h)=>c.concat(o(h,u)),[]);if(a.type=="seq")for(let c=0;;c++){let h=o(a.exprs[c],u);if(c==a.exprs.length-1)return h;i(h,u=t())}else if(a.type=="star"){let c=t();return r(u,c),i(o(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=t();return i(o(a.expr,u),c),i(o(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(u)].concat(o(a.expr,u));if(a.type=="range"){let c=u;for(let h=0;h<a.min;h++){let p=t();i(o(a.expr,c),p),c=p}if(a.max==-1)i(o(a.expr,c),c);else for(let h=a.min;h<a.max;h++){let p=t();r(c,p),i(o(a.expr,c),p),c=p}return[r(c)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function Rm(n,e){return e-n}function Qd(n,e){let t=[];return r(e),t.sort(Rm);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let a=0;a<o.length;a++){let{term:u,to:c}=o[a];!u&&t.indexOf(c)==-1&&r(c)}}}function CC(n){let e=Object.create(null);return t(Qd(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:c})=>{if(!u)return;let h;for(let p=0;p<i.length;p++)i[p][0]==u&&(h=i[p][1]);Qd(n,c).forEach(p=>{h||i.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new ri(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(Rm);o.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return o}}function TC(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:c,next:h}=i.next[u];a.push(c.name),o&&!(c.isText||c.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Lm(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Bm(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function Pm(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new kC(n[t]);return e}let Zd=class zm{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Pm(r.attrs),this.defaultAttrs=Lm(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ri.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Bm(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ei(this,this.computeAttrs(e),P.from(t),de.setFrom(r))}createChecked(e=null,t,r){return t=P.from(t),this.checkContent(t),new ei(this,this.computeAttrs(e),t,de.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=P.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(P.empty,!0);return o?new ei(this,e,t.append(o),de.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:de.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,a)=>r[o]=new zm(o,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class kC{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class sa{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Pm(i.attrs),this.excluded=null;let o=Lm(this.attrs);this.instance=o?new de(this,o):null}create(e=null){return!e&&this.instance?this.instance:new de(this,Bm(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,a)=>r[o]=new sa(o,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class Fm{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Je.from(e.nodes),t.marks=Je.from(e.marks||{}),this.nodes=Zd.compile(this.spec.nodes,this),this.marks=sa.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],a=o.spec.content||"",u=o.spec.marks;o.contentMatch=r[a]||(r[a]=ri.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet=u=="_"?null:u?ep(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:ep(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Zd){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Hl(r,r.defaultAttrs,e,de.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ei.fromJSON(this,e)}markFromJSON(e){return de.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ep(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],a=o;if(o)t.push(o);else for(let u in n.marks){let c=n.marks[u];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}class Gi{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new np(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new np(this,t,!0);return r.addAll(e,t.from,t.to),W.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(AC(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<o)break}t.splice(a,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=rp(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=rp(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Gi(e,Gi.schemaRules(e)))}}const Wm={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},OC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},qm={ol:!0,ul:!0},Ul=1,$l=2,Hs=4;function tp(n,e,t){return e!=null?(e?Ul:0)|(e==="full"?$l:0):n&&n.whitespace=="pre"?Ul|$l:t&~Hs}class Ol{constructor(e,t,r,i,o,a,u){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=u,this.content=[],this.activeMarks=de.none,this.stashMarks=[],this.match=a||(u&Hs?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(P.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ul)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=P.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(P.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):EC(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Wm.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class np{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,o,a=tp(null,t.preserveWhitespace,0)|(r?Hs:0);i?o=new Ol(i.type,i.attrs,de.none,de.none,!0,t.topMatch||i.type.contentMatch,a):r?o=new Ol(null,null,de.none,de.none,!0,null,a):o=new Ol(e.schema.topNodeType,null,de.none,de.none,!0,null,a),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let i=this.readStyles(MC(r));if(!i)return;let[o,a]=i,u=this.top;for(let c=0;c<a.length;c++)this.removePendingMark(a[c],u);for(let c=0;c<o.length;c++)this.addPendingMark(o[c]);t();for(let c=0;c<o.length;c++)this.removePendingMark(o[c],u);for(let c=0;c<a.length;c++)this.addPendingMark(a[c])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&$l||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&Ul)r.options&$l?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;qm.hasOwnProperty(r)&&this.parser.normalizeLists&&_C(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(o?o.ignore:OC.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let a,u=this.top,c=this.needsBlock;if(Wm.hasOwnProperty(r))u.content.length&&u.content[0].isInline&&this.open&&(this.open--,u=this.top),a=!0,u.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),a&&this.sync(u),this.needsBlock=c}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=de.none,r=de.none;for(let i=0;i<e.length;i+=2)for(let o=void 0;;){let a=this.parser.matchStyle(e[i],e[i+1],this,o);if(!a)break;if(a.ignore)return null;if(a.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(u=>{a.clearMark(u)&&(r=u.addToSet(r))}):t=this.parser.schema.marks[a.mark].create(a.attrs).addToSet(t),a.consuming===!1)o=a;else break}return[t,r]}addElementByRule(e,t,r){let i,o,a;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):i=this.enter(o,t.attrs||null,t.preserveWhitespace)):(a=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(a));let u=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c)}i&&this.sync(u)&&this.open--,a&&this.removePendingMark(a,u)}addAll(e,t,r){let i=t||0;for(let o=t?e.childNodes[t]:e.firstChild,a=r==null?null:e.childNodes[r];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],a=o.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,r=o,!a.length)||o.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let a=tp(e,i,o.options);o.options&Hs&&o.content.length==0&&(a|=Hs),this.nodes.push(new Ol(e,t,o.activeMarks,o.pendingMarks,r,null,a)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(u,c)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;c>=o;c--)if(a(u-1,c))return!0;return!1}else{let p=c>0||c==0&&i?this.nodes[c].type:r&&c>=o?r.node(c-o).type:null;if(!p||p.name!=h&&p.groups.indexOf(h)==-1)return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=IC(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let a=i.popFromStashMark(e);a&&i.type&&i.type.allowsMarkType(a.type)&&(i.activeMarks=a.addToSet(i.activeMarks))}if(i==t)break}}}function _C(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&qm.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function AC(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function MC(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function rp(n){let e={};for(let t in n)e[t]=n[t];return e}function EC(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],a=u=>{o.push(u);for(let c=0;c<u.edgeCount;c++){let{type:h,next:p}=u.edge(c);if(h==e||o.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}function IC(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class Tn{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=af(t).createDocumentFragment());let i=r,o=[];return e.forEach(a=>{if(o.length||a.marks.length){let u=0,c=0;for(;u<o.length&&c<a.marks.length;){let h=a.marks[c];if(!this.marks[h.type.name]){c++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,c++}for(;u<o.length;)i=o.pop()[1];for(;c<a.marks.length;){let h=a.marks[c++],p=this.serializeMark(h,a.isInline,t);p&&(o.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Tn.renderSpec(af(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Tn.renderSpec(af(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let a,u=r?e.createElementNS(r,i):e.createElement(i),c=t[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let p in c)if(c[p]!=null){let g=p.indexOf(" ");g>0?u.setAttributeNS(p.slice(0,g),p.slice(g+1),c[p]):u.setAttribute(p,c[p])}}for(let p=h;p<t.length;p++){let g=t[p];if(g===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:w,contentDOM:C}=Tn.renderSpec(e,g,r);if(u.appendChild(w),C){if(a)throw new RangeError("Multiple content holes");a=C}}}return{dom:u,contentDOM:a}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Tn(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ip(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return ip(e.marks)}}function ip(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function af(n){return n.document||window.document}const Vm=65535,Hm=Math.pow(2,16);function NC(n,e){return n+e*Hm}function sp(n){return n&Vm}function DC(n){return(n-(n&Vm))/Hm}const Um=1,$m=2,Ll=4,Gm=8;class Bf{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Gm)>0}get deletedBefore(){return(this.delInfo&(Um|Ll))>0}get deletedAfter(){return(this.delInfo&($m|Ll))>0}get deletedAcross(){return(this.delInfo&Ll)>0}}class Nt{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Nt.empty)return Nt.empty}recover(e){let t=0,r=sp(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+DC(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?i:0);if(c>e)break;let h=this.ranges[u+o],p=this.ranges[u+a],g=c+h;if(e<=g){let w=h?e==c?-1:e==g?1:t:t,C=c+i+(w<0?0:p);if(r)return C;let v=e==(t<0?c:g)?null:NC(u/3,e-c),k=e==c?$m:e==g?Um:Ll;return(t<0?e!=c:e!=g)&&(k|=Gm),new Bf(C,k,v)}i+=p-h}return r?e+i:new Bf(e+i,0,null)}touches(e,t){let r=0,i=sp(t),o=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?r:0);if(c>e)break;let h=this.ranges[u+o],p=c+h;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+a]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?o:0),c=a+(this.inverted?0:o),h=this.ranges[i+t],p=this.ranges[i+r];e(u,u+h,c,c+p),o+=p-h}}invert(){return new Nt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Nt.empty:new Nt(e<0?[0,-e,0]:[0,0,e])}}Nt.empty=new Nt([]);class qi{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new qi(this.maps,this.mirror,e,t)}copy(){return new qi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new qi;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this.maps[o],u=a.mapResult(e,t);if(u.recover!=null){let c=this.getMirror(o);if(c!=null&&c>o&&c<this.to){o=c,e=this.maps[c].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new Bf(e,i,null)}}const uf=Object.create(null);class tt{getMap(){return Nt.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=uf[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in uf)throw new RangeError("Duplicate use of step JSON ID "+e);return uf[e]=t,t.prototype.jsonID=e,t}}class Pe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Pe(e,null)}static fail(e){return new Pe(null,e)}static fromReplace(e,t,r,i){try{return Pe.ok(e.replace(t,r,i))}catch(o){if(o instanceof Wl)return Pe.fail(o.message);throw o}}}function pc(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(pc(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return P.fromArray(r)}class gr extends tt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new W(pc(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return Pe.fromReplace(e,this.from,this.to,o)}invert(){return new kn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new gr(t.pos,r.pos,this.mark)}merge(e){return e instanceof gr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new gr(t.from,t.to,e.markFromJSON(t.mark))}}tt.jsonID("addMark",gr);class kn extends tt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new W(pc(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Pe.fromReplace(e,this.from,this.to,r)}invert(){return new gr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new kn(t.pos,r.pos,this.mark)}merge(e){return e instanceof kn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new kn(t.from,t.to,e.markFromJSON(t.mark))}}tt.jsonID("removeMark",kn);class yr extends tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Pe.fromReplace(e,this.pos,this.pos+1,new W(P.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new yr(this.pos,t.marks[i]);return new yr(this.pos,this.mark)}}return new Ji(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new yr(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new yr(t.pos,e.markFromJSON(t.mark))}}tt.jsonID("addNodeMark",yr);class Ji extends tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Pe.fromReplace(e,this.pos,this.pos+1,new W(P.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new yr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ji(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ji(t.pos,e.markFromJSON(t.mark))}}tt.jsonID("removeNodeMark",Ji);class Ze extends tt{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Pf(e,this.from,this.to)?Pe.fail("Structure replace would overwrite content"):Pe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Nt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ze(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Ze(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ze)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?W.empty:new W(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ze(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?W.empty:new W(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ze(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ze(t.from,t.to,W.fromJSON(e,t.slice),!!t.structure)}}tt.jsonID("replace",Ze);class je extends tt{constructor(e,t,r,i,o,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=u}apply(e){if(this.structure&&(Pf(e,this.from,this.gapFrom)||Pf(e,this.gapTo,this.to)))return Pe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Pe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Pe.fromReplace(e,this.from,this.to,r):Pe.fail("Content does not fit in gap")}getMap(){return new Nt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new je(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new je(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new je(t.from,t.to,t.gapFrom,t.gapTo,W.fromJSON(e,t.slice),t.insert,!!t.structure)}}tt.jsonID("replaceAround",je);function Pf(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function RC(n,e,t,r){let i=[],o=[],a,u;n.doc.nodesBetween(e,t,(c,h,p)=>{if(!c.isInline)return;let g=c.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let w=Math.max(h,e),C=Math.min(h+c.nodeSize,t),v=r.addToSet(g);for(let k=0;k<g.length;k++)g[k].isInSet(v)||(a&&a.to==w&&a.mark.eq(g[k])?a.to=C:i.push(a=new kn(w,C,g[k])));u&&u.to==w?u.to=C:o.push(u=new gr(w,C,r))}}),i.forEach(c=>n.step(c)),o.forEach(c=>n.step(c))}function LC(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;o++;let c=null;if(r instanceof sa){let h=a.marks,p;for(;p=r.isInSet(h);)(c||(c=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let h=Math.min(u+a.nodeSize,t);for(let p=0;p<c.length;p++){let g=c[p],w;for(let C=0;C<i.length;C++){let v=i[C];v.step==o-1&&g.eq(i[C].style)&&(w=v)}w?(w.to=h,w.step=o):i.push({style:g,from:Math.max(u,e),to:h,step:o})}}}),i.forEach(a=>n.step(new kn(a.from,a.to,a.style)))}function BC(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],a=e+1;for(let u=0;u<i.childCount;u++){let c=i.child(u),h=a+c.nodeSize,p=r.matchType(c.type);if(!p)o.push(new Ze(a,h,W.empty));else{r=p;for(let g=0;g<c.marks.length;g++)t.allowsMarkType(c.marks[g].type)||n.step(new kn(a,h,c.marks[g]));if(c.isText&&!t.spec.code){let g,w=/\r?\n|\r/g,C;for(;g=w.exec(c.text);)C||(C=new W(P.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new Ze(a+g.index,a+g.index+g[0].length,C))}}a=h}if(!r.validEnd){let u=r.fillBefore(P.empty,!0);n.replace(a,a,new W(u,0,0))}for(let u=o.length-1;u>=0;u--)n.step(o[u])}function PC(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function lo(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,a,t))return r;if(r==0||i.type.spec.isolating||!PC(i,o,a))break}return null}function zC(n,e,t){let{$from:r,$to:i,depth:o}=e,a=r.before(o+1),u=i.after(o+1),c=a,h=u,p=P.empty,g=0;for(let v=o,k=!1;v>t;v--)k||r.index(v)>0?(k=!0,p=P.from(r.node(v).copy(p)),g++):c--;let w=P.empty,C=0;for(let v=o,k=!1;v>t;v--)k||i.after(v+1)<i.end(v)?(k=!0,w=P.from(i.node(v).copy(w)),C++):h++;n.step(new je(c,h,a,u,new W(p.append(w),g,C),p.size-g,!0))}function mc(n,e,t=null,r=n){let i=FC(n,e),o=i&&WC(r,e);return o?i.map(op).concat({type:e,attrs:t}).concat(o.map(op)):null}function op(n){return{type:n,attrs:null}}function FC(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return t.canReplaceWith(r,i,a)?o:null}function WC(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let h=r;c&&h<i;h++)c=c.matchType(t.child(h).type);return!c||!c.validEnd?null:a}function qC(n,e,t){let r=P.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=P.from(t[a].type.create(t[a].attrs,r))}let i=e.start,o=e.end;n.step(new je(i,o,i,o,new W(r,0,0),t.length,!0))}function VC(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{if(a.isTextblock&&!a.hasMarkup(r,i)&&HC(n.doc,n.mapping.slice(o).map(u),r)){n.clearIncompatible(n.mapping.slice(o).map(u,1),r);let c=n.mapping.slice(o),h=c.map(u,1),p=c.map(u+a.nodeSize,1);return n.step(new je(h,p,h+1,p-1,new W(P.from(r.create(i,null,a.marks)),0,0),1,!0)),!1}})}function HC(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function UC(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let a=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,a);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new je(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new W(P.from(a),0,0),1,!0))}function Vi(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=t-2;h>o;h--,p--){let g=i.node(h),w=i.index(h);if(g.type.spec.isolating)return!1;let C=g.content.cutByIndex(w,g.childCount),v=r&&r[p+1];v&&(C=C.replaceChild(0,v.type.create(v.attrs)));let k=r&&r[p]||g;if(!g.canReplace(w+1,g.childCount)||!k.type.validContent(C))return!1}let u=i.indexAfter(o),c=r&&r[0];return i.node(o).canReplaceWith(u,u,c?c.type:i.node(o+1).type)}function $C(n,e,t=1,r){let i=n.doc.resolve(e),o=P.empty,a=P.empty;for(let u=i.depth,c=i.depth-t,h=t-1;u>c;u--,h--){o=P.from(i.node(u).copy(o));let p=r&&r[h];a=P.from(p?p.type.create(p.attrs,a):i.node(u).copy(a))}n.step(new Ze(e,e,new W(o.append(a),t,t),!0))}function es(n,e){let t=n.resolve(e),r=t.index();return Jm(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Jm(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Km(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let o,a,u=r.index(i);if(i==r.depth?(o=r.nodeBefore,a=r.nodeAfter):t>0?(o=r.node(i+1),u++,a=r.node(i).maybeChild(u)):(o=r.node(i).maybeChild(u-1),a=r.node(i+1)),o&&!o.isTextblock&&Jm(o,a)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function GC(n,e,t){let r=new Ze(e-t,e+t,W.empty,!0);n.step(r)}function JC(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function jm(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),h=r.node(a),p=!1;if(o==1)p=h.canReplace(c,c,i);else{let g=h.contentMatchAt(c).findWrapping(i.firstChild.type);p=g&&h.canReplaceWith(c,c,g[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function gc(n,e,t=e,r=W.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return Ym(i,o,r)?new Ze(e,t,r):new KC(i,o,r).fit()}function Ym(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class KC{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=P.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=P.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,a=r.depth,u=i.depth;for(;a&&u&&o.childCount==1;)o=o.firstChild.content,a--,u--;let c=new W(o,a,u);return e>-1?new je(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new Ze(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=ff(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let a=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:c,match:h}=this.frontier[u],p,g=null;if(t==1&&(a?h.matchType(a.type)||(g=h.fillBefore(P.from(a),!1)):o&&c.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:g};if(t==2&&a&&(p=h.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ff(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new W(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ff(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new W(Fs(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new W(Fs(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let k=0;k<o.length;k++)this.openFrontierNode(o[k]);let a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,h=0,p=[],{match:g,type:w}=this.frontier[t];if(i){for(let k=0;k<i.childCount;k++)p.push(i.child(k));g=g.matchFragment(i)}let C=u.size+e-(a.content.size-a.openEnd);for(;h<u.childCount;){let k=u.child(h),M=g.matchType(k.type);if(!M)break;h++,(h>1||c==0||k.content.size)&&(g=M,p.push(Xm(k.mark(w.allowedMarks(k.marks)),h==1?c:0,h==u.childCount?C:-1)))}let v=h==u.childCount;v||(C=-1),this.placed=Ws(this.placed,t,P.from(p)),this.frontier[t].match=g,v&&C<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,M=u;k<C;k++){let z=M.lastChild;this.frontier.push({type:z.type,match:z.contentMatchAt(z.childCount)}),M=z.content}this.unplaced=v?e==0?W.empty:new W(Fs(a.content,e-1,1),e-1,C<0?a.openEnd:e-1):new W(Fs(a.content,e,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!cf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=cf(e,t,i,r,o);if(a){for(let u=t-1;u>=0;u--){let{match:c,type:h}=this.frontier[u],p=cf(e,u,h,c,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ws(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ws(this.placed,this.depth,P.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(P.empty,!0);t.childCount&&(this.placed=Ws(this.placed,this.frontier.length,t))}}function Fs(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Fs(n.firstChild.content,e-1,t)))}function Ws(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ws(n.lastChild.content,e-1,t)))}function ff(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Xm(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Xm(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(P.empty,!0)))),n.copy(r)}function cf(n,e,t,r,i){let o=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,a);return u&&!jC(t,o.content,a)?u:null}function jC(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function YC(n){return n.spec.defining||n.spec.definingForContent}function XC(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(Ym(i,o,r))return n.step(new Ze(e,t,r));let a=Zm(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let w=i.depth,C=i.pos-1;w>0;w--,C--){let v=i.node(w).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;a.indexOf(w)>-1?u=w:i.before(w)==C&&a.splice(1,0,-w)}let c=a.indexOf(u),h=[],p=r.openStart;for(let w=r.content,C=0;;C++){let v=w.firstChild;if(h.push(v),C==r.openStart)break;w=v.content}for(let w=p-1;w>=0;w--){let C=h[w],v=YC(C.type);if(v&&!C.sameMarkup(i.node(Math.abs(u)-1)))p=w;else if(v||!C.type.isTextblock)break}for(let w=r.openStart;w>=0;w--){let C=(w+p+1)%(r.openStart+1),v=h[C];if(v)for(let k=0;k<a.length;k++){let M=a[(k+c)%a.length],z=!0;M<0&&(z=!1,M=-M);let K=i.node(M-1),j=i.index(M-1);if(K.canReplaceWith(j,j,v.type,v.marks))return n.replace(i.before(M),z?o.after(M):t,new W(Qm(r.content,0,r.openStart,C),C,r.openEnd))}}let g=n.steps.length;for(let w=a.length-1;w>=0&&(n.replace(e,t,r),!(n.steps.length>g));w--){let C=a[w];C<0||(e=i.before(C),t=o.after(C))}}function Qm(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(Qm(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),a=o.fillBefore(n).append(n);n=a.append(o.matchFragment(a).fillBefore(P.empty,!0))}return n}function QC(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=JC(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new W(P.from(r),0,0))}function ZC(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=Zm(r,i);for(let a=0;a<o.length;a++){let u=o[a],c=a==o.length-1;if(c&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(c||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a)return n.delete(r.before(a),t);n.delete(e,t)}function Zm(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class Hi extends tt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pe.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Pe.fromReplace(e,this.pos,this.pos+1,new W(P.from(i),0,t.isLeaf?0:1))}getMap(){return Nt.empty}invert(e){return new Hi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Hi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hi(t.pos,t.attr,t.value)}}tt.jsonID("attr",Hi);class Qs extends tt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Pe.ok(r)}getMap(){return Nt.empty}invert(e){return new Qs(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Qs(t.attr,t.value)}}tt.jsonID("docAttr",Qs);let Ki=class extends Error{};Ki=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Ki.prototype=Object.create(Error.prototype);Ki.prototype.constructor=Ki;Ki.prototype.name="TransformError";class eT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new qi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Ki(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=W.empty){let i=gc(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new W(P.from(r),0,0))}delete(e,t){return this.replace(e,t,W.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return XC(this,e,t,r),this}replaceRangeWith(e,t,r){return QC(this,e,t,r),this}deleteRange(e,t){return ZC(this,e,t),this}lift(e,t){return zC(this,e,t),this}join(e,t=1){return GC(this,e,t),this}wrap(e,t){return qC(this,e,t),this}setBlockType(e,t=e,r,i=null){return VC(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return UC(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Hi(e,t,r)),this}setDocAttribute(e,t){return this.step(new Qs(e,t)),this}addNodeMark(e,t){return this.step(new yr(e,t)),this}removeNodeMark(e,t){if(!(t instanceof de)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Ji(e,t)),this}split(e,t=1,r){return $C(this,e,t,r),this}addMark(e,t,r){return RC(this,e,t,r),this}removeMark(e,t,r){return LC(this,e,t,r),this}clearIncompatible(e,t,r){return BC(this,e,t,r),this}}const hf=Object.create(null);class ae{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new tT(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=W.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let o=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:c,$to:h}=a[u],p=e.mapping.slice(o);e.replaceRange(p.map(c.pos),p.map(h.pos),u?W.empty:t),u==0&&up(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:u}=i[o],c=e.mapping.slice(r),h=c.map(a.pos),p=c.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),up(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new be(e):zi(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let a=t<0?zi(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):zi(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Dt(e.node(0))}static atStart(e){return zi(e,e,0,0,1)||new Dt(e)}static atEnd(e){return zi(e,e,e.content.size,e.childCount,-1)||new Dt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=hf[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in hf)throw new RangeError("Duplicate use of selection JSON ID "+e);return hf[e]=t,t.prototype.jsonID=e,t}getBookmark(){return be.between(this.$anchor,this.$head).getBookmark()}}ae.prototype.visible=!0;class tT{constructor(e,t){this.$from=e,this.$to=t}}let lp=!1;function ap(n){!lp&&!n.parent.inlineContent&&(lp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class be extends ae{constructor(e,t=e){ap(e),ap(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ae.near(r);let i=e.resolve(t.map(this.anchor));return new be(i.parent.inlineContent?i:r,r)}replace(e,t=W.empty){if(super.replace(e,t),t==W.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new oa(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new be(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=ae.findFrom(t,r,!0)||ae.findFrom(t,-r,!0);if(o)t=o.$head;else return ae.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(ae.findFrom(e,-r,!0)||ae.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new be(e,t)}}ae.jsonID("text",be);class oa{constructor(e,t){this.anchor=e,this.head=t}map(e){return new oa(e.map(this.anchor),e.map(this.head))}resolve(e){return be.between(e.resolve(this.anchor),e.resolve(this.head))}}class J extends ae{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?ae.near(o):new J(o)}content(){return new W(P.from(this.node),0,0)}eq(e){return e instanceof J&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new yc(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new J(e.resolve(t.anchor))}static create(e,t){return new J(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}J.prototype.visible=!1;ae.jsonID("node",J);class yc{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new oa(r,r):new yc(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&J.isSelectable(r)?new J(t):ae.near(t)}}class Dt extends ae{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=W.empty){if(t==W.empty){e.delete(0,e.doc.content.size);let r=ae.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Dt(e)}map(e){return new Dt(e)}eq(e){return e instanceof Dt}getBookmark(){return nT}}ae.jsonID("all",Dt);const nT={map(){return this},resolve(n){return new Dt(n)}};function zi(n,e,t,r,i,o=!1){if(e.inlineContent)return be.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!o&&J.isSelectable(u))return J.create(n,t-(i<0?u.nodeSize:0))}else{let c=zi(n,u,t+i,i<0?u.childCount:0,i,o);if(c)return c}t+=u.nodeSize*i}return null}function up(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Ze||i instanceof je))return;let o=n.mapping.maps[r],a;o.forEach((u,c,h,p)=>{a==null&&(a=p)}),n.setSelection(ae.near(n.doc.resolve(a),t))}const fp=1,_l=2,cp=4;class rT extends eT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|fp)&~_l,this.storedMarks=null,this}get selectionSet(){return(this.updated&fp)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=_l,this}ensureMarks(e){return de.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&_l)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~_l,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||de.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let a=this.doc.resolve(t);o=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(ae.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=cp,this}get scrolledIntoView(){return(this.updated&cp)>0}}function hp(n,e){return!e||!n?n:n.bind(e)}class qs{constructor(e,t,r){this.name=e,this.init=hp(t.init,r),this.apply=hp(t.apply,r)}}const iT=[new qs("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new qs("selection",{init(n,e){return n.selection||ae.atStart(e.doc)},apply(n){return n.selection}}),new qs("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new qs("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class df{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=iT.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new qs(r.key,r.spec.state,r))})}}class Wi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let c=i?i[a].n:0,h=i?i[a].state:this,p=c<t.length&&u.spec.appendTransaction.call(u,c?t.slice(c):t,h,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),o=!0}i&&(i[a]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Wi(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new rT(this)}static create(e){let t=new df(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Wi(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new df(this.schema,e.plugins),r=t.fields,i=new Wi(t);for(let o=0;o<r.length;o++){let a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new df(e.schema,e.plugins),o=new Wi(i);return i.fields.forEach(a=>{if(a.name=="doc")o.doc=ei.fromJSON(e.schema,t.doc);else if(a.name=="selection")o.selection=ae.fromJSON(o.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let c=r[u],h=c.spec.state;if(c.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[a.name]=h.fromJSON.call(c,e,t[u],o);return}}o[a.name]=a.init(e,o)}}),o}}function eg(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=eg(i,e,{})),t[r]=i}return t}class Tr{constructor(e){this.spec=e,this.props={},e.props&&eg(e.props,this,this.props),this.key=e.key?e.key.key:tg("plugin")}getState(e){return e[this.key]}}const pf=Object.create(null);function tg(n){return n in pf?n+"$"+ ++pf[n]:(pf[n]=0,n+"$")}class ng{constructor(e="key"){this.key=tg(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const lt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Zs=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let dp=null;const $n=function(n,e,t){let r=dp||(dp=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},ii=function(n,e,t,r){return t&&(pp(n,e,t,r,-1)||pp(n,e,t,r,1))},sT=/^(img|br|input|textarea|hr)$/i;function pp(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:xn(n))){let o=n.parentNode;if(!o||o.nodeType!=1||bc(n)||sT.test(n.nodeName)||n.contentEditable=="false")return!1;e=lt(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?xn(n):0}else return!1}}function xn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function oT(n,e,t){for(let r=e==0,i=e==xn(n);r||i;){if(n==t)return!0;let o=lt(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==xn(n)}}function bc(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const la=function(n){return n.focusNode&&ii(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function jr(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function lT(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function aT(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:r.startOffset}}}const On=typeof navigator<"u"?navigator:null,mp=typeof document<"u"?document:null,kr=On&&On.userAgent||"",zf=/Edge\/(\d+)/.exec(kr),rg=/MSIE \d/.exec(kr),Ff=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(kr),xt=!!(rg||Ff||zf),wr=rg?document.documentMode:Ff?+Ff[1]:zf?+zf[1]:0,fn=!xt&&/gecko\/(\d+)/i.test(kr);fn&&+(/Firefox\/(\d+)/.exec(kr)||[0,0])[1];const Wf=!xt&&/Chrome\/(\d+)/.exec(kr),et=!!Wf,uT=Wf?+Wf[1]:0,at=!xt&&!!On&&/Apple Computer/.test(On.vendor),ji=at&&(/Mobile\/\w+/.test(kr)||!!On&&On.maxTouchPoints>2),Jt=ji||(On?/Mac/.test(On.platform):!1),fT=On?/Win/.test(On.platform):!1,an=/Android \d/.test(kr),ao=!!mp&&"webkitFontSmoothing"in mp.documentElement.style,cT=ao?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function hT(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Un(n,e){return typeof n=="number"?n:n[e]}function dT(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function gp(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let a=t||n.dom;a;a=Zs(a)){if(a.nodeType!=1)continue;let u=a,c=u==o.body,h=c?hT(o):dT(u),p=0,g=0;if(e.top<h.top+Un(r,"top")?g=-(h.top-e.top+Un(i,"top")):e.bottom>h.bottom-Un(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+Un(i,"top")-h.top:e.bottom-h.bottom+Un(i,"bottom")),e.left<h.left+Un(r,"left")?p=-(h.left-e.left+Un(i,"left")):e.right>h.right-Un(r,"right")&&(p=e.right-h.right+Un(i,"right")),p||g)if(c)o.defaultView.scrollBy(p,g);else{let w=u.scrollLeft,C=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let v=u.scrollLeft-w,k=u.scrollTop-C;e={left:e.left-v,top:e.top-k,right:e.right-v,bottom:e.bottom-k}}if(c||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function pT(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(o,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let c=u.getBoundingClientRect();if(c.top>=t-20){r=u,i=c.top;break}}return{refDOM:r,refTop:i,stack:ig(n.dom)}}function ig(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Zs(r));return e}function mT({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;sg(t,r==0?0:r-e)}function sg(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Bi=null;function gT(n){if(n.setActive)return n.setActive();if(Bi)return n.focus(Bi);let e=ig(n);n.focus(Bi==null?{get preventScroll(){return Bi={preventScroll:!0},!0}}:void 0),Bi||(Bi=!1,sg(e,0))}function og(n,e){let t,r=2e8,i,o=0,a=e.top,u=e.top,c,h;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let w;if(p.nodeType==1)w=p.getClientRects();else if(p.nodeType==3)w=$n(p).getClientRects();else continue;for(let C=0;C<w.length;C++){let v=w[C];if(v.top<=a&&v.bottom>=u){a=Math.max(v.bottom,a),u=Math.min(v.top,u);let k=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(k<r){t=p,r=k,i=k&&t.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,p.nodeType==1&&k&&(o=g+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!c&&v.left<=e.left&&v.right>=e.left&&(c=p,h={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!t&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(o=g+1)}}return!t&&c&&(t=c,i=h,r=0),t&&t.nodeType==3?yT(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:og(t,i)}function yT(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=hr(r,1);if(o.top!=o.bottom&&wc(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function wc(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function bT(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function wT(n,e,t){let{node:r,offset:i}=og(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();o=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function vT(n,e,t,r){let i=-1;for(let o=e,a=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0);if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent&&!a||!u.contentDOM)){let c=u.dom.getBoundingClientRect();if(u.node.isBlock&&u.parent&&!a&&(a=!0,c.left>r.left||c.top>r.top?i=u.posBefore:(c.right<r.left||c.bottom<r.top)&&(i=u.posAfter)),!u.contentDOM&&i<0&&!u.node.isText)return(u.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?u.posBefore:u.posAfter}o=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function lg(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let a=n.childNodes[o];if(a.nodeType==1){let u=a.getClientRects();for(let c=0;c<u.length;c++){let h=u[c];if(wc(e,h))return lg(a,e,h)}}if((o=(o+1)%r)==i)break}return n}function ST(n,e){let t=n.dom.ownerDocument,r,i=0,o=aT(t,e.left,e.top);o&&({node:r,offset:i}=o);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let h=n.dom.getBoundingClientRect();if(!wc(e,h)||(a=lg(n.dom,e,h),!a))return null}if(at)for(let h=a;r&&h;h=Zs(h))h.draggable&&(r=void 0);if(a=bT(a,e),r){if(fn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let h;ao&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=vT(n,r,i,e))}u==null&&(u=wT(n,a,e));let c=n.docView.nearestDesc(a,!0);return{pos:u,inside:c?c.posAtStart-c.border:-1}}function yp(n){return n.top<n.bottom||n.left<n.right}function hr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(yp(r))return r}return Array.prototype.find.call(t,yp)||n.getBoundingClientRect()}const xT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ag(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),a=ao||fn;if(r.nodeType==3)if(a&&(xT.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let c=hr($n(r,i,i),t);if(fn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=hr($n(r,i-1,i-1),-1);if(h.top==c.top){let p=hr($n(r,i,i+1),-1);if(p.top!=c.top)return Ns(p,p.left<h.left)}}return c}else{let c=i,h=i,p=t<0?1:-1;return t<0&&!i?(h++,p=-1):t>=0&&i==r.nodeValue.length?(c--,p=1):t<0?c--:h++,Ns(hr($n(r,c,h),p),p<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==xn(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return mf(c.getBoundingClientRect(),!1)}if(o==null&&i<xn(r)){let c=r.childNodes[i];if(c.nodeType==1)return mf(c.getBoundingClientRect(),!0)}return mf(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==xn(r))){let c=r.childNodes[i-1],h=c.nodeType==3?$n(c,xn(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(h)return Ns(hr(h,1),!1)}if(o==null&&i<xn(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let h=c?c.nodeType==3?$n(c,0,a?0:1):c.nodeType==1?c:null:null;if(h)return Ns(hr(h,-1),!0)}return Ns(hr(r.nodeType==3?$n(r):r,-t),t>=0)}function Ns(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function mf(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function ug(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function CT(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return ug(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let a=ag(n,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let c;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=$n(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<c.length;h++){let p=c[h];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const TT=/[\u0590-\u08ac]/;function kT(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,u=n.domSelection();return!TT.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:a:ug(n,e,()=>{let{focusNode:c,focusOffset:h,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),w=u.caretBidiLevel;u.modify("move",t,"character");let C=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:v,focusOffset:k}=n.domSelectionRange(),M=v&&!C.contains(v.nodeType==1?v:v.parentNode)||c==v&&h==k;try{u.collapse(p,g),c&&(c!=p||h!=g)&&u.extend&&u.extend(c,h)}catch{}return w!=null&&(u.caretBidiLevel=w),M})}let bp=null,wp=null,vp=!1;function OT(n,e,t){return bp==e&&wp==t?vp:(bp=e,wp=t,vp=t=="up"||t=="down"?CT(n,e,t):kT(n,e,t))}const Xt=0,Sp=1,Yr=2,_n=3;class uo{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Xt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,a;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>lt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),a;if(o&&(!t||o.node))if(r&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let a=this.children[r],u=o+a.size;if(u>e||a instanceof cg){i=e-o;break}o=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof fg&&o.side>=0;r--);if(t<=0){let o,a=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,a=!1);return o&&t&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?lt(o.dom)+1:0}}else{let o,a=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?lt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let a=r,u=0;;u++){let c=this.children[u],h=a+c.size;if(i==-1&&e<=h){let p=a+c.border;if(e>=p&&t<=h-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,p);e=a;for(let g=u;g>0;g--){let w=this.children[g-1];if(w.size&&w.dom.parentNode==this.contentDOM&&!w.emptyChildAt(1)){i=lt(w.dom)+1;break}e-=w.size}i==-1&&(i=0)}if(i>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){o=lt(g.dom);break}t+=g.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),a=Math.max(e,t);for(let w=0,C=0;w<this.children.length;w++){let v=this.children[w],k=C+v.size;if(o>C&&a<k)return v.setSelection(e-C-v.border,t-C-v.border,r,i);C=k}let u=this.domFromPos(e,e?-1:1),c=t==e?u:this.domFromPos(t,t?-1:1),h=r.getSelection(),p=!1;if((fn||at)&&e==t){let{node:w,offset:C}=u;if(w.nodeType==3){if(p=!!(C&&w.nodeValue[C-1]==`
`),p&&C==w.nodeValue.length)for(let v=w,k;v;v=v.parentNode){if(k=v.nextSibling){k.nodeName=="BR"&&(u=c={node:k.parentNode,offset:lt(k)+1});break}let M=v.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let v=w.childNodes[C-1];p=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(fn&&h.focusNode&&h.focusNode!=c.node&&h.focusNode.nodeType==1){let w=h.focusNode.childNodes[h.focusOffset];w&&w.contentEditable=="false"&&(i=!0)}if(!(i||p&&at)&&ii(u.node,u.offset,h.anchorNode,h.anchorOffset)&&ii(c.node,c.offset,h.focusNode,h.focusOffset))return;let g=!1;if((h.extend||e==t)&&!p){h.collapse(u.node,u.offset);try{e!=t&&h.extend(c.node,c.offset),g=!0}catch{}}if(!g){if(e>t){let C=u;u=c,c=C}let w=document.createRange();w.setEnd(c.node,c.offset),w.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(w)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+o.border,c=a-o.border;if(e>=u&&t<=c){this.dirty=e==r||t==a?Yr:Sp,e==u&&t==c&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=_n:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Yr:_n}r=a}this.dirty=Yr}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Yr:Sp;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class fg extends uo{constructor(e,t,r,i){let o,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Xt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class _T extends uo{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class si extends uo{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let o=i.nodeViews[t.type.name],a=o&&o(t,i,r);return(!a||!a.dom)&&(a=Tn.renderSpec(document,t.type.spec.toDOM(t,r))),new si(e,t,a.dom,a.contentDOM||a.dom)}parseRule(){return this.dirty&_n||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=_n&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Xt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Xt}}slice(e,t,r){let i=si.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;t<a&&(o=Hf(o,t,a,r)),e>0&&(o=Hf(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}}class vr extends uo{constructor(e,t,r,i,o,a,u,c,h){super(e,[],o,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,o,a){let u=o.nodeViews[t.type.name],c,h=u&&u(t,o,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,i),p=h&&h.dom,g=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=Tn.renderSpec(document,t.type.spec.toDOM(t)));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let w=p;return p=pg(p,r,t),h?c=new AT(e,t,r,i,p,g||null,w,h,o,a+1):t.isText?new aa(e,t,r,i,p,w,o):new vr(e,t,r,i,p,g||null,w,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>P.empty)}return e}matchesNode(e,t,r){return this.dirty==Xt&&e.eq(this.node)&&Vf(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,a=o&&o.pos>-1?o:null,u=o&&o.pos<0,c=new ET(this,a&&a.node,e);DT(this.node,this.innerDeco,(h,p,g)=>{h.spec.marks?c.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!g&&c.syncToMarks(p==this.node.childCount?de.none:this.node.child(p).marks,r,e),c.placeWidget(h,e,i)},(h,p,g,w)=>{c.syncToMarks(h.marks,r,e);let C;c.findNodeMatch(h,p,g,w)||u&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(C=c.findIndexWithChild(o.node))>-1&&c.updateNodeAt(h,p,g,C,e)||c.updateNextNode(h,p,g,e,w,i)||c.addNode(h,p,g,e,i),i+=h.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Yr)&&(a&&this.protectLocalComposition(e,a),hg(this.contentDOM,this.children,e),ji&&RT(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof be)||r<t||i>t+this.node.content.size)return null;let o=e.domSelectionRange(),a=LT(o.focusNode,o.focusOffset);if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let u=a.nodeValue,c=BT(this.node.content,u,r-t,i-t);return c<0?null:{node:a,pos:c,text:u}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new _T(this,o,t,i);e.input.compositionNodes.push(a),this.children=Hf(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==_n||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Xt}updateOuterDeco(e){if(Vf(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=dg(this.dom,this.nodeDOM,qf(this.outerDeco,this.node,t),qf(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function xp(n,e,t,r,i){pg(r,e,n);let o=new vr(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class aa extends vr{constructor(e,t,r,i,o,a,u){super(e,t,r,i,o,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==_n||this.dirty!=Xt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Xt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Xt,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new aa(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=_n)}get domAtom(){return!1}}class cg extends uo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Xt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class AT extends vr{constructor(e,t,r,i,o,a,u,c,h,p){super(e,t,r,i,o,a,u,h,p),this.spec=c}update(e,t,r,i){if(this.dirty==_n)return!1;if(this.spec.update){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function hg(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let a=e[o],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=Cp(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof si){let c=r?r.previousSibling:n.lastChild;hg(a.contentDOM,a.children,t),r=c?c.nextSibling:n.firstChild}}for(;r;)r=Cp(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Us=function(n){n&&(this.nodeName=n)};Us.prototype=Object.create(null);const Xr=[new Us];function qf(n,e,t){if(n.length==0)return Xr;let r=t?Xr[0]:new Us,i=[r];for(let o=0;o<n.length;o++){let a=n[o].type.attrs;if(a){a.nodeName&&i.push(r=new Us(a.nodeName));for(let u in a){let c=a[u];c!=null&&(t&&i.length==1&&i.push(r=new Us(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+c:u=="style"?r.style=(r.style?r.style+";":"")+c:u!="nodeName"&&(r[u]=c))}}}return i}function dg(n,e,t,r){if(t==Xr&&r==Xr)return e;let i=e;for(let o=0;o<r.length;o++){let a=r[o],u=t[o];if(o){let c;u&&u.nodeName==a.nodeName&&i!=n&&(c=i.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(i),u=Xr[0]),i=c}MT(i,u||Xr[0],a)}return i}function MT(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function pg(n,e,t){return dg(n,n,Xr,qf(e,t,n.nodeType!=1))}function Vf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Cp(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class ET{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=IT(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Xt,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let h=this.top.children[c];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){u=c;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let c=si.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))o=this.top.children.indexOf(a,this.index);else for(let u=this.index,c=Math.min(this.top.children.length,u+5);u<c;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let a=this.top.children[i];return a.dirty==_n&&a.dom==a.contentDOM&&(a.dirty=Yr),a.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,a){for(let u=this.index;u<this.top.children.length;u++){let c=this.top.children[u];if(c instanceof vr){let h=this.preMatch.matched.get(c);if(h!=null&&h!=o)return!1;let p=c.dom,g,w=this.isLocked(p)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=_n&&Vf(t,c.outerDeco));if(!w&&c.update(e,t,r,i))return this.destroyBetween(this.index,u),c.dom!=p&&(this.changed=!0),this.index++,!0;if(!w&&(g=this.recreateWrapper(c,e,t,r,i,a)))return this.top.children[this.index]=g,g.contentDOM&&(g.dirty=Yr,g.updateChildren(i,a+1),g.dirty=Xt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let u=vr.create(this.top,t,r,i,o,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let c of u.children)c.parent=u}return e.destroy(),u}addNode(e,t,r,i,o){let a=vr.create(this.top,e,t,r,i,o);a.contentDOM&&a.updateChildren(i,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new fg(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof si;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof aa)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((at||et)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new cg(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function IT(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof si)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let c=u.node;if(c){if(c!=n.child(i-1))break;--i,o.set(u,i),a.push(u)}}return{index:i,matched:o,matches:a.reverse()}}function NT(n,e){return n.type.side-e.type.side}function DT(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,i,e.forChild(o,p),h),o+=p.nodeSize}return}let a=0,u=[],c=null;for(let h=0;;){let p,g;for(;a<i.length&&i[a].to==o;){let M=i[a++];M.widget&&(p?(g||(g=[p])).push(M):p=M)}if(p)if(g){g.sort(NT);for(let M=0;M<g.length;M++)t(g[M],h,!!c)}else t(p,h,!!c);let w,C;if(c)C=-1,w=c,c=null;else if(h<n.childCount)C=h,w=n.child(h++);else break;for(let M=0;M<u.length;M++)u[M].to<=o&&u.splice(M--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)u.push(i[a++]);let v=o+w.nodeSize;if(w.isText){let M=v;a<i.length&&i[a].from<M&&(M=i[a].from);for(let z=0;z<u.length;z++)u[z].to<M&&(M=u[z].to);M<v&&(c=w.cut(M-o),w=w.cut(0,M-o),v=M,C=-1)}let k=w.isInline&&!w.isLeaf?u.filter(M=>!M.inline):u.slice();r(w,k,e.forChild(o,w),C),o=v}}function RT(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function LT(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=xn(n)}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function BT(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let a=n.child(i++),u=o;if(o+=a.nodeSize,!a.isText)continue;let c=a.text;for(;i<n.childCount;){let h=n.child(i++);if(o+=h.nodeSize,!h.isText)break;c+=h.text}if(o>=t){if(o>=r&&c.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?c.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&c.length>=r+e.length-u&&c.slice(r-u,r-u+e.length)==e)return r}}return-1}function Hf(n,e,t,r,i){let o=[];for(let a=0,u=0;a<n.length;a++){let c=n[a],h=u,p=u+=c.size;h>=t||p<=e?o.push(c):(h<e&&o.push(c.slice(0,e-h,r)),i&&(o.push(i),i=void 0),p>t&&o.push(c.slice(t-h,c.size,r)))}return o}function vc(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),c,h;if(la(t)){for(c=u;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&J.isSelectable(p)&&i.parent&&!(p.isInline&&oT(t.focusNode,t.focusOffset,i.dom))){let g=i.posBefore;h=new J(a==g?u:r.resolve(g))}}else{let p=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(p<0)return null;c=r.resolve(p)}if(!h){let p=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;h=Sc(n,c,u,p)}return h}function mg(n){return n.editable?n.hasFocus():yg(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function jn(n,e=!1){let t=n.state.selection;if(gg(n,t),!!mg(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&et){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ii(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)zT(n);else{let{anchor:r,head:i}=t,o,a;Tp&&!(t instanceof be)&&(t.$from.parent.inlineContent||(o=kp(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=kp(n,t.to))),n.docView.setSelection(r,i,n.root,e),Tp&&(o&&Op(o),a&&Op(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&PT(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Tp=at||et&&uT<63;function kp(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(at&&i&&i.contentEditable=="false")return gf(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return gf(i);if(o)return gf(o)}}function gf(n){return n.contentEditable="true",at&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Op(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function PT(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!mg(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function zT(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,lt(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&xt&&wr<=11&&(r.disabled=!0,r.disabled=!1)}function gg(n,e){if(e instanceof J){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(_p(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else _p(n)}function _p(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Sc(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||be.between(e,t,r)}function Ap(n){return n.editable&&!n.hasFocus()?!1:yg(n)}function yg(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function FT(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ii(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Uf(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&ae.findFrom(o,e)}function dr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Mp(n,e,t){let r=n.state.selection;if(r instanceof be)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return dr(n,new be(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Uf(n.state,e);return i&&i instanceof J?dr(n,i):!1}else if(!(Jt&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!o||o.isText)return!1;let u=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?J.isSelectable(o)?dr(n,new J(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):ao?dr(n,new be(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof J&&r.node.isInline)return dr(n,new be(e>0?r.$to:r.$from));{let i=Uf(n.state,e);return i?dr(n,i):!1}}}function Gl(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function $s(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Pi(n,e){return e<0?WT(n):qT(n)}function WT(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,a=!1;for(fn&&t.nodeType==1&&r<Gl(t)&&$s(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if($s(u,-1))i=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(bg(t))break;{let u=t.previousSibling;for(;u&&$s(u,-1);)i=t.parentNode,o=lt(u),u=u.previousSibling;if(u)t=u,r=Gl(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?$f(n,t,r):i&&$f(n,i,o)}function qT(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Gl(t),o,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if($s(u,1))o=t,a=++r;else break}else{if(bg(t))break;{let u=t.nextSibling;for(;u&&$s(u,1);)o=u.parentNode,a=lt(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=Gl(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&$f(n,o,a)}function bg(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function VT(n,e){for(;n&&e==n.childNodes.length&&!bc(n);)e=lt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function HT(n,e){for(;n&&!e&&!bc(n);)e=lt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function $f(n,e,t){if(e.nodeType!=3){let o,a;(a=VT(e,t))?(e=a,t=0):(o=HT(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(la(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&jn(n)},50)}function Ep(n,e){let t=n.state.doc.resolve(e);if(!(et||fT)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),a=(o.top+o.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),a=(o.top+o.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Ip(n,e,t){let r=n.state.selection;if(r instanceof be&&!r.empty||t.indexOf("s")>-1||Jt&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=Uf(n.state,e);if(a&&a instanceof J)return dr(n,a)}if(!i.parent.inlineContent){let a=e<0?i:o,u=r instanceof Dt?ae.near(a,e):ae.findFrom(a,e);return u?dr(n,u):!1}return!1}function Np(n,e){if(!(n.state.selection instanceof be))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let a=n.state.tr;return e<0?a.delete(t.pos-o.nodeSize,t.pos):a.delete(t.pos,t.pos+o.nodeSize),n.dispatch(a),!0}return!1}function Dp(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function UT(n){if(!at||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Dp(n,r,"true"),setTimeout(()=>Dp(n,r,"false"),20)}return!1}function $T(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function GT(n,e){let t=e.keyCode,r=$T(e);if(t==8||Jt&&t==72&&r=="c")return Np(n,-1)||Pi(n,-1);if(t==46&&!e.shiftKey||Jt&&t==68&&r=="c")return Np(n,1)||Pi(n,1);if(t==13||t==27)return!0;if(t==37||Jt&&t==66&&r=="c"){let i=t==37?Ep(n,n.state.selection.from)=="ltr"?-1:1:-1;return Mp(n,i,r)||Pi(n,i)}else if(t==39||Jt&&t==70&&r=="c"){let i=t==39?Ep(n,n.state.selection.from)=="ltr"?1:-1:1;return Mp(n,i,r)||Pi(n,i)}else{if(t==38||Jt&&t==80&&r=="c")return Ip(n,-1,r)||Pi(n,-1);if(t==40||Jt&&t==78&&r=="c")return UT(n)||Ip(n,1,r)||Pi(n,1);if(r==(Jt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function wg(n,e){n.someProp("transformCopied",C=>{e=C(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let C=r.firstChild;t.push(C.type.name,C.attrs!=C.type.defaultAttrs?C.attrs:null),r=C.content}let a=n.someProp("clipboardSerializer")||Tn.fromSchema(n.state.schema),u=kg(),c=u.createElement("div");c.appendChild(a.serializeFragment(r,{document:u}));let h=c.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=Tg[h.nodeName.toLowerCase()]);){for(let C=p.length-1;C>=0;C--){let v=u.createElement(p[C]);for(;c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),g++}h=c.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${o}${g?` -${g}`:""} ${JSON.stringify(t)}`);let w=n.someProp("clipboardTextSerializer",C=>C(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:w}}function vg(n,e,t,r,i){let o=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let c=e&&(r||o||!t);if(c){if(n.someProp("transformPastedText",w=>{e=w(e,o||r,n)}),o)return e?new W(P.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):W.empty;let g=n.someProp("clipboardTextParser",w=>w(e,i,r,n));if(g)u=g;else{let w=i.marks(),{schema:C}=n.state,v=Tn.fromSchema(C);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(k=>{let M=a.appendChild(document.createElement("p"));k&&M.appendChild(v.serializeNode(C.text(k,w)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),a=jT(t),ao&&YT(a);let h=a&&a.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let w=a.firstChild;for(;w&&w.nodeType!=1;)w=w.nextSibling;if(!w)break;a=w}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Gi.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||p),context:i,ruleFromNode(w){return w.nodeName=="BR"&&!w.nextSibling&&w.parentNode&&!JT.test(w.parentNode.nodeName)?{ignore:!0}:null}})),p)u=XT(Rp(u,+p[1],+p[2]),p[4]);else if(u=W.maxOpen(KT(u.content,i),!0),u.openStart||u.openEnd){let g=0,w=0;for(let C=u.content.firstChild;g<u.openStart&&!C.type.spec.isolating;g++,C=C.firstChild);for(let C=u.content.lastChild;w<u.openEnd&&!C.type.spec.isolating;w++,C=C.lastChild);u=Rp(u,g,w)}return n.someProp("transformPasted",g=>{u=g(u,n)}),u}const JT=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function KT(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,a=[];if(n.forEach(u=>{if(!a)return;let c=i.findWrapping(u.type),h;if(!c)return a=null;if(h=a.length&&o.length&&xg(c,o,u,a[a.length-1],0))a[a.length-1]=h;else{a.length&&(a[a.length-1]=Cg(a[a.length-1],o.length));let p=Sg(u,c);a.push(p),i=i.matchType(p.type),o=c}}),a)return P.from(a)}return n}function Sg(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,P.from(n));return n}function xg(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=xg(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(P.from(Sg(t,n,i+1))))}}function Cg(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Cg(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(P.empty,!0);return n.copy(t.append(r))}function Gf(n,e,t,r,i,o){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(o=0),i<r-1&&(u=Gf(u,e,t,r,i+1,o)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,o<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(P.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function Rp(n,e,t){return e<n.openStart&&(n=new W(Gf(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new W(Gf(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Tg={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Lp=null;function kg(){return Lp||(Lp=document.implementation.createHTMLDocument("title"))}function jT(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=kg().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Tg[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=n,i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function YT(n){let e=n.querySelectorAll(et?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function XT(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let c=t.nodes[r[u]];if(!c||c.hasRequiredAttrs())break;i=P.from(c.create(r[u+1],i)),o++,a++}return new W(i,o,a)}const ut={},ft={},QT={touchstart:!0,touchmove:!0};class ZT{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ek(n){for(let e in ut){let t=ut[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{nk(n,r)&&!xc(n,r)&&(n.editable||!(r.type in ft))&&t(n,r)},QT[e]?{passive:!0}:void 0)}at&&n.dom.addEventListener("input",()=>null),Jf(n)}function br(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function tk(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Jf(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>xc(n,r))})}function xc(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function nk(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function rk(n,e){!xc(n,e)&&ut[e.type]&&(n.editable||!(e.type in ft))&&ut[e.type](n,e)}ft.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!_g(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(an&&et&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),ji&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,jr(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||GT(n,t)?t.preventDefault():br(n,"key")};ft.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};ft.keypress=(n,e)=>{let t=e;if(_g(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Jt&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof be)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function ua(n){return{left:n.clientX,top:n.clientY}}function ik(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Cc(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(n.someProp(e,u=>a>o.depth?u(n,t,o.nodeAfter,o.before(a),i,!0):u(n,t,o.node(a),o.before(a),i,!1)))return!0;return!1}function Ui(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function sk(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&J.isSelectable(r)?(Ui(n,new J(t),"pointer"),!0):!1}function ok(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof J&&(r=t.node);let o=n.state.doc.resolve(e);for(let a=o.depth+1;a>0;a--){let u=a>o.depth?o.nodeAfter:o.node(a);if(J.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(a);break}}return i!=null?(Ui(n,J.create(n.state.doc,i),"pointer"),!0):!1}function lk(n,e,t,r,i){return Cc(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?ok(n,t):sk(n,t))}function ak(n,e,t,r){return Cc(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function uk(n,e,t,r){return Cc(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||fk(n,t,r)}function fk(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Ui(n,be.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(a.inlineContent)Ui(n,be.create(r,u+1,u+1+a.content.size),"pointer");else if(J.isSelectable(a))Ui(n,J.create(r,u),"pointer");else continue;return!0}}function Tc(n){return Jl(n)}const Og=Jt?"metaKey":"ctrlKey";ut.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Tc(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&ik(t,n.input.lastClick)&&!t[Og]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let a=n.posAtCoords(ua(t));a&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new ck(n,a,t,!!r)):(o=="doubleClick"?ak:uk)(n,a.pos,a.inside,t)?t.preventDefault():br(n,"pointer"))};class ck{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Og],this.allowDefault=r.shiftKey;let o,a;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);o=p.parent,a=p.depth?p.before():0}const u=i?null:r.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c?c.dom:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof J&&h.from<=a&&h.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&fn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),br(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>jn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ua(e))),this.updateAllowDefault(e),this.allowDefault||!t?br(this.view,"pointer"):lk(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||at&&this.mightDrag&&!this.mightDrag.node.isAtom||et&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ui(this.view,ae.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):br(this.view,"pointer")}move(e){this.updateAllowDefault(e),br(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ut.touchstart=n=>{n.input.lastTouch=Date.now(),Tc(n),br(n,"pointer")};ut.touchmove=n=>{n.input.lastTouch=Date.now(),br(n,"pointer")};ut.contextmenu=n=>Tc(n);function _g(n,e){return n.composing?!0:at&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const hk=an?5e3:-1;ft.compositionstart=ft.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Jl(n,!0),n.markCursor=null;else if(Jl(n),fn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(a.nodeType==3){n.domSelection().collapse(a,a.nodeValue.length);break}else i=a,o=-1}}n.input.composing=!0}Ag(n,hk)};ft.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Ag(n,20))};function Ag(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Jl(n),e))}function Mg(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=dk());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function dk(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Jl(n,e=!1){if(!(an&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Mg(n),e||n.docView&&n.docView.dirty){let t=vc(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function pk(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const eo=xt&&wr<15||ji&&cT<604;ut.copy=ft.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=eo?null:t.clipboardData,a=r.content(),{dom:u,text:c}=wg(n,a);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",c)):pk(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function mk(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function gk(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?to(n,r.value,null,i,e):to(n,r.textContent,r.innerHTML,i,e)},50)}function to(n,e,t,r,i){let o=vg(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",c=>c(n,i,o||W.empty)))return!0;if(!o)return!1;let a=mk(o),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Eg(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}ft.paste=(n,e)=>{let t=e;if(n.composing&&!an)return;let r=eo?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&to(n,Eg(r),r.getData("text/html"),i,t)?t.preventDefault():gk(n,t)};class Ig{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const Ng=Jt?"altKey":"ctrlKey";ut.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(ua(t)),a;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof J?i.to-1:i.to))){if(r&&r.mightDrag)a=J.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let p=n.docView.nearestDesc(t.target,!0);p&&p.node.type.spec.draggable&&p!=n.docView&&(a=J.create(n.state.doc,p.posBefore))}}let u=(a||n.state.selection).content(),{dom:c,text:h}=wg(n,u);t.dataTransfer.clearData(),t.dataTransfer.setData(eo?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",eo||t.dataTransfer.setData("text/plain",h),n.dragging=new Ig(u,!t[Ng],a)};ut.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};ft.dragover=ft.dragenter=(n,e)=>e.preventDefault();ft.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(ua(t));if(!i)return;let o=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",v=>{a=v(a,n)}):a=vg(n,Eg(t.dataTransfer),eo?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&!t[Ng]);if(n.someProp("handleDrop",v=>v(n,t,a||W.empty,u))){t.preventDefault();return}if(!a)return;t.preventDefault();let c=a?jm(n.state.doc,o.pos,a):o.pos;c==null&&(c=o.pos);let h=n.state.tr;if(u){let{node:v}=r;v?v.replace(h):h.deleteSelection()}let p=h.mapping.map(c),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,w=h.doc;if(g?h.replaceRangeWith(p,p,a.content.firstChild):h.replaceRange(p,p,a),h.doc.eq(w))return;let C=h.doc.resolve(p);if(g&&J.isSelectable(a.content.firstChild)&&C.nodeAfter&&C.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new J(C));else{let v=h.mapping.map(c);h.mapping.maps[h.mapping.maps.length-1].forEach((k,M,z,K)=>v=K),h.setSelection(Sc(n,C,h.doc.resolve(v)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};ut.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&jn(n)},20))};ut.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};ut.beforeinput=(n,e)=>{if(et&&an&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,jr(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in ft)ut[n]=ft[n];function no(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Kl{constructor(e,t){this.toDOM=e,this.spec=t||ti,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new jt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Kl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&no(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Sr{constructor(e,t){this.attrs=e,this.spec=t||ti}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new jt(o,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Sr&&no(this.attrs,e.attrs)&&no(this.spec,e.spec)}static is(e){return e.type instanceof Sr}destroy(){}}class kc{constructor(e,t){this.attrs=e,this.spec=t||ti}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=o.pos?null:new jt(o.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof kc&&no(this.attrs,e.attrs)&&no(this.spec,e.spec)}destroy(){}}class jt{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new jt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new jt(e,e,new Kl(t,r))}static inline(e,t,r,i){return new jt(e,t,new Sr(r,i))}static node(e,t,r,i){return new jt(e,t,new kc(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Sr}get widget(){return this.type instanceof Kl}}const Fi=[],ti={};class qe{constructor(e,t){this.local=e.length?e:Fi,this.children=t.length?t:Fi}static create(e,t){return t.length?jl(t,e,0,ti):Qe}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,o)}}map(e,t,r){return this==Qe||e.maps.length==0?this:this.mapInner(e,t,0,0,r||ti)}mapInner(e,t,r,i,o){let a;for(let u=0;u<this.local.length;u++){let c=this.local[u].map(e,r,i);c&&c.type.valid(t,c)?(a||(a=[])).push(c):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?yk(this.children,a||[],e,t,r,i,o):a?new qe(a.sort(ni),Fi):Qe}add(e,t){return t.length?this==Qe?qe.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((u,c)=>{let h=c+r,p;if(p=Rg(t,u,h)){for(i||(i=this.children.slice());o<i.length&&i[o]<c;)o+=3;i[o]==c?i[o+2]=i[o+2].addInner(u,p,h+1):i.splice(o,0,c,c+u.nodeSize,jl(p,u,h+1,ti)),o+=3}});let a=Dg(o?Lg(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new qe(a.length?this.local.concat(a).sort(ni):this.local,i||this.children)}remove(e){return e.length==0||this==Qe?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let a,u=r[o]+t,c=r[o+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<c&&(e[p]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(a,u+1);h!=Qe?r[o+2]=h:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,a;o<e.length;o++)if(a=e[o])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new qe(i,r):Qe}forChild(e,t){if(this==Qe)return this;if(t.isLeaf)return qe.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,a=o+t.content.size;for(let u=0;u<this.local.length;u++){let c=this.local[u];if(c.from<a&&c.to>o&&c.type instanceof Sr){let h=Math.max(o,c.from)-o,p=Math.min(a,c.to)-o;h<p&&(i||(i=[])).push(c.copy(h,p))}}if(i){let u=new qe(i.sort(ni),Fi);return r?new mr([u,r]):u}return r||Qe}eq(e){if(this==e)return!0;if(!(e instanceof qe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Oc(this.localsInner(e))}localsInner(e){if(this==Qe)return Fi;if(e.inlineContent||!this.local.some(Sr.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Sr||t.push(this.local[r]);return t}}qe.empty=new qe([],[]);qe.removeOverlap=Oc;const Qe=qe.empty;class mr{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,ti));return mr.from(r)}forChild(e,t){if(t.isLeaf)return qe.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=Qe&&(o instanceof mr?r=r.concat(o.members):r.push(o))}return mr.from(r)}eq(e){if(!(e instanceof mr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let a=0;a<o.length;a++)t.push(o[a])}}return t?Oc(r?t:t.sort(ni)):Fi}static from(e){switch(e.length){case 0:return Qe;case 1:return e[0];default:return new mr(e.every(t=>t instanceof qe)?e:e.reduce((t,r)=>t.concat(r instanceof qe?r:r.members),[]))}}}function yk(n,e,t,r,i,o,a){let u=n.slice();for(let h=0,p=o;h<t.maps.length;h++){let g=0;t.maps[h].forEach((w,C,v,k)=>{let M=k-v-(C-w);for(let z=0;z<u.length;z+=3){let K=u[z+1];if(K<0||w>K+p-g)continue;let j=u[z]+p-g;C>=j?u[z+1]=w<=j?-2:-1:v>=i&&M&&(u[z]+=M,u[z+1]+=M)}g+=M}),p=t.maps[h].map(p,-1)}let c=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){c=!0,u[h+1]=-1;continue}let p=t.map(n[h]+o),g=p-i;if(g<0||g>=r.content.size){c=!0;continue}let w=t.map(n[h+1]+o,-1),C=w-i,{index:v,offset:k}=r.content.findIndex(g),M=r.maybeChild(v);if(M&&k==g&&k+M.nodeSize==C){let z=u[h+2].mapInner(t,M,p+1,n[h]+o+1,a);z!=Qe?(u[h]=g,u[h+1]=C,u[h+2]=z):(u[h+1]=-2,c=!0)}else c=!0}if(c){let h=bk(u,n,e,t,i,o,a),p=jl(h,r,0,a);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,w=0;g<p.children.length;g+=3){let C=p.children[g];for(;w<u.length&&u[w]<C;)w+=3;u.splice(w,0,p.children[g],p.children[g+1],p.children[g+2])}}return new qe(e.sort(ni),u)}function Dg(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new jt(i.from+e,i.to+e,i.type))}return t}function bk(n,e,t,r,i,o,a){function u(c,h){for(let p=0;p<c.local.length;p++){let g=c.local[p].map(r,i,h);g?t.push(g):a.onRemove&&a.onRemove(c.local[p].spec)}for(let p=0;p<c.children.length;p+=3)u(c.children[p+2],c.children[p]+h+1)}for(let c=0;c<n.length;c+=3)n[c+1]==-1&&u(n[c+2],e[c]+o+1);return t}function Rg(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,a;o<n.length;o++)(a=n[o])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[o]=null);return i}function Lg(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function jl(n,e,t,r){let i=[],o=!1;e.forEach((u,c)=>{let h=Rg(n,u,c+t);if(h){o=!0;let p=jl(h,u,t+c+1,r);p!=Qe&&i.push(c,c+u.nodeSize,p)}});let a=Dg(o?Lg(n):n,-t).sort(ni);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new qe(a,i):Qe}function ni(n,e){return n.from-e.from||n.to-e.to}function Oc(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),Bp(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),Bp(e,i,r.copy(o.from,r.to)));break}}}return e}function Bp(n,e,t){for(;e<n.length&&ni(t,n[e])>0;)e++;n.splice(e,0,t)}function yf(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Qe&&e.push(r)}),n.cursorWrapper&&e.push(qe.create(n.state.doc,[n.cursorWrapper.deco])),mr.from(e)}const wk={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},vk=xt&&wr<=11;class Sk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class xk{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Sk,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);xt&&wr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),vk&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,wk)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ap(this.view)){if(this.suppressingSelectionUpdates)return jn(this.view);if(xt&&wr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ii(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=Zs(o))t.add(o);for(let o=e.anchorNode;o;o=Zs(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Ap(e)&&!this.ignoreSelectionChange(r),o=-1,a=-1,u=!1,c=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],c);g&&(o=o<0?g.from:Math.min(g.from,o),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(u=!0))}if(fn&&c.length>1){let p=c.filter(g=>g.nodeName=="BR");if(p.length==2){let g=p[0],w=p[1];g.parentNode&&g.parentNode.parentNode==w.parentNode?w.remove():g.remove()}}let h=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&la(r)&&(h=vc(e))&&h.eq(ae.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,jn(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,a),Ck(e)),this.handleDOMChange(o,a,u,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||jn(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++)t.push(e.addedNodes[p]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(xt&&wr<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:w}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!w||Array.prototype.indexOf.call(e.addedNodes,w)<0)&&(o=w)}let a=i&&i.parentNode==e.target?lt(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),c=o&&o.parentNode==e.target?lt(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,c,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Pp=new WeakMap,zp=!1;function Ck(n){if(!Pp.has(n)&&(Pp.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=fn,zp)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),zp=!0}}function Tk(n){let e;function t(c){c.preventDefault(),c.stopImmediatePropagation(),e=c.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let r=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,u=n.domAtPos(n.state.selection.anchor);return ii(u.node,u.offset,o,a)&&([r,i,o,a]=[o,a,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}}function kk(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:a,to:u}=n.docView.parseRange(e,t),c=n.domSelectionRange(),h,p=c.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:c.anchorOffset}],la(c)||h.push({node:c.focusNode,offset:c.focusOffset})),et&&n.input.lastKeyCode===8)for(let M=o;M>i;M--){let z=r.childNodes[M-1],K=z.pmViewDesc;if(z.nodeName=="BR"&&!K){o=M;break}if(!K||K.size)break}let g=n.state.doc,w=n.someProp("domParser")||Gi.fromSchema(n.state.schema),C=g.resolve(a),v=null,k=w.parse(r,{topNode:C.parent,topMatch:C.parent.contentMatchAt(C.index()),topOpen:!0,from:i,to:o,preserveWhitespace:C.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:Ok,context:C});if(h&&h[0].pos!=null){let M=h[0].pos,z=h[1]&&h[1].pos;z==null&&(z=M),v={anchor:M+a,head:z+a}}return{doc:k,sel:v,from:a,to:u}}function Ok(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(at&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||at&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const _k=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Ak(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let Z=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,dt=vc(n,Z);if(dt&&!n.state.selection.eq(dt)){if(et&&an&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Xn=>Xn(n,jr(13,"Enter"))))return;let Mn=n.state.tr.setSelection(dt);Z=="pointer"?Mn.setMeta("pointer",!0):Z=="key"&&Mn.scrollIntoView(),o&&Mn.setMeta("composition",o),n.dispatch(Mn)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let c=n.state.selection,h=kk(n,e,t),p=n.state.doc,g=p.slice(h.from,h.to),w,C;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(w=n.state.selection.to,C="end"):(w=n.state.selection.from,C="start"),n.input.lastKeyCode=null;let v=Ik(g.content,h.doc.content,h.from,w,C);if((ji&&n.input.lastIOSEnter>Date.now()-225||an)&&i.some(Z=>Z.nodeType==1&&!_k.test(Z.nodeName))&&(!v||v.endA>=v.endB)&&n.someProp("handleKeyDown",Z=>Z(n,jr(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!v)if(r&&c instanceof be&&!c.empty&&c.$head.sameParent(c.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))v={start:c.from,endA:c.to,endB:c.to};else{if(h.sel){let Z=Fp(n,n.state.doc,h.sel);if(Z&&!Z.eq(n.state.selection)){let dt=n.state.tr.setSelection(Z);o&&dt.setMeta("composition",o),n.dispatch(dt)}}return}if(et&&n.cursorWrapper&&h.sel&&h.sel.anchor==n.cursorWrapper.deco.from&&h.sel.head==h.sel.anchor){let Z=v.endB-v.start;h.sel={anchor:h.sel.anchor+Z,head:h.sel.anchor+Z}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&v.start==v.endB&&n.state.selection instanceof be&&(v.start>n.state.selection.from&&v.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?v.start=n.state.selection.from:v.endA<n.state.selection.to&&v.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(v.endB+=n.state.selection.to-v.endA,v.endA=n.state.selection.to)),xt&&wr<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>h.from&&h.doc.textBetween(v.start-h.from-1,v.start-h.from+1)=="  "&&(v.start--,v.endA--,v.endB--);let k=h.doc.resolveNoCache(v.start-h.from),M=h.doc.resolveNoCache(v.endB-h.from),z=p.resolve(v.start),K=k.sameParent(M)&&k.parent.inlineContent&&z.end()>=v.endA,j;if((ji&&n.input.lastIOSEnter>Date.now()-225&&(!K||i.some(Z=>Z.nodeName=="DIV"||Z.nodeName=="P"))||!K&&k.pos<h.doc.content.size&&!k.sameParent(M)&&(j=ae.findFrom(h.doc.resolve(k.pos+1),1,!0))&&j.head==M.pos)&&n.someProp("handleKeyDown",Z=>Z(n,jr(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>v.start&&Ek(p,v.start,v.endA,k,M)&&n.someProp("handleKeyDown",Z=>Z(n,jr(8,"Backspace")))){an&&et&&n.domObserver.suppressSelectionUpdates();return}et&&an&&v.endB==v.start&&(n.input.lastAndroidDelete=Date.now()),an&&!K&&k.start()!=M.start()&&M.parentOffset==0&&k.depth==M.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==v.endA&&(v.endB-=2,M=h.doc.resolveNoCache(v.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(Z){return Z(n,jr(13,"Enter"))})},20));let ge=v.start,ne=v.endA,fe,pe,Te;if(K){if(k.pos==M.pos)xt&&wr<=11&&k.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>jn(n),20)),fe=n.state.tr.delete(ge,ne),pe=p.resolve(v.start).marksAcross(p.resolve(v.endA));else if(v.endA==v.endB&&(Te=Mk(k.parent.content.cut(k.parentOffset,M.parentOffset),z.parent.content.cut(z.parentOffset,v.endA-z.start()))))fe=n.state.tr,Te.type=="add"?fe.addMark(ge,ne,Te.mark):fe.removeMark(ge,ne,Te.mark);else if(k.parent.child(k.index()).isText&&k.index()==M.index()-(M.textOffset?0:1)){let Z=k.parent.textBetween(k.parentOffset,M.parentOffset);if(n.someProp("handleTextInput",dt=>dt(n,ge,ne,Z)))return;fe=n.state.tr.insertText(Z,ge,ne)}}if(fe||(fe=n.state.tr.replace(ge,ne,h.doc.slice(v.start-h.from,v.endB-h.from))),h.sel){let Z=Fp(n,fe.doc,h.sel);Z&&!(et&&an&&n.composing&&Z.empty&&(v.start!=v.endB||n.input.lastAndroidDelete<Date.now()-100)&&(Z.head==ge||Z.head==fe.mapping.map(ne)-1)||xt&&Z.empty&&Z.head==ge)&&fe.setSelection(Z)}pe&&fe.ensureMarks(pe),o&&fe.setMeta("composition",o),n.dispatch(fe.scrollIntoView())}function Fp(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Sc(n,e.resolve(t.anchor),e.resolve(t.head))}function Mk(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,a,u,c;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)o=t[p].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],a="add",c=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&o.length==1)u=o[0],a="remove",c=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(c(e.child(p)));if(P.from(h).eq(n))return{mark:u,type:a}}function Ek(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||bf(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=n.resolve(bf(o,!0,!0));return!a.parent.isTextblock||a.pos>t||bf(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function bf(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Ik(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let c=Math.max(0,o-Math.min(a,u));r-=a+c-o}if(a<o&&n.size<e.size){let c=r<=o&&r>=a?o-r:0;o-=c,o&&o<e.size&&Wp(e.textBetween(o-1,o+1))&&(o+=c?1:-1),u=o+(u-a),a=o}else if(u<o){let c=r<=o&&r>=u?o-r:0;o-=c,o&&o<n.size&&Wp(n.textBetween(o-1,o+1))&&(o+=c?1:-1),a=o+(a-u),u=o}return{start:o,endA:a,endB:u}}function Wp(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class Nk{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ZT,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach($p),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Hp(this),Vp(this),this.nodeViews=Up(this),this.docView=xp(this.state.doc,qp(this),yf(this),this.dom,this),this.domObserver=new xk(this,(r,i,o,a)=>Ak(this,r,i,o,a)),this.domObserver.start(),ek(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Jf(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach($p),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,a=!1;e.storedMarks&&this.composing&&(Mg(this),a=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let C=Up(this);Rk(C,this.nodeViews)&&(this.nodeViews=C,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&Jf(this),this.editable=Hp(this),Vp(this);let c=yf(this),h=qp(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=o||!this.docView.matchesNode(e.doc,h,c);(g||!e.selection.eq(i.selection))&&(a=!0);let w=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&pT(this);if(a){this.domObserver.stop();let C=g&&(xt||et)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Dk(i.selection,e.selection);if(g){let v=et?this.trackWrites=this.domSelectionRange().focusNode:null;(o||!this.docView.update(e.doc,h,c,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=xp(e.doc,h,c,this.dom,this)),v&&!this.trackWrites&&(C=!0)}C||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&FT(this))?jn(this,C):(gg(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():w&&mT(w)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof J){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&gp(this,t.getBoundingClientRect(),e)}else gp(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new Ig(e.slice,e.move,i<0?void 0:J.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let u=o[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(xt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&gT(this.dom),jn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return ST(this,e)}coordsAtPos(e,t=1){return ag(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return OT(this,t||this.state,e)}pasteHTML(e,t){return to(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return to(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(tk(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],yf(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return rk(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return at&&this.root.nodeType===11&&lT(this.dom.ownerDocument)==this.dom?Tk(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function qp(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[jt.node(0,n.state.doc.content.size,e)]}function Vp(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:jt.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Hp(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Dk(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Up(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Rk(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function $p(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const Lk=["p",0],Bk=["blockquote",0],Pk=["hr"],zk=["pre",["code",0]],Fk=["br"],Wk={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return Lk}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM(){return Bk}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return Pk}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(n){return["h"+n.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return zk}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(n){return{src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt")}}}],toDOM(n){let{src:e,alt:t,title:r}=n.attrs;return["img",{src:e,alt:t,title:r}]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return Fk}}},qk=["em",0],Vk=["strong",0],Hk=["code",0],Uk={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(n){return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM(n){let{href:e,title:t}=n.attrs;return["a",{href:e,title:t},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:n=>n.type.name=="em"}],toDOM(){return qk}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name=="strong"},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM(){return Vk}},code:{parseDOM:[{tag:"code"}],toDOM(){return Hk}}},$k=new Fm({nodes:Wk,marks:Uk});var Yl=200,$e=function(){};$e.prototype.append=function(e){return e.length?(e=$e.from(e),!this.length&&e||e.length<Yl&&this.leafAppend(e)||this.length<Yl&&e.leafPrepend(this)||this.appendInner(e)):this};$e.prototype.prepend=function(e){return e.length?$e.from(e).append(this):this};$e.prototype.appendInner=function(e){return new Gk(this,e)};$e.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?$e.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};$e.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};$e.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};$e.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,a){return i.push(e(o,a))},t,r),i};$e.from=function(e){return e instanceof $e?e:e&&e.length?new Bg(e):$e.empty};var Bg=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,a,u){for(var c=o;c<a;c++)if(i(this.values[c],u+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,a,u){for(var c=o-1;c>=a;c--)if(i(this.values[c],u+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Yl)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Yl)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}($e);$e.empty=new Bg([]);var Gk=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,a){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(o,u),a)===!1||o>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,o)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,a){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(o,u)-u,a+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(i,u),o,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}($e);const Jk=500;class un{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let a=e.tr,u,c,h=[],p=[];return this.items.forEach((g,w)=>{if(!g.step){i||(i=this.remapping(r,w+1),o=i.maps.length),o--,p.push(g);return}if(i){p.push(new Sn(g.map));let C=g.step.map(i.slice(o)),v;C&&a.maybeStep(C).doc&&(v=a.mapping.maps[a.mapping.maps.length-1],h.push(new Sn(v,void 0,void 0,h.length+p.length))),o--,v&&i.appendMap(v,o)}else a.maybeStep(g.step);if(g.selection)return u=i?g.selection.map(i.slice(o)):g.selection,c=new un(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:u}}addTransform(e,t,r,i){let o=[],a=this.eventCount,u=this.items,c=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),w=new Sn(e.mapping.maps[p],g,t),C;(C=c&&c.merge(w))&&(w=C,p?o.pop():u=u.slice(0,u.length-1)),o.push(w),t&&(a++,t=void 0),i||(c=w)}let h=a-r.depth;return h>jk&&(u=Kk(u,h),a-=h),new un(u.append(o),a)}remapping(e,t){let r=new qi;return this.items.forEach((i,o)=>{let a=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new un(this.items.append(e.map(t=>new Sn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(w=>{w.selection&&u--},i);let c=t;this.items.forEach(w=>{let C=o.getMirror(--c);if(C==null)return;a=Math.min(a,C);let v=o.maps[C];if(w.step){let k=e.steps[C].invert(e.docs[C]),M=w.selection&&w.selection.map(o.slice(c+1,C));M&&u++,r.push(new Sn(v,k,M))}else r.push(new Sn(v))},i);let h=[];for(let w=t;w<a;w++)h.push(new Sn(o.maps[w]));let p=this.items.slice(0,i).append(h).append(r),g=new un(p,u);return g.emptyItemCount()>Jk&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((a,u)=>{if(u>=e)i.push(a),a.selection&&o++;else if(a.step){let c=a.step.map(t.slice(r)),h=c&&c.getMap();if(r--,h&&t.appendMap(h,r),c){let p=a.selection&&a.selection.map(t.slice(r));p&&o++;let g=new Sn(h.invert(),c,p),w,C=i.length-1;(w=i.length&&i[C].merge(g))?i[C]=w:i.push(g)}}else a.map&&r--},this.items.length,0),new un($e.from(i.reverse()),o)}}un.empty=new un($e.empty,0);function Kk(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Sn{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Sn(t.getMap().invert(),t,this.selection)}}}class pr{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const jk=20;function Yk(n,e,t,r){let i=t.getMeta(xr),o;if(i)return i.historyState;t.getMeta(Qk)&&(n=new pr(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(xr))return a.getMeta(xr).redo?new pr(n.done.addTransform(t,void 0,r,Bl(e)),n.undone,Gp(t.mapping.maps[t.steps.length-1]),n.prevTime,n.prevComposition):new pr(n.done,n.undone.addTransform(t,void 0,r,Bl(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),c=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!Xk(t,n.prevRanges)),h=a?wf(n.prevRanges,t.mapping):Gp(t.mapping.maps[t.steps.length-1]);return new pr(n.done.addTransform(t,c?e.selection.getBookmark():void 0,r,Bl(e)),un.empty,h,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new pr(n.done.rebased(t,o),n.undone.rebased(t,o),wf(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new pr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),wf(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function Xk(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function Gp(n){let e=[];return n.forEach((t,r,i,o)=>e.push(i,o)),e}function wf(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function Pg(n,e,t,r){let i=Bl(e),o=xr.get(e).spec.config,a=(r?n.undone:n.done).popEvent(e,i);if(!a)return;let u=a.selection.resolve(a.transform.doc),c=(r?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),o,i),h=new pr(r?c:a.remaining,r?a.remaining:c,null,0,-1);t(a.transform.setSelection(u).setMeta(xr,{redo:r,historyState:h}).scrollIntoView())}let vf=!1,Jp=null;function Bl(n){let e=n.plugins;if(Jp!=e){vf=!1,Jp=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){vf=!0;break}}return vf}const xr=new ng("history"),Qk=new ng("closeHistory");function zg(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Tr({key:xr,state:{init(){return new pr(un.empty,un.empty,null,0,-1)},apply(e,t,r){return Yk(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?ro:r=="historyRedo"?Yi:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const ro=(n,e)=>{let t=xr.getState(n);return!t||t.done.eventCount==0?!1:(e&&Pg(t,n,e,!1),!0)},Yi=(n,e)=>{let t=xr.getState(n);return!t||t.undone.eventCount==0?!1:(e&&Pg(t,n,e,!0),!0)};var Cr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Zk=typeof navigator<"u"&&/Mac/.test(navigator.platform),eO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ke=0;Ke<10;Ke++)Cr[48+Ke]=Cr[96+Ke]=String(Ke);for(var Ke=1;Ke<=24;Ke++)Cr[Ke+111]="F"+Ke;for(var Ke=65;Ke<=90;Ke++)Cr[Ke]=String.fromCharCode(Ke+32),Xl[Ke]=String.fromCharCode(Ke);for(var Sf in Cr)Xl.hasOwnProperty(Sf)||(Xl[Sf]=Cr[Sf]);function tO(n){var e=Zk&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||eO&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Xl:Cr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const nO=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function rO(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,a;for(let u=0;u<e.length-1;u++){let c=e[u];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))nO?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function iO(n){let e=Object.create(null);for(let t in n)e[rO(t)]=n[t];return e}function xf(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Kf(n){return new Tr({props:{handleKeyDown:Fg(n)}})}function Fg(n){let e=iO(n);return function(t,r){let i=tO(r),o,a=e[xf(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[xf(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Cr[r.keyCode])&&o!=i){let u=e[xf(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}function Rt(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)Wg(n,arguments[e]);return n}function Wg(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Wg(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const qg=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function sO(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const oO=(n,e,t)=>{let r=sO(n,t);if(!r)return!1;let i=Vg(r);if(!i){let a=r.blockRange(),u=a&&lo(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&$g(n,i,e))return!0;if(r.parent.content.size==0&&(Xi(o,"end")||J.isSelectable(o))){let a=gc(n.doc,r.before(),r.after(),W.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(Xi(o,"end")?ae.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):J.create(u.doc,i.pos-o.nodeSize)),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function Xi(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const lO=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=Vg(r)}let a=o&&o.nodeBefore;return!a||!J.isSelectable(a)?!1:(e&&e(n.tr.setSelection(J.create(n.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function Vg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function aO(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const uO=(n,e,t)=>{let r=aO(n,t);if(!r)return!1;let i=Hg(r);if(!i)return!1;let o=i.nodeAfter;if($g(n,i,e))return!0;if(r.parent.content.size==0&&(Xi(o,"start")||J.isSelectable(o))){let a=gc(n.doc,r.before(),r.after(),W.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(Xi(o,"start")?ae.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):J.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},fO=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=Hg(r)}let a=o&&o.nodeAfter;return!a||!J.isSelectable(a)?!1:(e&&e(n.tr.setSelection(J.create(n.doc,o.pos)).scrollIntoView()),!0)};function Hg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const jf=(n,e)=>{let t=n.selection,r=t instanceof J,i;if(r){if(t.node.isTextblock||!es(n.doc,t.from))return!1;i=t.from}else if(i=Km(n.doc,t.from,-1),i==null)return!1;if(e){let o=n.tr.join(i);r&&o.setSelection(J.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},cO=(n,e)=>{let t=n.selection,r;if(t instanceof J){if(t.node.isTextblock||!es(n.doc,t.to))return!1;r=t.to}else if(r=Km(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},Yf=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&lo(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},hO=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function _c(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Ug=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),a=_c(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(e){let u=t.after(),c=n.tr.replaceWith(u,u,a.createAndFill());c.setSelection(ae.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},dO=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Dt||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=_c(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,o.createAndFill());u.setSelection(be.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},pO=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Vi(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&lo(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function mO(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof J&&e.selection.node.isBlock)return!r.parentOffset||!Vi(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){let o=i.parentOffset==i.parent.content.size,a=e.tr;(e.selection instanceof be||e.selection instanceof Dt)&&a.deleteSelection();let u=r.depth==0?null:_c(r.node(-1).contentMatchAt(r.indexAfter(-1))),c=n&&n(i.parent,o),h=c?[c]:o&&u?[{type:u}]:void 0,p=Vi(a.doc,a.mapping.map(r.pos),1,h);if(!h&&!p&&Vi(a.doc,a.mapping.map(r.pos),1,u?[{type:u}]:void 0)&&(u&&(h=[{type:u}]),p=!0),p&&(a.split(a.mapping.map(r.pos),1,h),!o&&!r.parentOffset&&r.parent.type!=u)){let g=a.mapping.map(r.before()),w=a.doc.resolve(g);u&&r.node(-1).canReplaceWith(w.index(),w.index()+1,u)&&a.setNodeMarkup(a.mapping.map(r.before()),u)}t(a.scrollIntoView())}return!0}}const gO=mO(),Xf=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection(J.create(n.doc,i))),!0)},yO=(n,e)=>(e&&e(n.tr.setSelection(new Dt(n.doc))),!0);function bO(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||es(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function $g(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o,a;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(bO(n,e,t))return!0;let u=e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(t){let g=e.pos+i.nodeSize,w=P.empty;for(let k=o.length-1;k>=0;k--)w=P.from(o[k].create(null,w));w=P.from(r.copy(w));let C=n.tr.step(new je(e.pos-1,g,e.pos,g,new W(w,1,0),o.length,!0)),v=g+2*o.length;es(C.doc,v)&&C.join(v),t(C.scrollIntoView())}return!0}let c=ae.findFrom(e,1),h=c&&c.$from.blockRange(c.$to),p=h&&lo(h);if(p!=null&&p>=e.depth)return t&&t(n.tr.lift(h,p).scrollIntoView()),!0;if(u&&Xi(i,"start",!0)&&Xi(r,"end")){let g=r,w=[];for(;w.push(g),!g.isTextblock;)g=g.lastChild;let C=i,v=1;for(;!C.isTextblock;C=C.firstChild)v++;if(g.canReplace(g.childCount,g.childCount,C.content)){if(t){let k=P.empty;for(let z=w.length-1;z>=0;z--)k=P.from(w[z].copy(k));let M=n.tr.step(new je(e.pos-w.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new W(k,w.length,0),0,!0));t(M.scrollIntoView())}return!0}}return!1}function Gg(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(be.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const wO=Gg(-1),vO=Gg(1);function Ql(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,a=i.blockRange(o),u=a&&mc(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function Gs(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(a,u,(c,h)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)i=!0;else{let p=t.doc.resolve(h),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:c}}=t.selection.ranges[a];o.setBlockType(u,c,n,e)}r(o.scrollIntoView())}return!0}}function SO(n,e,t){for(let r=0;r<e.length;r++){let{$from:i,$to:o}=e[r],a=i.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(i.pos,o.pos,u=>{if(a)return!1;a=u.inlineContent&&u.type.allowsMarkType(t)}),a)return!0}return!1}function Jn(n,e=null){return function(t,r){let{empty:i,$cursor:o,ranges:a}=t.selection;if(i&&!o||!SO(t.doc,a,n))return!1;if(r)if(o)n.isInSet(t.storedMarks||o.marks())?r(t.tr.removeStoredMark(n)):r(t.tr.addStoredMark(n.create(e)));else{let u=!1,c=t.tr;for(let h=0;!u&&h<a.length;h++){let{$from:p,$to:g}=a[h];u=t.doc.rangeHasMark(p.pos,g.pos,n)}for(let h=0;h<a.length;h++){let{$from:p,$to:g}=a[h];if(u)c.removeMark(p.pos,g.pos,n);else{let w=p.pos,C=g.pos,v=p.nodeAfter,k=g.nodeBefore,M=v&&v.isText?/^\s*/.exec(v.text)[0].length:0,z=k&&k.isText?/\s*$/.exec(k.text)[0].length:0;w+M<C&&(w+=M,C-=z),c.addMark(w,C,n.create(e))}}r(c.scrollIntoView())}return!0}}function fa(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}let Cf=fa(qg,oO,lO),Kp=fa(qg,uO,fO);const Gn={Enter:fa(hO,dO,pO,gO),"Mod-Enter":Ug,Backspace:Cf,"Mod-Backspace":Cf,"Shift-Backspace":Cf,Delete:Kp,"Mod-Delete":Kp,"Mod-a":yO},Jg={"Ctrl-h":Gn.Backspace,"Alt-Backspace":Gn["Mod-Backspace"],"Ctrl-d":Gn.Delete,"Ctrl-Alt-Backspace":Gn["Mod-Delete"],"Alt-Delete":Gn["Mod-Delete"],"Alt-d":Gn["Mod-Delete"],"Ctrl-a":wO,"Ctrl-e":vO};for(let n in Gn)Jg[n]=Gn[n];const xO=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Kg=xO?Jg:Gn,Js="http://www.w3.org/2000/svg",CO="http://www.w3.org/1999/xlink",Qf="ProseMirror-icon";function TO(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t)|0;return e}function kO(n,e){let t=(n.nodeType==9?n:n.ownerDocument)||document,r=t.createElement("div");if(r.className=Qf,e.path){let{path:i,width:o,height:a}=e,u="pm-icon-"+TO(i).toString(16);t.getElementById(u)||OO(n,u,e);let c=r.appendChild(t.createElementNS(Js,"svg"));c.style.width=o/a+"em",c.appendChild(t.createElementNS(Js,"use")).setAttributeNS(CO,"href",/([^#]*)/.exec(t.location.toString())[1]+"#"+u)}else if(e.dom)r.appendChild(e.dom.cloneNode(!0));else{let{text:i,css:o}=e;r.appendChild(t.createElement("span")).textContent=i||"",o&&(r.firstChild.style.cssText=o)}return r}function OO(n,e,t){let[r,i]=n.nodeType==9?[n,n.body]:[n.ownerDocument||document,n],o=r.getElementById(Qf+"-collection");o||(o=r.createElementNS(Js,"svg"),o.id=Qf+"-collection",o.style.display="none",i.insertBefore(o,i.firstChild));let a=r.createElementNS(Js,"symbol");a.id=e,a.setAttribute("viewBox","0 0 "+t.width+" "+t.height),a.appendChild(r.createElementNS(Js,"path")).setAttribute("d",t.path),o.appendChild(a)}const St="ProseMirror-menu";class cn{constructor(e){this.spec=e}render(e){let t=this.spec,r=t.render?t.render(e):t.icon?kO(e.root,t.icon):t.label?Rt("div",null,io(e,t.label)):null;if(!r)throw new RangeError("MenuItem without icon or label property");if(t.title){const o=typeof t.title=="function"?t.title(e.state):t.title;r.setAttribute("title",io(e,o))}t.class&&r.classList.add(t.class),t.css&&(r.style.cssText+=t.css),r.addEventListener("mousedown",o=>{o.preventDefault(),r.classList.contains(St+"-disabled")||t.run(e.state,e.dispatch,e,o)});function i(o){if(t.select){let u=t.select(o);if(r.style.display=u?"":"none",!u)return!1}let a=!0;if(t.enable&&(a=t.enable(o)||!1,Zf(r,St+"-disabled",!a)),t.active){let u=a&&t.active(o)||!1;Zf(r,St+"-active",u)}return!0}return{dom:r,update:i}}}function io(n,e){return n._props.translate?n._props.translate(e):e}let Ks={time:0,node:null};function jg(n){Ks.time=Date.now(),Ks.node=n.target}function Yg(n){return Date.now()-100<Ks.time&&Ks.node&&n.contains(Ks.node)}class jp{constructor(e,t={}){this.options=t,this.options=t||{},this.content=Array.isArray(e)?e:[e]}render(e){let t=Xg(this.content,e),r=e.dom.ownerDocument.defaultView||window,i=Rt("div",{class:St+"-dropdown "+(this.options.class||""),style:this.options.css},io(e,this.options.label||""));this.options.title&&i.setAttribute("title",io(e,this.options.title));let o=Rt("div",{class:St+"-dropdown-wrap"},i),a=null,u=null,c=()=>{a&&a.close()&&(a=null,r.removeEventListener("mousedown",u))};i.addEventListener("mousedown",p=>{p.preventDefault(),jg(p),a?c():(a=this.expand(o,t.dom),r.addEventListener("mousedown",u=()=>{Yg(o)||c()}))});function h(p){let g=t.update(p);return o.style.display=g?"":"none",g}return{dom:o,update:h}}expand(e,t){let r=Rt("div",{class:St+"-dropdown-menu "+(this.options.class||"")},t),i=!1;function o(){return i?!1:(i=!0,e.removeChild(r),!0)}return e.appendChild(r),{close:o,node:r}}}function Xg(n,e){let t=[],r=[];for(let i=0;i<n.length;i++){let{dom:o,update:a}=n[i].render(e);t.push(Rt("div",{class:St+"-dropdown-item"},o)),r.push(a)}return{dom:t,update:Qg(r,t)}}function Qg(n,e){return t=>{let r=!1;for(let i=0;i<n.length;i++){let o=n[i](t);e[i].style.display=o?"":"none",o&&(r=!0)}return r}}class _O{constructor(e,t={}){this.options=t,this.content=Array.isArray(e)?e:[e]}render(e){let t=Xg(this.content,e),r=e.dom.ownerDocument.defaultView||window,i=Rt("div",{class:St+"-submenu-label"},io(e,this.options.label||"")),o=Rt("div",{class:St+"-submenu-wrap"},i,Rt("div",{class:St+"-submenu"},t.dom)),a=null;i.addEventListener("mousedown",c=>{c.preventDefault(),jg(c),Zf(o,St+"-submenu-wrap-active",!1),a||r.addEventListener("mousedown",a=()=>{Yg(o)||(o.classList.remove(St+"-submenu-wrap-active"),r.removeEventListener("mousedown",a),a=null)})});function u(c){let h=t.update(c);return o.style.display=h?"":"none",h}return{dom:o,update:u}}}function AO(n,e){let t=document.createDocumentFragment(),r=[],i=[];for(let a=0;a<e.length;a++){let u=e[a],c=[],h=[];for(let p=0;p<u.length;p++){let{dom:g,update:w}=u[p].render(n),C=Rt("span",{class:St+"item"},g);t.appendChild(C),h.push(C),c.push(w)}c.length&&(r.push(Qg(c,h)),a<e.length-1&&i.push(t.appendChild(MO())))}function o(a){let u=!1,c=!1;for(let h=0;h<r.length;h++){let p=r[h](a);h&&(i[h-1].style.display=c&&p?"":"none"),c=p,p&&(u=!0)}return u}return{dom:t,update:o}}function MO(){return Rt("span",{class:St+"separator"})}const Kt={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"⬚",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},EO=new cn({title:"Join with above block",run:jf,select:n=>jf(n),icon:Kt.join}),IO=new cn({title:"Lift out of enclosing block",run:Yf,select:n=>Yf(n),icon:Kt.lift}),NO=new cn({title:"Select parent node",run:Xf,select:n=>Xf(n),icon:Kt.selectParentNode});let DO=new cn({title:"Undo last change",run:ro,enable:n=>ro(n),icon:Kt.undo}),RO=new cn({title:"Redo last undone change",run:Yi,enable:n=>Yi(n),icon:Kt.redo});function LO(n,e){let t={run(r,i){return Ql(n,e.attrs)(r,i)},select(r){return Ql(n,e.attrs)(r)}};for(let r in e)t[r]=e[r];return new cn(t)}function Tf(n,e){let t=Gs(n,e.attrs),r={run:t,enable(i){return t(i)},active(i){let{$from:o,to:a,node:u}=i.selection;return u?u.hasMarkup(n,e.attrs):a<=o.end()&&o.parent.hasMarkup(n,e.attrs)}};for(let i in e)r[i]=e[i];return new cn(r)}function Zf(n,e,t){t?n.classList.add(e):n.classList.remove(e)}const Al="ProseMirror-menubar";function BO(){if(typeof navigator>"u")return!1;let n=navigator.userAgent;return!/Edge\/\d/.test(n)&&/AppleWebKit/.test(n)&&/Mobile\/\w+/.test(n)}function Zg(n){return new Tr({view(e){return new PO(e,n)}})}class PO{constructor(e,t){this.editorView=e,this.options=t,this.spacer=null,this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1,this.scrollHandler=null,this.wrapper=Rt("div",{class:Al+"-wrapper"}),this.menu=this.wrapper.appendChild(Rt("div",{class:Al})),this.menu.className=Al,e.dom.parentNode&&e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom);let{dom:r,update:i}=AO(this.editorView,this.options.content);if(this.contentUpdate=i,this.menu.appendChild(r),this.update(),t.floating&&!BO()){this.updateFloat();let o=WO(this.wrapper);this.scrollHandler=a=>{let u=this.editorView.root;(u.body||u).contains(this.wrapper)?this.updateFloat(a.target.getBoundingClientRect?a.target:void 0):o.forEach(c=>c.removeEventListener("scroll",this.scrollHandler))},o.forEach(a=>a.addEventListener("scroll",this.scrollHandler))}}update(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))}updateScrollCursor(){let e=this.editorView.root.getSelection();if(!e.focusNode)return;let t=e.getRangeAt(0).getClientRects(),r=t[zO(e)?0:t.length-1];if(!r)return;let i=this.menu.getBoundingClientRect();if(r.top<i.bottom&&r.bottom>i.top){let o=FO(this.wrapper);o&&(o.scrollTop-=i.bottom-r.top)}}updateFloat(e){let t=this.wrapper,r=t.getBoundingClientRect(),i=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(r.top>=i||r.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{let o=(t.offsetWidth-t.clientWidth)/2;this.menu.style.left=r.left+o+"px",this.menu.style.display=r.top>(this.editorView.dom.ownerDocument.defaultView||window).innerHeight?"none":"",e&&(this.menu.style.top=i+"px")}else if(r.top<i&&r.bottom>=this.menu.offsetHeight+10){this.floating=!0;let o=this.menu.getBoundingClientRect();this.menu.style.left=o.left+"px",this.menu.style.width=o.width+"px",e&&(this.menu.style.top=i+"px"),this.menu.style.position="fixed",this.spacer=Rt("div",{class:Al+"-spacer",style:`height: ${o.height}px`}),t.insertBefore(this.spacer,this.menu)}}destroy(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)}}function zO(n){return n.anchorNode==n.focusNode?n.anchorOffset>n.focusOffset:n.anchorNode.compareDocumentPosition(n.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}function FO(n){for(let e=n.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}function WO(n){let e=[n.ownerDocument.defaultView||window];for(let t=n.parentNode;t;t=t.parentNode)e.push(t);return e}function qO(n={}){return new Tr({view(e){return new VO(e,n)}})}class VO{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=a=>{this[i](a)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let u=e.nodeBefore,c=e.nodeAfter;if(u||c){let h=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(h){let p=h.getBoundingClientRect(),g=u?p.bottom:p.top;u&&c&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:p.left,right:p.right,top:g-this.width/2,bottom:g+this.width/2}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos);r={left:u.left-this.width/2,right:u.left+this.width/2,top:u.top,bottom:u.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let o,a;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,a=-pageYOffset;else{let u=i.getBoundingClientRect();o=u.left-i.scrollLeft,a=u.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-a+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!o){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=jm(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}class Ee extends ae{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ee.valid(r)?new Ee(r):ae.near(r)}content(){return W.empty}eq(e){return e instanceof Ee&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ee(e.resolve(t.pos))}getBookmark(){return new Ac(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!HO(e)||!UO(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ee.valid(e))return e;let i=e.pos,o=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){o=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let c=e.doc.resolve(i);if(Ee.valid(c))return c}for(;;){let a=t>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!J.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=a,i+=t;let u=e.doc.resolve(i);if(Ee.valid(u))return u}return null}}}Ee.prototype.visible=!1;Ee.findFrom=Ee.findGapCursorFrom;ae.jsonID("gapcursor",Ee);class Ac{constructor(e){this.pos=e}map(e){return new Ac(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ee.valid(t)?new Ee(t):ae.near(t)}}function HO(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function UO(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function $O(){return new Tr({props:{decorations:jO,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ee.valid(t)?new Ee(t):null},handleClick:JO,handleKeyDown:GO,handleDOMEvents:{beforeinput:KO}}})}const GO=Fg({ArrowLeft:Ml("horiz",-1),ArrowRight:Ml("horiz",1),ArrowUp:Ml("vert",-1),ArrowDown:Ml("vert",1)});function Ml(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let a=r.selection,u=e>0?a.$to:a.$from,c=a.empty;if(a instanceof be){if(!o.endOfTextblock(t)||u.depth==0)return!1;c=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=Ee.findGapCursorFrom(u,e,c);return h?(i&&i(r.tr.setSelection(new Ee(h))),!0):!1}}function JO(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ee.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&J.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ee(r))),!0)}function KO(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ee))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=P.empty;for(let a=r.length-1;a>=0;a--)i=P.from(r[a].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new W(i,0,0));return o.setSelection(be.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function jO(n){if(!(n.selection instanceof Ee))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",qe.create(n.doc,[jt.widget(n.selection.head,e,{key:"gapcursor"})])}const YO=["ol",0],XO=["ul",0],QO=["li",0],ZO={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs(n){return{order:n.hasAttribute("start")?+n.getAttribute("start"):1}}}],toDOM(n){return n.attrs.order==1?YO:["ol",{start:n.attrs.order},0]}},e_={parseDOM:[{tag:"ul"}],toDOM(){return XO}},t_={parseDOM:[{tag:"li"}],toDOM(){return QO},defining:!0};function kf(n,e){let t={};for(let r in n)t[r]=n[r];for(let r in e)t[r]=e[r];return t}function n_(n,e,t){return n.append({ordered_list:kf(ZO,{content:"list_item+",group:t}),bullet_list:kf(e_,{content:"list_item+",group:t}),list_item:kf(t_,{content:e})})}function ec(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,a=i.blockRange(o),u=!1,c=a;if(!a)return!1;if(a.depth>=2&&i.node(a.depth-1).type.compatibleContent(n)&&a.startIndex==0){if(i.index(a.depth-1)==0)return!1;let p=t.doc.resolve(a.start-2);c=new Vl(p,p,a.depth),a.endIndex<a.parent.childCount&&(a=new Vl(i,t.doc.resolve(o.end(a.depth)),a.depth)),u=!0}let h=mc(c,n,e,a);return h?(r&&r(r_(t.tr,a,h,u,n).scrollIntoView()),!0):!1}}function r_(n,e,t,r,i){let o=P.empty;for(let p=t.length-1;p>=0;p--)o=P.from(t[p].type.create(t[p].attrs,o));n.step(new je(e.start-(r?2:0),e.end,e.start,e.end,new W(o,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==i&&(a=p+1);let u=t.length-a,c=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,g=e.endIndex,w=!0;p<g;p++,w=!1)!w&&Vi(n.doc,c,u)&&(n.split(c,u),c+=2*u),c+=h.child(p).nodeSize;return n}function i_(n,e){return function(t,r){let{$from:i,$to:o,node:a}=t.selection;if(a&&a.isBlock||i.depth<2||!i.sameParent(o))return!1;let u=i.node(-1);if(u.type!=n)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let g=P.empty,w=i.index(-1)?1:i.index(-2)?2:3;for(let z=i.depth-w;z>=i.depth-3;z--)g=P.from(i.node(z).copy(g));let C=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;g=g.append(P.from(n.createAndFill()));let v=i.before(i.depth-(w-1)),k=t.tr.replace(v,i.after(-C),new W(g,4-w,0)),M=-1;k.doc.nodesBetween(v,k.doc.content.size,(z,K)=>{if(M>-1)return!1;z.isTextblock&&z.content.size==0&&(M=K+1)}),M>-1&&k.setSelection(ae.near(k.doc.resolve(M))),r(k.scrollIntoView())}return!0}let c=o.pos==i.end()?u.contentMatchAt(0).defaultType:null,h=t.tr.delete(i.pos,o.pos),p=c?[e?{type:n,attrs:e}:null,{type:c}]:void 0;return Vi(h.doc,i.pos,2,p)?(r&&r(h.split(i.pos,2,p).scrollIntoView()),!0):!1}}function s_(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?o_(e,t,n,o):l_(e,t,o):!0:!1}}function o_(n,e,t,r){let i=n.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new je(o-1,a,o,a,new W(P.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Vl(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const u=lo(r);if(u==null)return!1;i.lift(r,u);let c=i.mapping.map(o,-1)-1;return es(i.doc,c)&&i.join(c),e(i.scrollIntoView()),!0}function l_(n,e,t){let r=n.tr,i=t.parent;for(let C=t.end,v=t.endIndex-1,k=t.startIndex;v>k;v--)C-=i.child(v).nodeSize,r.delete(C-1,C+1);let o=r.doc.resolve(t.start),a=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,c=t.endIndex==i.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,a.content.append(c?P.empty:P.from(i))))return!1;let g=o.pos,w=g+a.nodeSize;return r.step(new je(g-(u?1:0),w+(c?1:0),g+1,w-1,new W((u?P.empty:P.from(i.copy(P.empty))).append(c?P.empty:P.from(i.copy(P.empty))),u?0:1,c?0:1),u?0:1)),e(r.scrollIntoView()),!0}function a_(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let u=o.parent,c=u.child(a-1);if(c.type!=n)return!1;if(t){let h=c.lastChild&&c.lastChild.type==u.type,p=P.from(h?n.create():null),g=new W(P.from(n.create(null,P.from(u.type.create(null,p)))),h?3:1,0),w=o.start,C=o.end;t(e.tr.step(new je(w-(h?3:1),C,w,C,g,1,!0)).scrollIntoView())}return!0}}class Or{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?u_(t):t,this.undoable=r.undoable!==!1}}function u_(n){return function(e,t,r,i){let o=n;if(t[1]){let a=t[0].lastIndexOf(t[1]);o+=t[0].slice(a+t[1].length),r+=a;let u=r-i;u>0&&(o=t[0].slice(a-u,a)+o,r=i)}return e.tr.insertText(o,r,i)}}const f_=500;function c_({rules:n}){let e=new Tr({state:{init(){return null},apply(t,r){let i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,o){return Yp(t,r,i,o,n,e)},handleDOMEvents:{compositionend:t=>{setTimeout(()=>{let{$cursor:r}=t.state.selection;r&&Yp(t,r.pos,r.pos,"",n,e)})}}},isInputRules:!0});return e}function Yp(n,e,t,r,i,o){if(n.composing)return!1;let a=n.state,u=a.doc.resolve(e);if(u.parent.type.spec.code)return!1;let c=u.parent.textBetween(Math.max(0,u.parentOffset-f_),u.parentOffset,null,"￼")+r;for(let h=0;h<i.length;h++){let p=i[h],g=p.match.exec(c),w=g&&p.handler(a,g,e-(g[0].length-r.length),t);if(w)return p.undoable&&w.setMeta(o,{transform:w,from:e,to:t,text:r}),n.dispatch(w),!0}return!1}const h_=(n,e)=>{let t=n.plugins;for(let r=0;r<t.length;r++){let i=t[r],o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){let a=n.tr,u=o.transform;for(let c=u.steps.length-1;c>=0;c--)a.step(u.steps[c].invert(u.docs[c]));if(o.text){let c=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,n.schema.text(o.text,c))}else a.delete(o.from,o.to);e(a)}return!0}}return!1},d_=new Or(/--$/,"—"),p_=new Or(/\.\.\.$/,"…"),m_=new Or(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),g_=new Or(/"$/,"”"),y_=new Or(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),b_=new Or(/'$/,"’"),w_=[m_,g_,y_,b_];function Mc(n,e,t=null,r){return new Or(n,(i,o,a,u)=>{let c=t instanceof Function?t(o):t,h=i.tr.delete(a,u),p=h.doc.resolve(a),g=p.blockRange(),w=g&&mc(g,e,c);if(!w)return null;h.wrap(g,w);let C=h.doc.resolve(a-1).nodeBefore;return C&&C.type==e&&es(h.doc,a-1)&&(!r||r(o,C))&&h.join(a-1),h})}function e0(n,e,t=null){return new Or(n,(r,i,o,a)=>{let u=r.doc.resolve(o),c=t instanceof Function?t(i):t;return u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),e)?r.tr.delete(o,a).setBlockType(o,o,e,c):null})}const El="ProseMirror-prompt";function t0(n){let e=document.body.appendChild(document.createElement("div"));e.className=El;let t=w=>{e.contains(w.target)||r()};setTimeout(()=>window.addEventListener("mousedown",t),50);let r=()=>{window.removeEventListener("mousedown",t),e.parentNode&&e.parentNode.removeChild(e)},i=[];for(let w in n.fields)i.push(n.fields[w].render());let o=document.createElement("button");o.type="submit",o.className=El+"-submit",o.textContent="OK";let a=document.createElement("button");a.type="button",a.className=El+"-cancel",a.textContent="Cancel",a.addEventListener("click",r);let u=e.appendChild(document.createElement("form"));n.title&&(u.appendChild(document.createElement("h5")).textContent=n.title),i.forEach(w=>{u.appendChild(document.createElement("div")).appendChild(w)});let c=u.appendChild(document.createElement("div"));c.className=El+"-buttons",c.appendChild(o),c.appendChild(document.createTextNode(" ")),c.appendChild(a);let h=e.getBoundingClientRect();e.style.top=(window.innerHeight-h.height)/2+"px",e.style.left=(window.innerWidth-h.width)/2+"px";let p=()=>{let w=v_(n.fields,i);w&&(r(),n.callback(w))};u.addEventListener("submit",w=>{w.preventDefault(),p()}),u.addEventListener("keydown",w=>{w.keyCode==27?(w.preventDefault(),r()):w.keyCode==13&&!(w.ctrlKey||w.metaKey||w.shiftKey)?(w.preventDefault(),p()):w.keyCode==9&&window.setTimeout(()=>{e.contains(document.activeElement)||r()},500)});let g=u.elements[0];g&&g.focus()}function v_(n,e){let t=Object.create(null),r=0;for(let i in n){let o=n[i],a=e[r++],u=o.read(a),c=o.validate(u);if(c)return S_(a,c),null;t[i]=o.clean(u)}return t}function S_(n,e){let t=n.parentNode,r=t.appendChild(document.createElement("div"));r.style.left=n.offsetLeft+n.offsetWidth+2+"px",r.style.top=n.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=e,setTimeout(()=>t.removeChild(r),1500)}class x_{constructor(e){this.options=e}read(e){return e.value}validateType(e){return null}validate(e){return!e&&this.options.required?"Required field":this.validateType(e)||(this.options.validate?this.options.validate(e):null)}clean(e){return this.options.clean?this.options.clean(e):e}}class js extends x_{render(){let e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.value=this.options.value||"",e.autocomplete="off",e}}function n0(n,e){let t=n.selection.$from;for(let r=t.depth;r>=0;r--){let i=t.index(r);if(t.node(r).canReplaceWith(i,i,e))return!0}return!1}function C_(n){return new cn({title:"Insert image",label:"Image",enable(e){return n0(e,n)},run(e,t,r){let{from:i,to:o}=e.selection,a=null;e.selection instanceof J&&e.selection.node.type==n&&(a=e.selection.node.attrs),t0({title:"Insert image",fields:{src:new js({label:"Location",required:!0,value:a&&a.src}),title:new js({label:"Title",value:a&&a.title}),alt:new js({label:"Description",value:a?a.alt:e.doc.textBetween(i,o," ")})},callback(u){r.dispatch(r.state.tr.replaceSelectionWith(n.createAndFill(u))),r.focus()}})}})}function r0(n,e){let t={label:e.title,run:n};for(let r in e)t[r]=e[r];return!e.enable&&!e.select&&(t[e.enable?"enable":"select"]=r=>n(r)),new cn(t)}function tc(n,e){let{from:t,$from:r,to:i,empty:o}=n.selection;return o?!!e.isInSet(n.storedMarks||r.marks()):n.doc.rangeHasMark(t,i,e)}function Of(n,e){let t={active(r){return tc(r,n)}};for(let r in e)t[r]=e[r];return r0(Jn(n),t)}function T_(n){return new cn({title:"Add or remove link",icon:Kt.link,active(e){return tc(e,n)},enable(e){return!e.selection.empty},run(e,t,r){if(tc(e,n))return Jn(n)(e,t),!0;t0({title:"Create a link",fields:{href:new js({label:"Link target",required:!0}),title:new js({label:"Title"})},callback(i){Jn(n,i)(r.state,r.dispatch),r.focus()}})}})}function Xp(n,e){return r0(ec(n,e.attrs),e)}function i0(n){let e={},t;(t=n.marks.strong)&&(e.toggleStrong=Of(t,{title:"Toggle strong style",icon:Kt.strong})),(t=n.marks.em)&&(e.toggleEm=Of(t,{title:"Toggle emphasis",icon:Kt.em})),(t=n.marks.code)&&(e.toggleCode=Of(t,{title:"Toggle code font",icon:Kt.code})),(t=n.marks.link)&&(e.toggleLink=T_(t));let r;if((r=n.nodes.image)&&(e.insertImage=C_(r)),(r=n.nodes.bullet_list)&&(e.wrapBulletList=Xp(r,{title:"Wrap in bullet list",icon:Kt.bulletList})),(r=n.nodes.ordered_list)&&(e.wrapOrderedList=Xp(r,{title:"Wrap in ordered list",icon:Kt.orderedList})),(r=n.nodes.blockquote)&&(e.wrapBlockQuote=LO(r,{title:"Wrap in block quote",icon:Kt.blockquote})),(r=n.nodes.paragraph)&&(e.makeParagraph=Tf(r,{title:"Change to paragraph",label:"Plain"})),(r=n.nodes.code_block)&&(e.makeCodeBlock=Tf(r,{title:"Change to code block",label:"Code"})),r=n.nodes.heading)for(let o=1;o<=10;o++)e["makeHead"+o]=Tf(r,{title:"Change to heading "+o,label:"Level "+o,attrs:{level:o}});if(r=n.nodes.horizontal_rule){let o=r;e.insertHorizontalRule=new cn({title:"Insert horizontal rule",label:"Horizontal rule",enable(a){return n0(a,o)},run(a,u){u(a.tr.replaceSelectionWith(o.create()))}})}let i=o=>o.filter(a=>a);return e.insertMenu=new jp(i([e.insertImage,e.insertHorizontalRule]),{label:"Insert"}),e.typeMenu=new jp(i([e.makeParagraph,e.makeCodeBlock,e.makeHead1&&new _O(i([e.makeHead1,e.makeHead2,e.makeHead3,e.makeHead4,e.makeHead5,e.makeHead6]),{label:"Heading"})]),{label:"Type..."}),e.inlineMenu=[i([e.toggleStrong,e.toggleEm,e.toggleCode,e.toggleLink])],e.blockMenu=[i([e.wrapBulletList,e.wrapOrderedList,e.wrapBlockQuote,EO,IO,NO])],e.fullMenu=e.inlineMenu.concat([[e.insertMenu,e.typeMenu]],[[DO,RO]],e.blockMenu),e}const Qp=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function s0(n,e){let t={},r;function i(o,a){if(e){let u=e[o];if(u===!1)return;u&&(o=u)}t[o]=a}if(i("Mod-z",ro),i("Shift-Mod-z",Yi),i("Backspace",h_),Qp||i("Mod-y",Yi),i("Alt-ArrowUp",jf),i("Alt-ArrowDown",cO),i("Mod-BracketLeft",Yf),i("Escape",Xf),(r=n.marks.strong)&&(i("Mod-b",Jn(r)),i("Mod-B",Jn(r))),(r=n.marks.em)&&(i("Mod-i",Jn(r)),i("Mod-I",Jn(r))),(r=n.marks.code)&&i("Mod-`",Jn(r)),(r=n.nodes.bullet_list)&&i("Shift-Ctrl-8",ec(r)),(r=n.nodes.ordered_list)&&i("Shift-Ctrl-9",ec(r)),(r=n.nodes.blockquote)&&i("Ctrl->",Ql(r)),r=n.nodes.hard_break){let o=r,a=fa(Ug,(u,c)=>(c&&c(u.tr.replaceSelectionWith(o.create()).scrollIntoView()),!0));i("Mod-Enter",a),i("Shift-Enter",a),Qp&&i("Ctrl-Enter",a)}if((r=n.nodes.list_item)&&(i("Enter",i_(r)),i("Mod-[",s_(r)),i("Mod-]",a_(r))),(r=n.nodes.paragraph)&&i("Shift-Ctrl-0",Gs(r)),(r=n.nodes.code_block)&&i("Shift-Ctrl-\\",Gs(r)),r=n.nodes.heading)for(let o=1;o<=6;o++)i("Shift-Ctrl-"+o,Gs(r,{level:o}));if(r=n.nodes.horizontal_rule){let o=r;i("Mod-_",(a,u)=>(u&&u(a.tr.replaceSelectionWith(o.create()).scrollIntoView()),!0))}return t}function k_(n){return Mc(/^\s*>\s$/,n)}function O_(n){return Mc(/^(\d+)\.\s$/,n,e=>({order:+e[1]}),(e,t)=>t.childCount+t.attrs.order==+e[1])}function __(n){return Mc(/^\s*([-+*])\s$/,n)}function A_(n){return e0(/^```$/,n)}function M_(n,e){return e0(new RegExp("^(#{1,"+e+"})\\s$"),n,t=>({level:t[1].length}))}function E_(n){let e=w_.concat(p_,d_),t;return(t=n.nodes.blockquote)&&e.push(k_(t)),(t=n.nodes.ordered_list)&&e.push(O_(t)),(t=n.nodes.bullet_list)&&e.push(__(t)),(t=n.nodes.code_block)&&e.push(A_(t)),(t=n.nodes.heading)&&e.push(M_(t,6)),c_({rules:e})}function I_(n){let e=[E_(n.schema),Kf(s0(n.schema,n.mapKeys)),Kf(Kg),qO(),$O()];return n.menuBar!==!1&&e.push(Zg({floating:n.floatingMenu!==!1,content:n.menuContent||i0(n.schema).fullMenu})),n.history!==!1&&e.push(zg()),e.concat(new Tr({props:{attributes:{class:"ProseMirror-example-setup-style"}}}))}var Ve={},Ec={},Ic={},fo={},ct={};Object.defineProperty(ct,"__esModule",{value:!0});var N_=`
`;ct.NewLine=N_;var nc;(function(n){n.Ordered="ordered",n.Bullet="bullet",n.Checked="checked",n.Unchecked="unchecked"})(nc||(nc={}));ct.ListType=nc;var rc;(function(n){n.Sub="sub",n.Super="super"})(rc||(rc={}));ct.ScriptType=rc;var ic;(function(n){n.Rtl="rtl"})(ic||(ic={}));ct.DirectionType=ic;var sc;(function(n){n.Left="left",n.Center="center",n.Right="right",n.Justify="justify"})(sc||(sc={}));ct.AlignType=sc;var oc;(function(n){n.Image="image",n.Video="video",n.Formula="formula",n.Text="text"})(oc||(oc={}));ct.DataType=oc;var lc;(function(n){n.Block="block",n.InlineGroup="inline-group",n.List="list",n.Video="video",n.Table="table"})(lc||(lc={}));ct.GroupType=lc;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});var D_=function(){function n(e,t){this.type=e,this.value=t}return n}();ts.InsertDataQuill=D_;var R_=function(){function n(e,t){this.type=e,this.value=t}return n}();ts.InsertDataCustom=R_;var Zl={exports:{}};Zl.exports;(function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,u="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",p="[object Boolean]",g="[object Date]",w="[object Error]",C="[object Function]",v="[object GeneratorFunction]",k="[object Map]",M="[object Number]",z="[object Null]",K="[object Object]",j="[object Promise]",ge="[object Proxy]",ne="[object RegExp]",fe="[object Set]",pe="[object String]",Te="[object Symbol]",Z="[object Undefined]",dt="[object WeakMap]",Mn="[object ArrayBuffer]",Xn="[object DataView]",ha="[object Float32Array]",po="[object Float64Array]",da="[object Int8Array]",pa="[object Int16Array]",En="[object Int32Array]",hn="[object Uint8Array]",ma="[object Uint8ClampedArray]",li="[object Uint16Array]",Lt="[object Uint32Array]",ga=/[\\^$.*+?()[\]{}|]/g,ya=/^\[object .+?Constructor\]$/,ba=/^(?:0|[1-9]\d*)$/,ce={};ce[ha]=ce[po]=ce[da]=ce[pa]=ce[En]=ce[hn]=ce[ma]=ce[li]=ce[Lt]=!0,ce[u]=ce[c]=ce[Mn]=ce[p]=ce[Xn]=ce[g]=ce[w]=ce[C]=ce[k]=ce[M]=ce[K]=ce[ne]=ce[fe]=ce[pe]=ce[dt]=!1;var _r=typeof Re=="object"&&Re&&Re.Object===Object&&Re,wa=typeof self=="object"&&self&&self.Object===Object&&self,nt=_r||wa||Function("return this")(),Qn=e&&!e.nodeType&&e,mo=Qn&&!0&&n&&!n.nodeType&&n,Ar=mo&&mo.exports===Qn,Zn=Ar&&_r.process,rs=function(){try{return Zn&&Zn.binding&&Zn.binding("util")}catch{}}(),pt=rs&&rs.isTypedArray;function Mr(S,_){for(var L=-1,q=S==null?0:S.length,Se=0,X=[];++L<q;){var ke=S[L];_(ke,L,S)&&(X[Se++]=ke)}return X}function va(S,_){for(var L=-1,q=_.length,Se=S.length;++L<q;)S[Se+L]=_[L];return S}function Zt(S,_){for(var L=-1,q=S==null?0:S.length;++L<q;)if(_(S[L],L,S))return!0;return!1}function go(S,_){for(var L=-1,q=Array(S);++L<S;)q[L]=_(L);return q}function Sa(S){return function(_){return S(_)}}function Er(S,_){return S.has(_)}function Ct(S,_){return S==null?void 0:S[_]}function Ir(S){var _=-1,L=Array(S.size);return S.forEach(function(q,Se){L[++_]=[Se,q]}),L}function ai(S,_){return function(L){return S(_(L))}}function xa(S){var _=-1,L=Array(S.size);return S.forEach(function(q){L[++_]=q}),L}var Nr=Array.prototype,Ca=Function.prototype,dn=Object.prototype,pn=nt["__core-js_shared__"],ui=Ca.toString,mt=dn.hasOwnProperty,fi=function(){var S=/[^.]+$/.exec(pn&&pn.keys&&pn.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),ci=dn.toString,is=RegExp("^"+ui.call(mt).replace(ga,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hi=Ar?nt.Buffer:void 0,er=nt.Symbol,di=nt.Uint8Array,pi=dn.propertyIsEnumerable,Ta=Nr.splice,In=er?er.toStringTag:void 0,yo=Object.getOwnPropertySymbols,bo=hi?hi.isBuffer:void 0,wo=ai(Object.keys,Object),ss=Tt(nt,"DataView"),Dr=Tt(nt,"Map"),ls=Tt(nt,"Promise"),as=Tt(nt,"Set"),mi=Tt(nt,"WeakMap"),Rr=Tt(Object,"create"),ka=Rn(ss),Oa=Rn(Dr),us=Rn(ls),_a=Rn(as),fs=Rn(mi),vo=er?er.prototype:void 0,cs=vo?vo.valueOf:void 0;function Nn(S){var _=-1,L=S==null?0:S.length;for(this.clear();++_<L;){var q=S[_];this.set(q[0],q[1])}}function Aa(){this.__data__=Rr?Rr(null):{},this.size=0}function Ma(S){var _=this.has(S)&&delete this.__data__[S];return this.size-=_?1:0,_}function Ea(S){var _=this.__data__;if(Rr){var L=_[S];return L===r?void 0:L}return mt.call(_,S)?_[S]:void 0}function Ia(S){var _=this.__data__;return Rr?_[S]!==void 0:mt.call(_,S)}function Na(S,_){var L=this.__data__;return this.size+=this.has(S)?0:1,L[S]=Rr&&_===void 0?r:_,this}Nn.prototype.clear=Aa,Nn.prototype.delete=Ma,Nn.prototype.get=Ea,Nn.prototype.has=Ia,Nn.prototype.set=Na;function Bt(S){var _=-1,L=S==null?0:S.length;for(this.clear();++_<L;){var q=S[_];this.set(q[0],q[1])}}function Da(){this.__data__=[],this.size=0}function Ra(S){var _=this.__data__,L=Lr(_,S);if(L<0)return!1;var q=_.length-1;return L==q?_.pop():Ta.call(_,L,1),--this.size,!0}function La(S){var _=this.__data__,L=Lr(_,S);return L<0?void 0:_[L][1]}function Ba(S){return Lr(this.__data__,S)>-1}function Pa(S,_){var L=this.__data__,q=Lr(L,S);return q<0?(++this.size,L.push([S,_])):L[q][1]=_,this}Bt.prototype.clear=Da,Bt.prototype.delete=Ra,Bt.prototype.get=La,Bt.prototype.has=Ba,Bt.prototype.set=Pa;function Dn(S){var _=-1,L=S==null?0:S.length;for(this.clear();++_<L;){var q=S[_];this.set(q[0],q[1])}}function gi(){this.size=0,this.__data__={hash:new Nn,map:new(Dr||Bt),string:new Nn}}function za(S){var _=tr(this,S).delete(S);return this.size-=_?1:0,_}function yi(S){return tr(this,S).get(S)}function Fa(S){return tr(this,S).has(S)}function Wa(S,_){var L=tr(this,S),q=L.size;return L.set(S,_),this.size+=L.size==q?0:1,this}Dn.prototype.clear=gi,Dn.prototype.delete=za,Dn.prototype.get=yi,Dn.prototype.has=Fa,Dn.prototype.set=Wa;function bi(S){var _=-1,L=S==null?0:S.length;for(this.__data__=new Dn;++_<L;)this.add(S[_])}function So(S){return this.__data__.set(S,r),this}function xo(S){return this.__data__.has(S)}bi.prototype.add=bi.prototype.push=So,bi.prototype.has=xo;function en(S){var _=this.__data__=new Bt(S);this.size=_.size}function qa(){this.__data__=new Bt,this.size=0}function Va(S){var _=this.__data__,L=_.delete(S);return this.size=_.size,L}function Ha(S){return this.__data__.get(S)}function Ua(S){return this.__data__.has(S)}function Co(S,_){var L=this.__data__;if(L instanceof Bt){var q=L.__data__;if(!Dr||q.length<t-1)return q.push([S,_]),this.size=++L.size,this;L=this.__data__=new Dn(q)}return L.set(S,_),this.size=L.size,this}en.prototype.clear=qa,en.prototype.delete=Va,en.prototype.get=Ha,en.prototype.has=Ua,en.prototype.set=Co;function To(S,_){var L=Si(S),q=!L&&Bo(S),Se=!L&&!q&&ps(S),X=!L&&!q&&!Se&&Fo(S),ke=L||q||Se||X,Le=ke?go(S.length,String):[],oe=Le.length;for(var xe in S)(_||mt.call(S,xe))&&!(ke&&(xe=="length"||Se&&(xe=="offset"||xe=="parent")||X&&(xe=="buffer"||xe=="byteLength"||xe=="byteOffset")||Io(xe,oe)))&&Le.push(xe);return Le}function Lr(S,_){for(var L=S.length;L--;)if(Lo(S[L][0],_))return L;return-1}function hs(S,_,L){var q=_(S);return Si(S)?q:va(q,L(S))}function Br(S){return S==null?S===void 0?Z:z:In&&In in Object(S)?Mo(S):Ja(S)}function ds(S){return zr(S)&&Br(S)==u}function Pr(S,_,L,q,Se){return S===_?!0:S==null||_==null||!zr(S)&&!zr(_)?S!==S&&_!==_:ko(S,_,L,q,Pr,Se)}function ko(S,_,L,q,Se,X){var ke=Si(S),Le=Si(_),oe=ke?c:mn(S),xe=Le?c:mn(_);oe=oe==u?K:oe,xe=xe==u?K:xe;var Ie=oe==K,gt=xe==K,Be=oe==xe;if(Be&&ps(S)){if(!ps(_))return!1;ke=!0,Ie=!1}if(Be&&!Ie)return X||(X=new en),ke||Fo(S)?wi(S,_,L,q,Se,X):Ga(S,_,oe,L,q,Se,X);if(!(L&i)){var Oe=Ie&&mt.call(S,"__wrapped__"),rt=gt&&mt.call(_,"__wrapped__");if(Oe||rt){var tn=Oe?S.value():S,Pt=rt?_.value():_;return X||(X=new en),Se(tn,Pt,L,q,X)}}return Be?(X||(X=new en),Ao(S,_,L,q,Se,X)):!1}function $a(S){if(!zo(S)||Do(S))return!1;var _=xi(S)?is:ya;return _.test(Rn(S))}function Oo(S){return zr(S)&&Po(S.length)&&!!ce[Br(S)]}function _o(S){if(!Ro(S))return wo(S);var _=[];for(var L in Object(S))mt.call(S,L)&&L!="constructor"&&_.push(L);return _}function wi(S,_,L,q,Se,X){var ke=L&i,Le=S.length,oe=_.length;if(Le!=oe&&!(ke&&oe>Le))return!1;var xe=X.get(S);if(xe&&X.get(_))return xe==_;var Ie=-1,gt=!0,Be=L&o?new bi:void 0;for(X.set(S,_),X.set(_,S);++Ie<Le;){var Oe=S[Ie],rt=_[Ie];if(q)var tn=ke?q(rt,Oe,Ie,_,S,X):q(Oe,rt,Ie,S,_,X);if(tn!==void 0){if(tn)continue;gt=!1;break}if(Be){if(!Zt(_,function(Pt,gn){if(!Er(Be,gn)&&(Oe===Pt||Se(Oe,Pt,L,q,X)))return Be.push(gn)})){gt=!1;break}}else if(!(Oe===rt||Se(Oe,rt,L,q,X))){gt=!1;break}}return X.delete(S),X.delete(_),gt}function Ga(S,_,L,q,Se,X,ke){switch(L){case Xn:if(S.byteLength!=_.byteLength||S.byteOffset!=_.byteOffset)return!1;S=S.buffer,_=_.buffer;case Mn:return!(S.byteLength!=_.byteLength||!X(new di(S),new di(_)));case p:case g:case M:return Lo(+S,+_);case w:return S.name==_.name&&S.message==_.message;case ne:case pe:return S==_+"";case k:var Le=Ir;case fe:var oe=q&i;if(Le||(Le=xa),S.size!=_.size&&!oe)return!1;var xe=ke.get(S);if(xe)return xe==_;q|=o,ke.set(S,_);var Ie=wi(Le(S),Le(_),q,Se,X,ke);return ke.delete(S),Ie;case Te:if(cs)return cs.call(S)==cs.call(_)}return!1}function Ao(S,_,L,q,Se,X){var ke=L&i,Le=vi(S),oe=Le.length,xe=vi(_),Ie=xe.length;if(oe!=Ie&&!ke)return!1;for(var gt=oe;gt--;){var Be=Le[gt];if(!(ke?Be in _:mt.call(_,Be)))return!1}var Oe=X.get(S);if(Oe&&X.get(_))return Oe==_;var rt=!0;X.set(S,_),X.set(_,S);for(var tn=ke;++gt<oe;){Be=Le[gt];var Pt=S[Be],gn=_[Be];if(q)var ms=ke?q(gn,Pt,Be,_,S,X):q(Pt,gn,Be,S,_,X);if(!(ms===void 0?Pt===gn||Se(Pt,gn,L,q,X):ms)){rt=!1;break}tn||(tn=Be=="constructor")}if(rt&&!tn){var Fr=S.constructor,He=_.constructor;Fr!=He&&"constructor"in S&&"constructor"in _&&!(typeof Fr=="function"&&Fr instanceof Fr&&typeof He=="function"&&He instanceof He)&&(rt=!1)}return X.delete(S),X.delete(_),rt}function vi(S){return hs(S,Ya,Eo)}function tr(S,_){var L=S.__data__;return No(_)?L[typeof _=="string"?"string":"hash"]:L.map}function Tt(S,_){var L=Ct(S,_);return $a(L)?L:void 0}function Mo(S){var _=mt.call(S,In),L=S[In];try{S[In]=void 0;var q=!0}catch{}var Se=ci.call(S);return q&&(_?S[In]=L:delete S[In]),Se}var Eo=yo?function(S){return S==null?[]:(S=Object(S),Mr(yo(S),function(_){return pi.call(S,_)}))}:ve,mn=Br;(ss&&mn(new ss(new ArrayBuffer(1)))!=Xn||Dr&&mn(new Dr)!=k||ls&&mn(ls.resolve())!=j||as&&mn(new as)!=fe||mi&&mn(new mi)!=dt)&&(mn=function(S){var _=Br(S),L=_==K?S.constructor:void 0,q=L?Rn(L):"";if(q)switch(q){case ka:return Xn;case Oa:return k;case us:return j;case _a:return fe;case fs:return dt}return _});function Io(S,_){return _=_??a,!!_&&(typeof S=="number"||ba.test(S))&&S>-1&&S%1==0&&S<_}function No(S){var _=typeof S;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?S!=="__proto__":S===null}function Do(S){return!!fi&&fi in S}function Ro(S){var _=S&&S.constructor,L=typeof _=="function"&&_.prototype||dn;return S===L}function Ja(S){return ci.call(S)}function Rn(S){if(S!=null){try{return ui.call(S)}catch{}try{return S+""}catch{}}return""}function Lo(S,_){return S===_||S!==S&&_!==_}var Bo=ds(function(){return arguments}())?ds:function(S){return zr(S)&&mt.call(S,"callee")&&!pi.call(S,"callee")},Si=Array.isArray;function Ka(S){return S!=null&&Po(S.length)&&!xi(S)}var ps=bo||we;function ja(S,_){return Pr(S,_)}function xi(S){if(!zo(S))return!1;var _=Br(S);return _==C||_==v||_==h||_==ge}function Po(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=a}function zo(S){var _=typeof S;return S!=null&&(_=="object"||_=="function")}function zr(S){return S!=null&&typeof S=="object"}var Fo=pt?Sa(pt):Oo;function Ya(S){return Ka(S)?To(S):_o(S)}function ve(){return[]}function we(){return!1}n.exports=ja})(Zl,Zl.exports);var L_=Zl.exports,B_=Re&&Re.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fo,"__esModule",{value:!0});var Et=ct,Zp=ts,P_=B_(L_),z_=function(){function n(e,t){typeof e=="string"&&(e=new Zp.InsertDataQuill(Et.DataType.Text,e+"")),this.insert=e,this.attributes=t||{}}return n.createNewLineOp=function(){return new n(Et.NewLine)},n.prototype.isContainerBlock=function(){return this.isBlockquote()||this.isList()||this.isTable()||this.isCodeBlock()||this.isHeader()||this.isBlockAttribute()||this.isCustomTextBlock()},n.prototype.isBlockAttribute=function(){var e=this.attributes;return!!(e.align||e.direction||e.indent)},n.prototype.isBlockquote=function(){return!!this.attributes.blockquote},n.prototype.isHeader=function(){return!!this.attributes.header},n.prototype.isTable=function(){return!!this.attributes.table},n.prototype.isSameHeaderAs=function(e){return e.attributes.header===this.attributes.header&&this.isHeader()},n.prototype.hasSameAdiAs=function(e){return this.attributes.align===e.attributes.align&&this.attributes.direction===e.attributes.direction&&this.attributes.indent===e.attributes.indent},n.prototype.hasSameIndentationAs=function(e){return this.attributes.indent===e.attributes.indent},n.prototype.hasSameAttr=function(e){return P_.default(this.attributes,e.attributes)},n.prototype.hasHigherIndentThan=function(e){return(Number(this.attributes.indent)||0)>(Number(e.attributes.indent)||0)},n.prototype.isInline=function(){return!(this.isContainerBlock()||this.isVideo()||this.isCustomEmbedBlock())},n.prototype.isCodeBlock=function(){return!!this.attributes["code-block"]},n.prototype.hasSameLangAs=function(e){return this.attributes["code-block"]===e.attributes["code-block"]},n.prototype.isJustNewline=function(){return this.insert.value===Et.NewLine},n.prototype.isList=function(){return this.isOrderedList()||this.isBulletList()||this.isCheckedList()||this.isUncheckedList()},n.prototype.isOrderedList=function(){return this.attributes.list===Et.ListType.Ordered},n.prototype.isBulletList=function(){return this.attributes.list===Et.ListType.Bullet},n.prototype.isCheckedList=function(){return this.attributes.list===Et.ListType.Checked},n.prototype.isUncheckedList=function(){return this.attributes.list===Et.ListType.Unchecked},n.prototype.isACheckList=function(){return this.attributes.list==Et.ListType.Unchecked||this.attributes.list===Et.ListType.Checked},n.prototype.isSameListAs=function(e){return!!e.attributes.list&&(this.attributes.list===e.attributes.list||e.isACheckList()&&this.isACheckList())},n.prototype.isSameTableRowAs=function(e){return!!e.isTable()&&this.isTable()&&this.attributes.table===e.attributes.table},n.prototype.isText=function(){return this.insert.type===Et.DataType.Text},n.prototype.isImage=function(){return this.insert.type===Et.DataType.Image},n.prototype.isFormula=function(){return this.insert.type===Et.DataType.Formula},n.prototype.isVideo=function(){return this.insert.type===Et.DataType.Video},n.prototype.isLink=function(){return this.isText()&&!!this.attributes.link},n.prototype.isCustomEmbed=function(){return this.insert instanceof Zp.InsertDataCustom},n.prototype.isCustomEmbedBlock=function(){return this.isCustomEmbed()&&!!this.attributes.renderAsBlock},n.prototype.isCustomTextBlock=function(){return this.isText()&&!!this.attributes.renderAsBlock},n.prototype.isMentions=function(){return this.isText()&&!!this.attributes.mentions},n}();fo.DeltaInsertOp=z_;var ca={},Nc={},co={},Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});function F_(n){var e=n;e=e.replace(/^\s*/gm,"");var t=/^((https?|s?ftp|file|blob|mailto|tel):|#|\/|data:image\/)/;return t.test(e)?e:"unsafe:"+e}Dc.sanitize=F_;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});var Qi;(function(n){n[n.Html=0]="Html",n[n.Url=1]="Url"})(Qi||(Qi={}));function W_(n,e){if(e===void 0&&(e=void 0),!n)return"";var t="";if(e){var r=[].concat(e);t=r.map(function(o){return o.key+(o.value?'="'+o.value+'"':"")}).join(" ")}var i=">";return(n==="img"||n==="br")&&(i="/>"),t?"<"+n+" "+t+i:"<"+n+i}Yn.makeStartTag=W_;function q_(n){return n===void 0&&(n=""),n&&"</"+n+">"||""}Yn.makeEndTag=q_;function o0(n){return Rc(Qi.Html).reduce(a0,n)}Yn.decodeHtml=o0;function V_(n,e){return e===void 0&&(e=!0),e&&(n=o0(n)),Rc(Qi.Html).reduce(l0,n)}Yn.encodeHtml=V_;function H_(n){var e=Rc(Qi.Url),t=e.reduce(a0,n);return e.reduce(l0,t)}Yn.encodeLink=H_;function Rc(n){var e=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#x27;"],["\\/","&#x2F;"],["\\(","&#40;"],["\\)","&#41;"]];return n===Qi.Html?e.filter(function(t){var r=t[0];return t[1],r.indexOf("(")===-1&&r.indexOf(")")===-1}):e.filter(function(t){var r=t[0];return t[1],r.indexOf("/")===-1})}function l0(n,e){return n.replace(new RegExp(e[0],"g"),e[1])}function a0(n,e){return n.replace(new RegExp(e[1],"g"),e[0].replace("\\",""))}var U_=Re&&Re.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e};Object.defineProperty(co,"__esModule",{value:!0});var $_=U_(Dc),G_=Yn,J_=function(){function n(){}return n.sanitize=function(e,t){var r=function(){};t&&typeof t.urlSanitizer=="function"&&(r=t.urlSanitizer);var i=r(e);return typeof i=="string"?i:G_.encodeLink($_.sanitize(e))},n}();co.OpLinkSanitizer=J_;Object.defineProperty(Nc,"__esModule",{value:!0});var em=co,K_=function(){function n(){}return n.sanitize=function(e,t){var r={};return!e||typeof e!="object"||(e.class&&n.IsValidClass(e.class)&&(r.class=e.class),e.id&&n.IsValidId(e.id)&&(r.id=e.id),n.IsValidTarget(e.target+"")&&(r.target=e.target),e.avatar&&(r.avatar=em.OpLinkSanitizer.sanitize(e.avatar+"",t)),e["end-point"]&&(r["end-point"]=em.OpLinkSanitizer.sanitize(e["end-point"]+"",t)),e.slug&&(r.slug=e.slug+"")),r},n.IsValidClass=function(e){return!!e.match(/^[a-zA-Z0-9_\-]{1,500}$/i)},n.IsValidId=function(e){return!!e.match(/^[a-zA-Z0-9_\-\:\.]{1,500}$/i)},n.IsValidTarget=function(e){return["_self","_blank","_parent","_top"].indexOf(e)>-1},n}();Nc.MentionSanitizer=K_;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});function j_(n){return n.length===0?null:n.length>=2?n[1]:n[0]}Qt.preferSecond=j_;function u0(n){return n.reduce(function(e,t){return e.concat(Array.isArray(t)?u0(t):t)},[])}Qt.flatten=u0;function Y_(n,e){if(Array.prototype.find)return Array.prototype.find.call(n,e);for(var t=0;t<n.length;t++)if(e(n[t]))return n[t]}Qt.find=Y_;function X_(n,e){for(var t=[],r,i,o=0;o<n.length;o++)r=n[o],o>0&&e(r,n[o-1])?(i=t[t.length-1],i.push(r)):t.push([r]);return t.map(function(a){return a.length===1?a[0]:a})}Qt.groupConsecutiveElementsWhile=X_;function Q_(n,e,t){for(var r={elements:[],sliceStartsAt:-1},i=e;i>=0&&t(n[i]);i--)r.sliceStartsAt=i,r.elements.unshift(n[i]);return r}Qt.sliceFromReverseWhile=Q_;function Z_(n,e){return n.reduce(function(t,r,i){return t.push(r),i<n.length-1&&t.push(e),t},[])}Qt.intersperse=Z_;Object.defineProperty(ca,"__esModule",{value:!0});var ln=ct,eA=Nc,tA=Qt,nA=co,rA=function(){function n(){}return n.sanitize=function(e,t){var r={};if(!e||typeof e!="object")return r;var i=["bold","italic","underline","strike","code","blockquote","code-block","renderAsBlock"],o=["background","color"],a=e.font,u=e.size,c=e.link,h=e.script,p=e.list,g=e.header,w=e.align,C=e.direction,v=e.indent,k=e.mentions,M=e.mention,z=e.width,K=e.target,j=e.rel,ge=e["code-block"],ne=i.concat(o,["font","size","link","script","list","header","align","direction","indent","mentions","mention","width","target","rel","code-block"]);if(i.forEach(function(pe){var Te=e[pe];Te&&(r[pe]=!!Te)}),o.forEach(function(pe){var Te=e[pe];Te&&(n.IsValidHexColor(Te+"")||n.IsValidColorLiteral(Te+"")||n.IsValidRGBColor(Te+""))&&(r[pe]=Te)}),a&&n.IsValidFontName(a+"")&&(r.font=a),u&&n.IsValidSize(u+"")&&(r.size=u),z&&n.IsValidWidth(z+"")&&(r.width=z),c&&(r.link=nA.OpLinkSanitizer.sanitize(c+"",t)),K&&n.isValidTarget(K)&&(r.target=K),j&&n.IsValidRel(j)&&(r.rel=j),ge&&(n.IsValidLang(ge)?r["code-block"]=ge:r["code-block"]=!!ge),(h===ln.ScriptType.Sub||ln.ScriptType.Super===h)&&(r.script=h),(p===ln.ListType.Bullet||p===ln.ListType.Ordered||p===ln.ListType.Checked||p===ln.ListType.Unchecked)&&(r.list=p),Number(g)&&(r.header=Math.min(Number(g),6)),tA.find([ln.AlignType.Center,ln.AlignType.Right,ln.AlignType.Justify,ln.AlignType.Left],function(pe){return pe===w})&&(r.align=w),C===ln.DirectionType.Rtl&&(r.direction=C),v&&Number(v)&&(r.indent=Math.min(Number(v),30)),k&&M){var fe=eA.MentionSanitizer.sanitize(M,t);Object.keys(fe).length>0&&(r.mentions=!!k,r.mention=M)}return Object.keys(e).reduce(function(pe,Te){return ne.indexOf(Te)===-1&&(pe[Te]=e[Te]),pe},r)},n.IsValidHexColor=function(e){return!!e.match(/^#([0-9A-F]{6}|[0-9A-F]{3})$/i)},n.IsValidColorLiteral=function(e){return!!e.match(/^[a-z]{1,50}$/i)},n.IsValidRGBColor=function(e){var t=/^rgb\(((0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d),\s*){2}(0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d)\)$/i;return!!e.match(t)},n.IsValidFontName=function(e){return!!e.match(/^[a-z\s0-9\- ]{1,30}$/i)},n.IsValidSize=function(e){return!!e.match(/^[a-z0-9\-]{1,20}$/i)},n.IsValidWidth=function(e){return!!e.match(/^[0-9]*(px|em|%)?$/)},n.isValidTarget=function(e){return!!e.match(/^[_a-zA-Z0-9\-]{1,50}$/)},n.IsValidRel=function(e){return!!e.match(/^[a-zA-Z\s\-]{1,250}$/i)},n.IsValidLang=function(e){return typeof e=="boolean"?!0:!!e.match(/^[a-zA-Z\s\-\\\/\+]{1,50}$/i)},n}();ca.OpAttributeSanitizer=rA;var Lc={},Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});function iA(n){var e=`
`;if(n===e)return[n];var t=n.split(e);if(t.length===1)return t;var r=t.length-1;return t.reduce(function(i,o,a){return a!==r?o!==""?i=i.concat(o,e):i.push(e):o!==""&&i.push(o),i},[])}Bc.tokenizeWithNewLines=iA;var ho={};Object.defineProperty(ho,"__esModule",{value:!0});function sA(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(n),i=0;i<e.length;i++){var o=e[i];if(o!=null)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])}return r}ho.assign=sA;var f0=Re&&Re.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e};Object.defineProperty(Lc,"__esModule",{value:!0});var _f=ct,oA=f0(Bc),tm=f0(ho),lA=function(){function n(){}return n.denormalize=function(e){if(!e||typeof e!="object")return[];if(typeof e.insert=="object"||e.insert===_f.NewLine)return[e];var t=oA.tokenizeWithNewLines(e.insert+"");if(t.length===1)return[e];var r=tm.assign({},e,{insert:_f.NewLine});return t.map(function(i){return i===_f.NewLine?r:tm.assign({},e,{insert:i})})},n}();Lc.InsertOpDenormalizer=lA;Object.defineProperty(Ic,"__esModule",{value:!0});var aA=fo,vn=ct,Ds=ts,uA=ca,fA=Lc,nm=co,cA=function(){function n(){}return n.convert=function(e,t){if(!Array.isArray(e))return[];for(var r=[].concat.apply([],e.map(fA.InsertOpDenormalizer.denormalize)),i=[],o,a,u=0,c=r;u<c.length;u++){var h=c[u];h.insert&&(o=n.convertInsertVal(h.insert,t),o&&(a=uA.OpAttributeSanitizer.sanitize(h.attributes,t),i.push(new aA.DeltaInsertOp(o,a))))}return i},n.convertInsertVal=function(e,t){if(typeof e=="string")return new Ds.InsertDataQuill(vn.DataType.Text,e);if(!e||typeof e!="object")return null;var r=Object.keys(e);return r.length?vn.DataType.Image in e?new Ds.InsertDataQuill(vn.DataType.Image,nm.OpLinkSanitizer.sanitize(e[vn.DataType.Image]+"",t)):vn.DataType.Video in e?new Ds.InsertDataQuill(vn.DataType.Video,nm.OpLinkSanitizer.sanitize(e[vn.DataType.Video]+"",t)):vn.DataType.Formula in e?new Ds.InsertDataQuill(vn.DataType.Formula,e[vn.DataType.Formula]):new Ds.InsertDataCustom(r[0],e[r[0]]):null},n}();Ic.InsertOpsConverter=cA;var Pc={};(function(n){var e=Re&&Re.__importStar||function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var g in h)Object.hasOwnProperty.call(h,g)&&(p[g]=h[g]);return p.default=h,p};Object.defineProperty(n,"__esModule",{value:!0});var t=Yn,r=ct,i=e(ho),o=e(Qt),a=ca,u={serif:"font-family: Georgia, Times New Roman, serif",monospace:"font-family: Monaco, Courier New, monospace"};n.DEFAULT_INLINE_STYLES={font:function(h){return u[h]||"font-family:"+h},size:{small:"font-size: 0.75em",large:"font-size: 1.5em",huge:"font-size: 2.5em"},indent:function(h,p){var g=parseInt(h,10)*3,w=p.attributes.direction==="rtl"?"right":"left";return"padding-"+w+":"+g+"em"},direction:function(h,p){if(h==="rtl")return"direction:rtl"+(p.attributes.align?"":"; text-align:inherit")}};var c=function(){function h(p,g){this.op=p,this.options=i.assign({},{classPrefix:"ql",inlineStyles:void 0,encodeHtml:!0,listItemTag:"li",paragraphTag:"p"},g)}return h.prototype.prefixClass=function(p){return this.options.classPrefix?this.options.classPrefix+"-"+p:p+""},h.prototype.getHtml=function(){var p=this.getHtmlParts();return p.openingTag+p.content+p.closingTag},h.prototype.getHtmlParts=function(){var p=this;if(this.op.isJustNewline()&&!this.op.isContainerBlock())return{openingTag:"",closingTag:"",content:r.NewLine};var g=this.getTags(),w=this.getTagAttributes();!g.length&&w.length&&g.push("span");for(var C=[],v=[],k="img",M=function(ge){return ge===k&&!!p.op.attributes.link},z=0,K=g;z<K.length;z++){var j=K[z];M(j)&&C.push(t.makeStartTag("a",this.getLinkAttrs())),C.push(t.makeStartTag(j,w)),v.push(j==="img"?"":t.makeEndTag(j)),M(j)&&v.push(t.makeEndTag("a")),w=[]}return v.reverse(),{openingTag:C.join(""),content:this.getContent(),closingTag:v.join("")}},h.prototype.getContent=function(){if(this.op.isContainerBlock())return"";if(this.op.isMentions())return this.op.insert.value;var p=this.op.isFormula()||this.op.isText()?this.op.insert.value:"";return this.options.encodeHtml&&t.encodeHtml(p)||p},h.prototype.getCssClasses=function(){var p=this.op.attributes;if(this.options.inlineStyles)return[];var g=["indent","align","direction","font","size"];return this.options.allowBackgroundClasses&&g.push("background"),(this.getCustomCssClasses()||[]).concat(g.filter(function(w){return!!p[w]}).filter(function(w){return w==="background"?a.OpAttributeSanitizer.IsValidColorLiteral(p[w]):!0}).map(function(w){return w+"-"+p[w]}).concat(this.op.isFormula()?"formula":[]).concat(this.op.isVideo()?"video":[]).concat(this.op.isImage()?"image":[]).map(this.prefixClass.bind(this)))},h.prototype.getCssStyles=function(){var p=this,g=this.op.attributes,w=[["color"]];return(this.options.inlineStyles||!this.options.allowBackgroundClasses)&&w.push(["background","background-color"]),this.options.inlineStyles&&(w=w.concat([["indent"],["align","text-align"],["direction"],["font","font-family"],["size"]])),(this.getCustomCssStyles()||[]).concat(w.filter(function(C){return!!g[C[0]]}).map(function(C){var v=C[0],k=g[v],M=p.options.inlineStyles&&p.options.inlineStyles[v]||n.DEFAULT_INLINE_STYLES[v];if(typeof M=="object")return M[k];if(typeof M=="function"){var z=M;return z(k,p.op)}else return o.preferSecond(C)+":"+k})).filter(function(C){return C!==void 0})},h.prototype.getTagAttributes=function(){if(this.op.attributes.code&&!this.op.isLink())return[];var p=this.makeAttr.bind(this),g=this.getCustomTagAttributes(),w=g?Object.keys(this.getCustomTagAttributes()).map(function(z){return p(z,g[z])}):[],C=this.getCssClasses(),v=C.length?w.concat([p("class",C.join(" "))]):w;if(this.op.isImage())return this.op.attributes.width&&(v=v.concat(p("width",this.op.attributes.width))),v.concat(p("src",this.op.insert.value));if(this.op.isACheckList())return v.concat(p("data-checked",this.op.isCheckedList()?"true":"false"));if(this.op.isFormula())return v;if(this.op.isVideo())return v.concat(p("frameborder","0"),p("allowfullscreen","true"),p("src",this.op.insert.value));if(this.op.isMentions()){var k=this.op.attributes.mention;return k.class&&(v=v.concat(p("class",k.class))),k["end-point"]&&k.slug?v=v.concat(p("href",k["end-point"]+"/"+k.slug)):v=v.concat(p("href","about:blank")),k.target&&(v=v.concat(p("target",k.target))),v}var M=this.getCssStyles();return M.length&&v.push(p("style",M.join(";"))),this.op.isCodeBlock()&&typeof this.op.attributes["code-block"]=="string"?v.concat(p("data-language",this.op.attributes["code-block"])):(this.op.isContainerBlock()||this.op.isLink()&&(v=v.concat(this.getLinkAttrs())),v)},h.prototype.makeAttr=function(p,g){return{key:p,value:g}},h.prototype.getLinkAttrs=function(){var p=[],g=a.OpAttributeSanitizer.isValidTarget(this.options.linkTarget||"")?this.options.linkTarget:void 0,w=a.OpAttributeSanitizer.IsValidRel(this.options.linkRel||"")?this.options.linkRel:void 0,C=this.op.attributes.target||g,v=this.op.attributes.rel||w;return p.concat(this.makeAttr("href",this.op.attributes.link)).concat(C?this.makeAttr("target",C):[]).concat(v?this.makeAttr("rel",v):[])},h.prototype.getCustomTag=function(p){if(this.options.customTag&&typeof this.options.customTag=="function")return this.options.customTag.apply(null,[p,this.op])},h.prototype.getCustomTagAttributes=function(){if(this.options.customTagAttributes&&typeof this.options.customTagAttributes=="function")return this.options.customTagAttributes.apply(null,[this.op])},h.prototype.getCustomCssClasses=function(){if(this.options.customCssClasses&&typeof this.options.customCssClasses=="function"){var p=this.options.customCssClasses.apply(null,[this.op]);if(p)return Array.isArray(p)?p:[p]}},h.prototype.getCustomCssStyles=function(){if(this.options.customCssStyles&&typeof this.options.customCssStyles=="function"){var p=this.options.customCssStyles.apply(null,[this.op]);if(p)return Array.isArray(p)?p:[p]}},h.prototype.getTags=function(){var p=this,g=this.op.attributes;if(!this.op.isText())return[this.op.isVideo()?"iframe":this.op.isImage()?"img":"span"];for(var w=this.options.paragraphTag||"p",C=[["blockquote"],["code-block","pre"],["list",this.options.listItemTag],["header"],["align",w],["direction",w],["indent",w]],v=0,k=C;v<k.length;v++){var M=k[v],z=M[0];if(g[z]){var K=this.getCustomTag(z);return K?[K]:z==="header"?["h"+g[z]]:[o.preferSecond(M)]}}if(this.op.isCustomTextBlock()){var K=this.getCustomTag("renderAsBlock");return K?[K]:[w]}var j=Object.keys(g).reduce(function(ne,fe){var pe=p.getCustomTag(fe);return pe&&(ne[fe]=pe),ne},{}),ge=[["link","a"],["mentions","a"],["script"],["bold","strong"],["italic","em"],["strike","s"],["underline","u"],["code"]];return ge.filter(function(ne){return!!g[ne[0]]}).concat(Object.keys(j).filter(function(ne){return!ge.some(function(fe){return fe[0]==ne})}).map(function(ne){return[ne,j[ne]]})).map(function(ne){return j[ne[0]]?j[ne[0]]:ne[0]==="script"?g[ne[0]]===r.ScriptType.Sub?"sub":"sup":o.preferSecond(ne)})},h}();n.OpToHtmlConverter=c})(Pc);var zc={},ht={},c0=Re&&Re.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(ht,"__esModule",{value:!0});var hA=function(){function n(e){this.ops=e}return n}();ht.InlineGroup=hA;var h0=function(){function n(e){this.op=e}return n}(),dA=function(n){c0(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(h0);ht.VideoItem=dA;var pA=function(n){c0(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(h0);ht.BlotBlock=pA;var mA=function(){function n(e,t){this.op=e,this.ops=t}return n}();ht.BlockGroup=mA;var gA=function(){function n(e){this.items=e}return n}();ht.ListGroup=gA;var yA=function(){function n(e,t){t===void 0&&(t=null),this.item=e,this.innerList=t}return n}();ht.ListItem=yA;var bA=function(){function n(e){this.rows=e}return n}();ht.TableGroup=bA;var wA=function(){function n(e){this.cells=e}return n}();ht.TableRow=wA;var vA=function(){function n(e){this.item=e}return n}();ht.TableCell=vA;Object.defineProperty(zc,"__esModule",{value:!0});var SA=fo,Il=Qt,Kr=ht,xA=function(){function n(){}return n.pairOpsWithTheirBlock=function(e){for(var t=[],r=function(h){return!(h.isJustNewline()||h.isCustomEmbedBlock()||h.isVideo()||h.isContainerBlock())},i=function(h){return h.isInline()},o=e.length-1,a,u=o;u>=0;u--){var c=e[u];c.isVideo()?t.push(new Kr.VideoItem(c)):c.isCustomEmbedBlock()?t.push(new Kr.BlotBlock(c)):c.isContainerBlock()?(a=Il.sliceFromReverseWhile(e,u-1,r),t.push(new Kr.BlockGroup(c,a.elements)),u=a.sliceStartsAt>-1?a.sliceStartsAt:u):(a=Il.sliceFromReverseWhile(e,u-1,i),t.push(new Kr.InlineGroup(a.elements.concat(c))),u=a.sliceStartsAt>-1?a.sliceStartsAt:u)}return t.reverse(),t},n.groupConsecutiveSameStyleBlocks=function(e,t){return t===void 0&&(t={header:!0,codeBlocks:!0,blockquotes:!0,customBlocks:!0}),Il.groupConsecutiveElementsWhile(e,function(r,i){return!(r instanceof Kr.BlockGroup)||!(i instanceof Kr.BlockGroup)?!1:t.codeBlocks&&n.areBothCodeblocksWithSameLang(r,i)||t.blockquotes&&n.areBothBlockquotesWithSameAdi(r,i)||t.header&&n.areBothSameHeadersWithSameAdi(r,i)||t.customBlocks&&n.areBothCustomBlockWithSameAttr(r,i)})},n.reduceConsecutiveSameStyleBlocksToOne=function(e){var t=SA.DeltaInsertOp.createNewLineOp();return e.map(function(r){if(!Array.isArray(r))return r instanceof Kr.BlockGroup&&!r.ops.length&&r.ops.push(t),r;var i=r.length-1;return r[0].ops=Il.flatten(r.map(function(o,a){return o.ops.length?o.ops.concat(a<i?[t]:[]):[t]})),r[0]})},n.areBothCodeblocksWithSameLang=function(e,t){return e.op.isCodeBlock()&&t.op.isCodeBlock()&&e.op.hasSameLangAs(t.op)},n.areBothSameHeadersWithSameAdi=function(e,t){return e.op.isSameHeaderAs(t.op)&&e.op.hasSameAdiAs(t.op)},n.areBothBlockquotesWithSameAdi=function(e,t){return e.op.isBlockquote()&&t.op.isBlockquote()&&e.op.hasSameAdiAs(t.op)},n.areBothCustomBlockWithSameAttr=function(e,t){return e.op.isCustomTextBlock()&&t.op.isCustomTextBlock()&&e.op.hasSameAttr(t.op)},n}();zc.Grouper=xA;var Fc={};Object.defineProperty(Fc,"__esModule",{value:!0});var $t=ht,Rs=Qt,CA=function(){function n(){}return n.prototype.nest=function(e){var t=this,r=this.convertListBlocksToListGroups(e),i=this.groupConsecutiveListGroups(r),o=Rs.flatten(i.map(function(u){return Array.isArray(u)?t.nestListSection(u):u})),a=Rs.groupConsecutiveElementsWhile(o,function(u,c){return u instanceof $t.ListGroup&&c instanceof $t.ListGroup?u.items[0].item.op.isSameListAs(c.items[0].item.op):!1});return a.map(function(u){if(!Array.isArray(u))return u;var c=u.map(function(h){return h.items});return new $t.ListGroup(Rs.flatten(c))})},n.prototype.convertListBlocksToListGroups=function(e){var t=Rs.groupConsecutiveElementsWhile(e,function(r,i){return r instanceof $t.BlockGroup&&i instanceof $t.BlockGroup&&r.op.isList()&&i.op.isList()&&r.op.isSameListAs(i.op)&&r.op.hasSameIndentationAs(i.op)});return t.map(function(r){return Array.isArray(r)?new $t.ListGroup(r.map(function(i){return new $t.ListItem(i)})):r instanceof $t.BlockGroup&&r.op.isList()?new $t.ListGroup([new $t.ListItem(r)]):r})},n.prototype.groupConsecutiveListGroups=function(e){return Rs.groupConsecutiveElementsWhile(e,function(t,r){return t instanceof $t.ListGroup&&r instanceof $t.ListGroup})},n.prototype.nestListSection=function(e){var t=this,r=this.groupByIndent(e);return Object.keys(r).map(Number).sort().reverse().forEach(function(i){r[i].forEach(function(o){var a=e.indexOf(o);t.placeUnderParent(o,e.slice(0,a))&&e.splice(a,1)})}),e},n.prototype.groupByIndent=function(e){return e.reduce(function(t,r){var i=r.items[0].item.op.attributes.indent;return i&&(t[i]=t[i]||[],t[i].push(r)),t},{})},n.prototype.placeUnderParent=function(e,t){for(var r=t.length-1;r>=0;r--){var i=t[r];if(e.items[0].item.op.hasHigherIndentThan(i.items[0].item.op)){var o=i.items[i.items.length-1];return o.innerList?o.innerList.items=o.innerList.items.concat(e.items):o.innerList=e,!0}}return!1},n}();Fc.ListNester=CA;var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});var Gt=ht,rm=Qt,TA=function(){function n(){}return n.prototype.group=function(e){var t=this.convertTableBlocksToTableGroups(e);return t},n.prototype.convertTableBlocksToTableGroups=function(e){var t=this,r=rm.groupConsecutiveElementsWhile(e,function(i,o){return i instanceof Gt.BlockGroup&&o instanceof Gt.BlockGroup&&i.op.isTable()&&o.op.isTable()});return r.map(function(i){return Array.isArray(i)?new Gt.TableGroup(t.convertTableBlocksToTableRows(i)):i instanceof Gt.BlockGroup&&i.op.isTable()?new Gt.TableGroup([new Gt.TableRow([new Gt.TableCell(i)])]):i})},n.prototype.convertTableBlocksToTableRows=function(e){var t=rm.groupConsecutiveElementsWhile(e,function(r,i){return r instanceof Gt.BlockGroup&&i instanceof Gt.BlockGroup&&r.op.isTable()&&i.op.isTable()&&r.op.isSameTableRowAs(i.op)});return t.map(function(r){return new Gt.TableRow(Array.isArray(r)?r.map(function(i){return new Gt.TableCell(i)}):[new Gt.TableCell(r)])})},n}();Wc.TableGrouper=TA;var kA=Re&&Re.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e};Object.defineProperty(Ec,"__esModule",{value:!0});var OA=Ic,Ls=Pc,Af=zc,Bs=ht,_A=Fc,It=Yn,AA=kA(ho),Ps=ct,MA=Wc,zs="<br/>",EA=function(){function n(e,t){this.rawDeltaOps=[],this.callbacks={},this.options=AA.assign({paragraphTag:"p",encodeHtml:!0,classPrefix:"ql",inlineStyles:!1,multiLineBlockquote:!0,multiLineHeader:!0,multiLineCodeblock:!0,multiLineParagraph:!0,multiLineCustomBlock:!0,allowBackgroundClasses:!1,linkTarget:"_blank"},t,{orderedListTag:"ol",bulletListTag:"ul",listItemTag:"li"});var r;this.options.inlineStyles?typeof this.options.inlineStyles=="object"?r=this.options.inlineStyles:r={}:r=void 0,this.converterOptions={encodeHtml:this.options.encodeHtml,classPrefix:this.options.classPrefix,inlineStyles:r,listItemTag:this.options.listItemTag,paragraphTag:this.options.paragraphTag,linkRel:this.options.linkRel,linkTarget:this.options.linkTarget,allowBackgroundClasses:this.options.allowBackgroundClasses,customTag:this.options.customTag,customTagAttributes:this.options.customTagAttributes,customCssClasses:this.options.customCssClasses,customCssStyles:this.options.customCssStyles},this.rawDeltaOps=e}return n.prototype._getListTag=function(e){return e.isOrderedList()?this.options.orderedListTag+"":e.isBulletList()?this.options.bulletListTag+"":e.isCheckedList()?this.options.bulletListTag+"":e.isUncheckedList()?this.options.bulletListTag+"":""},n.prototype.getGroupedOps=function(){var e=OA.InsertOpsConverter.convert(this.rawDeltaOps,this.options),t=Af.Grouper.pairOpsWithTheirBlock(e),r=Af.Grouper.groupConsecutiveSameStyleBlocks(t,{blockquotes:!!this.options.multiLineBlockquote,header:!!this.options.multiLineHeader,codeBlocks:!!this.options.multiLineCodeblock,customBlocks:!!this.options.multiLineCustomBlock}),i=Af.Grouper.reduceConsecutiveSameStyleBlocksToOne(r),o=new MA.TableGrouper;i=o.group(i);var a=new _A.ListNester;return a.nest(i)},n.prototype.convert=function(){var e=this,t=this.getGroupedOps();return t.map(function(r){if(r instanceof Bs.ListGroup)return e._renderWithCallbacks(Ps.GroupType.List,r,function(){return e._renderList(r)});if(r instanceof Bs.TableGroup)return e._renderWithCallbacks(Ps.GroupType.Table,r,function(){return e._renderTable(r)});if(r instanceof Bs.BlockGroup){var i=r;return e._renderWithCallbacks(Ps.GroupType.Block,r,function(){return e._renderBlock(i.op,i.ops)})}else return r instanceof Bs.BlotBlock?e._renderCustom(r.op,null):r instanceof Bs.VideoItem?e._renderWithCallbacks(Ps.GroupType.Video,r,function(){var o=r,a=new Ls.OpToHtmlConverter(o.op,e.converterOptions);return a.getHtml()}):e._renderWithCallbacks(Ps.GroupType.InlineGroup,r,function(){return e._renderInlines(r.ops,!0)})}).join("")},n.prototype._renderWithCallbacks=function(e,t,r){var i="",o=this.callbacks.beforeRender_cb;i=typeof o=="function"?o.apply(null,[e,t]):"",i||(i=r());var a=this.callbacks.afterRender_cb;return i=typeof a=="function"?a.apply(null,[e,i]):i,i},n.prototype._renderList=function(e){var t=this,r=e.items[0];return It.makeStartTag(this._getListTag(r.item.op))+e.items.map(function(i){return t._renderListItem(i)}).join("")+It.makeEndTag(this._getListTag(r.item.op))},n.prototype._renderListItem=function(e){e.item.op.attributes.indent=0;var t=new Ls.OpToHtmlConverter(e.item.op,this.converterOptions),r=t.getHtmlParts(),i=this._renderInlines(e.item.ops,!1);return r.openingTag+i+(e.innerList?this._renderList(e.innerList):"")+r.closingTag},n.prototype._renderTable=function(e){var t=this;return It.makeStartTag("table")+It.makeStartTag("tbody")+e.rows.map(function(r){return t._renderTableRow(r)}).join("")+It.makeEndTag("tbody")+It.makeEndTag("table")},n.prototype._renderTableRow=function(e){var t=this;return It.makeStartTag("tr")+e.cells.map(function(r){return t._renderTableCell(r)}).join("")+It.makeEndTag("tr")},n.prototype._renderTableCell=function(e){var t=new Ls.OpToHtmlConverter(e.item.op,this.converterOptions),r=t.getHtmlParts(),i=this._renderInlines(e.item.ops,!1);return It.makeStartTag("td",{key:"data-row",value:e.item.op.attributes.table})+r.openingTag+i+r.closingTag+It.makeEndTag("td")},n.prototype._renderBlock=function(e,t){var r=this,i=new Ls.OpToHtmlConverter(e,this.converterOptions),o=i.getHtmlParts();if(e.isCodeBlock())return o.openingTag+It.encodeHtml(t.map(function(u){return u.isCustomEmbed()?r._renderCustom(u,e):u.insert.value}).join(""))+o.closingTag;var a=t.map(function(u){return r._renderInline(u,e)}).join("");return o.openingTag+(a||zs)+o.closingTag},n.prototype._renderInlines=function(e,t){var r=this;t===void 0&&(t=!0);var i=e.length-1,o=e.map(function(c,h){return h>0&&h===i&&c.isJustNewline()?"":r._renderInline(c,null)}).join("");if(!t)return o;var a=It.makeStartTag(this.options.paragraphTag),u=It.makeEndTag(this.options.paragraphTag);return o===zs||this.options.multiLineParagraph?a+o+u:a+o.split(zs).map(function(c){return c===""?zs:c}).join(u+a)+u},n.prototype._renderInline=function(e,t){if(e.isCustomEmbed())return this._renderCustom(e,t);var r=new Ls.OpToHtmlConverter(e,this.converterOptions);return r.getHtml().replace(/\n/g,zs)},n.prototype._renderCustom=function(e,t){var r=this.callbacks.renderCustomOp_cb;return typeof r=="function"?r.apply(null,[e,t]):""},n.prototype.beforeRender=function(e){typeof e=="function"&&(this.callbacks.beforeRender_cb=e)},n.prototype.afterRender=function(e){typeof e=="function"&&(this.callbacks.afterRender_cb=e)},n.prototype.renderCustomWith=function(e){this.callbacks.renderCustomOp_cb=e},n}();Ec.QuillDeltaToHtmlConverter=EA;Object.defineProperty(Ve,"__esModule",{value:!0});var IA=Ec,NA=Ve.QuillDeltaToHtmlConverter=IA.QuillDeltaToHtmlConverter,DA=Pc;Ve.OpToHtmlConverter=DA.OpToHtmlConverter;var ns=ht;Ve.InlineGroup=ns.InlineGroup;Ve.VideoItem=ns.VideoItem;Ve.BlockGroup=ns.BlockGroup;Ve.ListGroup=ns.ListGroup;Ve.ListItem=ns.ListItem;Ve.BlotBlock=ns.BlotBlock;var RA=fo;Ve.DeltaInsertOp=RA.DeltaInsertOp;var d0=ts;Ve.InsertDataQuill=d0.InsertDataQuill;Ve.InsertDataCustom=d0.InsertDataCustom;var oi=ct;Ve.NewLine=oi.NewLine;Ve.ListType=oi.ListType;Ve.ScriptType=oi.ScriptType;Ve.DirectionType=oi.DirectionType;Ve.AlignType=oi.AlignType;Ve.DataType=oi.DataType;Ve.GroupType=oi.GroupType;window.DOMSerializer=Tn;window.wrapIn=Ql;window.toggleMark=Jn;window.setBlockType=Gs;window.prosePlugin=Tr;window.EditorState=Wi;window.EditorView=Nk;window.Schema=Fm;window.DOMParser=Gi;window.basicSchema=$k;window.undo=ro;window.redo=Yi;window.proseHistory=zg;window.keymap=Kf;window.buildKeymap=s0;window.menuBar=Zg;window.buildMenuItems=i0;window.addListNodes=n_;window.exampleSetup=I_;window.baseKeymap=Kg;window.QuillDeltaToHtmlConverter=NA;
